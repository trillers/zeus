!function(e,t){"function"==typeof define&&define.cmd?define("isjs",function(i){return e.is=t(i)}):"object"==typeof exports?module.exports=t(require("isjs")):e.is=t(e.is)}(this,function(e){function t(e){return function(){return!e.apply(null,l.call(arguments))}}function i(t){return function(){var i=l.call(arguments),n=i.length;1===n&&e.array(i[0])&&(i=i[0],n=i.length);for(var o=0;n>o;o++)if(!t.call(null,i[o]))return!1;return!0}}function n(t){return function(){var i=l.call(arguments),n=i.length;1===n&&e.array(i[0])&&(i=i[0],n=i.length);for(var o=0;n>o;o++)if(t.call(null,i[o]))return!0;return!1}}function o(t,i){e[t]=function(e){return i[t].test(e)}}function a(){var o=e;for(var a in o)if(u.call(o,a)&&e.function(o[a]))for(var r=o[a].api||["not","all","any"],s=0;s<r.length;s++)"not"===r[s]&&(e.not[a]=t(e[a])),"all"===r[s]&&(e.all[a]=i(e[a])),"any"===r[s]&&(e.any[a]=n(e[a]))}var r=this,s=r.is;e={},e.VERSION="0.7.1",e.not={},e.all={},e.any={};var c=Object.prototype.toString,l=Array.prototype.slice,u=Object.prototype.hasOwnProperty;e.arguments=function(t){return e.not.null(t)&&("[object Arguments]"===c.call(t)||"object"==typeof t&&"callee"in t)},e.array=Array.isArray||function(e){return"[object Array]"===c.call(e)},e.boolean=function(e){return e===!0||e===!1||"[object Boolean]"===c.call(e)},e.date=function(e){return"[object Date]"===c.call(e)},e.error=function(e){return"[object Error]"===c.call(e)},e.function=function(e){return"[object Function]"===c.call(e)||"function"==typeof e},e.nan=function(e){return e!==e},e.null=function(e){return null===e||"[object Null]"===c.call(e)},e.number=function(t){return e.not.nan(t)&&"[object Number]"===c.call(t)},e.object=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},e.json=function(e){return"[object Object]"===c.call(e)},e.regexp=function(e){return"[object RegExp]"===c.call(e)},e.sameType=function(t,i){return e.nan(t)||e.nan(i)?e.nan(t)===e.nan(i):c.call(t)===c.call(i)},e.sameType.api=["not"],e.string=function(e){return"[object String]"===c.call(e)},e.char=function(t){return e.string(t)&&1===t.length},e.undefined=function(e){return void 0===e},e.empty=function(t){if(e.object(t)){var i=Object.getOwnPropertyNames(t).length;return 0===i||1===i&&e.array(t)||2===i&&e.arguments(t)?!0:!1}return""===t},e.existy=function(e){return null!==e&&void 0!==e},e.truthy=function(t){return e.existy(t)&&t!==!1&&e.not.nan(t)&&""!==t&&0!==t},e.falsy=t(e.truthy),e.space=function(t){if(e.char(t)){var i=t.charCodeAt(0);return i>8&&14>i||32===i}return!1},e.equal=function(t,i){return e.all.number(t,i)?t===i&&1/t===1/i:e.all.string(t,i)||e.all.regexp(t,i)?""+t==""+i:e.all.boolean(t,i)?t===i:!1},e.equal.api=["not"],e.even=function(t){return e.number(t)&&t%2===0},e.odd=function(t){return e.number(t)&&t%2!==0},e.positive=function(t){return e.number(t)&&t>0},e.negative=function(t){return e.number(t)&&0>t},e.above=function(t,i){return e.all.number(t,i)&&t>i},e.above.api=["not"],e.under=function(t,i){return e.all.number(t,i)&&i>t},e.under.api=["not"],e.within=function(t,i,n){return e.all.number(t,i,n)&&t>i&&n>t},e.within.api=["not"],e.decimal=function(t){return e.number(t)&&t%1!==0},e.integer=function(t){return e.number(t)&&t%1===0},e.finite=isFinite||function(t){return 1/0!==t&&t!==-1/0&&e.not.nan(t)},e.infinite=t(e.finite);var d={url:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,alphaNumeric:/^[A-Za-z0-9]+$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,dateString:/^(1[0-2]|0?[1-9])\/(3[01]|[12][0-9]|0?[1-9])\/(?:[0-9]{2})?[0-9]{2}$/,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-(?!00)[0-9]{2}-(?!0000)[0-9]{4}$/,affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,hexadecimal:/^[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/};for(var p in d)d.hasOwnProperty(p)&&o(p,d);e.include=String.prototype.includes||function(e,t){return e.indexOf(t)>-1},e.include.api=["not"],e.upperCase=function(t){return e.string(t)&&t===t.toUpperCase()},e.lowerCase=function(t){return e.string(t)&&t===t.toLowerCase()},e.startWith=function(t,i){return e.string(t)&&0===t.indexOf(i)},e.startWith.api=["not"],e.endWith=function(t,i){return e.string(t)&&t.indexOf(i)>-1&&t.indexOf(i)===t.length-i.length},e.endWith.api=["not"],e.capitalized=function(t){if(e.not.string(t))return!1;for(var i=t.split(" "),n=[],o=0;o<i.length;o++)n.push(i[o][0]===i[o][0].toUpperCase());return e.all.truthy.apply(null,n)},e.palindrome=function(t){return e.string(t)&&t==t.split("").reverse().join("")};var f=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],h=["january","february","march","april","may","june","july","august","september","october","november","december"];if(e.today=function(t){var i=new Date,n=i.toDateString();return e.date(t)&&t.toDateString()===n},e.yesterday=function(t){var i=new Date,n=new Date(i.setDate(i.getDate()-1)).toDateString();return e.date(t)&&t.toDateString()===n},e.tomorrow=function(t){var i=new Date,n=new Date(i.setDate(i.getDate()+1)).toDateString();return e.date(t)&&t.toDateString()===n},e.past=function(t){var i=new Date;return e.date(t)&&t.getTime()<i.getTime()},e.future=t(e.past),e.day=function(t,i){return e.date(t)&&i.toLowerCase()===f[t.getDay()]},e.day.api=["not"],e.month=function(t,i){return e.date(t)&&i.toLowerCase()===h[t.getMonth()]},e.month.api=["not"],e.year=function(t,i){return e.date(t)&&e.number(i)&&i===t.getFullYear()},e.year.api=["not"],e.leapYear=function(t){return e.number(t)&&(t%4===0&&t%100!==0||t%400===0)},e.weekend=function(t){return e.date(t)&&(6===t.getDay()||0===t.getDay())},e.weekday=t(e.weekend),e.inDateRange=function(t,i,n){if(e.not.date(t)||e.not.date(i)||e.not.date(n))return!1;var o=t.getTime(),a=i.getTime(),r=n.getTime();return o>a&&r>o},e.inDateRange.api=["not"],e.inLastWeek=function(t){return e.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},e.inLastMonth=function(t){return e.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},e.inLastYear=function(t){return e.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},e.inNextWeek=function(t){return e.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},e.inNextMonth=function(t){return e.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},e.inNextYear=function(t){return e.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},e.quarterOfYear=function(t,i){return e.date(t)&&e.number(i)&&i===Math.floor((t.getMonth()+3)/3)},e.quarterOfYear.api=["not"],e.dayLightSavingTime=function(e){var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()<n},"undefined"!=typeof window){var g="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"",v="navigator"in window&&"vendor"in navigator&&navigator.vendor.toLowerCase()||"",m="navigator"in window&&"appVersion"in navigator&&navigator.appVersion.toLowerCase()||"";e.chrome=function(){return/chrome|chromium/i.test(g)&&/google inc/.test(v)},e.chrome.api=["not"],e.firefox=function(){return/firefox/i.test(g)},e.firefox.api=["not"],e.ie=function(e){return e?e>=11?"ActiveXObject"in window:new RegExp("msie "+e).test(g):/msie/i.test(g)||"ActiveXObject"in window},e.ie.api=["not"],e.opera=function(){return/^Opera\//.test(g)||/\x20OPR\//.test(g)},e.opera.api=["not"],e.safari=function(){return/safari/i.test(g)&&/apple computer/i.test(v)},e.safari.api=["not"],e.ios=function(){return e.iphone()||e.ipad()||e.ipod()},e.ios.api=["not"],e.iphone=function(){return/iphone/i.test(g)},e.iphone.api=["not"],e.ipad=function(){return/ipad/i.test(g)},e.ipad.api=["not"],e.ipod=function(){return/ipod/i.test(g)},e.ipod.api=["not"],e.android=function(){return/android/i.test(g)},e.android.api=["not"],e.androidPhone=function(){return/android/i.test(g)&&/mobile/i.test(g)},e.androidPhone.api=["not"],e.androidTablet=function(){return/android/i.test(g)&&!/mobile/i.test(g)},e.androidTablet.api=["not"],e.blackberry=function(){return/blackberry/i.test(g)},e.blackberry.api=["not"],e.desktop=function(){return e.not.mobile()&&e.not.tablet()},e.desktop.api=["not"],e.linux=function(){return/linux/i.test(m)},e.linux.api=["not"],e.mac=function(){return/mac/i.test(m)},e.mac.api=["not"],e.windows=function(){return/win/i.test(m)},e.windows.api=["not"],e.windowsPhone=function(){return e.windows()&&/phone/i.test(g)},e.windowsPhone.api=["not"],e.windowsTablet=function(){return e.windows()&&e.not.windowsPhone()&&/touch/i.test(g)},e.windowsTablet.api=["not"],e.mobile=function(){return e.iphone()||e.ipod()||e.androidPhone()||e.blackberry()||e.windowsPhone()},e.mobile.api=["not"],e.tablet=function(){return e.ipad()||e.androidTablet()||e.windowsTablet()},e.tablet.api=["not"],e.online=function(){return navigator.onLine},e.online.api=["not"],e.offline=t(e.online),e.offline.api=["not"],e.touchDevice=function(){return"ontouchstart"in window||"DocumentTouch"in window&&document instanceof DocumentTouch},e.touchDevice.api=["not"]}return e.propertyCount=function(t,i){if(!e.object(t)||!e.number(i))return!1;if(Object.keys)return Object.keys(t).length===i;var n,o=[];for(n in t)u.call(t,n)&&o.push(n);return o.length===i},e.propertyCount.api=["not"],e.propertyDefined=function(t,i){return e.object(t)&&e.string(i)&&i in t},e.propertyDefined.api=["not"],e.windowObject=function(e){return"object"==typeof e&&"setInterval"in e},e.domNode=function(t){return e.object(t)&&t.nodeType>0},e.inArray=function(t,i){if(e.not.array(i))return!1;for(var n=0;n<i.length;n++)if(i[n]===t)return!0;return!1},e.inArray.api=["not"],e.sorted=function(t){if(e.not.array(t))return!1;for(var i=0;i<t.length;i++)if(t[i]>t[i+1])return!1;return!0},a(),e.setRegexp=function(e,t){for(var i in d)u.call(d,i)&&t===i&&(d[i]=e)},e.setNamespace=function(){return r.is=s,this},e}),define("jquery.cookie",["jquery"],function(e,t,i){var n=e("jquery");!function(e,t,i){function n(e){return e}function o(e){return a(decodeURIComponent(e.replace(s," ")))}function a(e){return 0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e}function r(e){return c.json?JSON.parse(e):e}var s=/\+/g,c=e.cookie=function(a,s,l){if(s!==i){if(l=e.extend({},c.defaults,l),null===s&&(l.expires=-1),"number"==typeof l.expires){var u=l.expires,d=l.expires=new Date;d.setDate(d.getDate()+u)}return s=c.json?JSON.stringify(s):String(s),t.cookie=[encodeURIComponent(a),"=",c.raw?s:encodeURIComponent(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var p=c.raw?n:o,f=t.cookie.split("; "),h=a?null:{},g=0,v=f.length;v>g;g++){var m=f[g].split("="),y=p(m.shift()),_=p(m.join("="));if(a&&a===y){h=r(_);break}a||(h[y]=r(_))}return h};c.defaults={},e.removeCookie=function(t,i){return null!==e.cookie(t)?(e.cookie(t,null,i),!0):!1}}(n,document),i.exports=n}),define("jqlazyload",function(e,t){t.init=function(t){!function(t,i,n,o){var t=e("jquery"),a=t(i);t.fn.lazyload=function(e){function r(){var e=0;c.each(function(){var i=t(this);if(!l.skip_invisible||i.is(":visible"))if(t.abovethetop(this,l)||t.leftofbegin(this,l));else if(t.belowthefold(this,l)||t.rightoffold(this,l)){if(++e>l.failure_limit)return!1}else i.trigger("appear"),e=0})}var s,c=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:i,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return e&&(o!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),o!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),t.extend(l,e)),s=l.container===o||l.container===i?a:t(l.container),0===l.event.indexOf("scroll")&&s.bind(l.event,function(){return r()}),this.each(function(){var e=this,i=t(e);e.loaded=!1,(i.attr("src")===o||i.attr("src")===!1)&&i.is("img")&&i.attr("src",l.placeholder),i.one("appear",function(){if(!this.loaded){if(l.appear){var n=c.length;l.appear.call(e,n,l)}t("<img />").bind("load",function(){var n=i.attr("data-"+l.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[l.effect](l.effect_speed),e.loaded=!0;var o=t.grep(c,function(e){return!e.loaded});if(c=t(o),l.load){var a=c.length;l.load.call(e,a,l)}}).attr("src",i.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&i.bind(l.event,function(){e.loaded||i.trigger("appear")})}),a.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&c.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){r()}),this},t.belowthefold=function(e,n){var r;return r=n.container===o||n.container===i?(i.innerHeight?i.innerHeight:a.height())+a.scrollTop():t(n.container).offset().top+t(n.container).height(),r<=t(e).offset().top-n.threshold},t.rightoffold=function(e,n){var r;return r=n.container===o||n.container===i?a.width()+a.scrollLeft():t(n.container).offset().left+t(n.container).width(),r<=t(e).offset().left-n.threshold},t.abovethetop=function(e,n){var r;return r=n.container===o||n.container===i?a.scrollTop():t(n.container).offset().top,r>=t(e).offset().top+n.threshold+t(e).height()},t.leftofbegin=function(e,n){var r;return r=n.container===o||n.container===i?a.scrollLeft():t(n.container).offset().left,r>=t(e).offset().left+n.threshold+t(e).width()},t.inviewport=function(e,i){return!(t.rightoffold(e,i)||t.leftofbegin(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(t,window,document)}}),!function(e,t){"function"==typeof define&&(define.amd||define.cmd)?define("jssdk",function(){return t(e)}):t(e,!0)}(this,function(e,t){function i(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(i),function(e){r(t,e,n)}):l(t,n)}function n(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),r(t,e,i)}):n?l(t,n):l(t,i)}function o(e){return e=e||{},e.appId=C.appId,e.verifyAppId=C.appId,e.verifySignType="sha1",e.verifyTimestamp=C.timestamp+"",e.verifyNonceStr=C.nonceStr,e.verifySignature=C.signature,e}function a(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,"package":e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function r(e,t,i){var n,o,a;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,n=t.errMsg,n||(n=t.err_msg,delete t.err_msg,n=s(e,n,i),t.errMsg=n),i=i||{},i._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),o=n.indexOf(":"),a=n.substring(o+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function s(e,t){var i,n,o,a;if(t){switch(i=t.indexOf(":"),e){case h.config:n="config";break;case h.openProductSpecificView:n="openProductSpecificView";break;default:n=t.substring(0,i),n=n.replace(/_/g," "),n=n.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),n=n.substring(0,1).toLowerCase()+n.substring(1),n=n.replace(/ /g,""),-1!=n.indexOf("Wcpay")&&(n=n.replace("Wcpay","WCPay")),o=g[n],o&&(n=o)}a=t.substring(i+1),"confirm"==a&&(a="ok"),"failed"==a&&(a="fail"),-1!=a.indexOf("failed_")&&(a=a.substring(7)),-1!=a.indexOf("fail_")&&(a=a.substring(5)),a=a.replace(/_/g," "),a=a.toLowerCase(),("access denied"==a||"no permission to execute"==a)&&(a="permission denied"),"config"==n&&"function not exist"==a&&(a="ok"),t=n+":"+a}return t}function c(e){var t,i,n,o;if(e){for(t=0,i=e.length;i>t;++t)n=e[t],o=h[n],o&&(e[t]=o);return e}}function l(e,t){if(C.debug&&!t.isInnerInvoke){var i=g[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function u(){if(!("6.0.2">x||T.systemType<0)){var e=new Image;T.appId=C.appId,T.initTime=k.initEndTime-k.initStartTime,T.preVerifyTime=k.preVerifyEndTime-k.preVerifyStartTime,$.getNetworkType({isInnerInvoke:!0,success:function(t){T.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+T.version+"&o="+T.isPreVerifyOk+"&s="+T.systemType+"&c="+T.clientVersion+"&a="+T.appId+"&n="+T.networkType+"&i="+T.initTime+"&p="+T.preVerifyTime+"&u="+T.url;e.src=i}})}}function d(){return(new Date).getTime()}function p(t){_&&(e.WeixinJSBridge?t():v.addEventListener&&v.addEventListener("WeixinJSBridgeReady",t,!1))}function f(){$.invoke||($.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(i),n)},$.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var h,g,v,m,y,_,b,w,x,k,T,C,N,A,$;return e.jWeixin?void 0:(h={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,t={};for(e in h)t[h[e]]=e;return t}(),v=e.document,m=v.title,y=navigator.userAgent.toLowerCase(),_=-1!=y.indexOf("micromessenger"),b=-1!=y.indexOf("android"),w=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),x=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),k={initStartTime:d(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},T={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:w?1:b?2:-1,clientVersion:x,url:encodeURIComponent(location.href)},C={},N={_completes:[]},A={state:0,res:{}},p(function(){k.initEndTime=d()}),$={config:function(e){C=e,l("config",e);var t=C.check===!1?!1:!0;p(function(){var e,n,o;if(t)i(h.config,{verifyJsApiList:c(C.jsApiList)},function(){N._complete=function(e){k.preVerifyEndTime=d(),A.state=1,A.res=e},N.success=function(){T.isPreVerifyOk=0},N.fail=function(e){N._fail?N._fail(e):A.state=-1};var e=N._completes;return e.push(function(){C.debug||u()}),N.complete=function(){for(var t=0,i=e.length;i>t;++t)e[t]();N._completes=[]},N}()),k.preVerifyStartTime=d();else{for(A.state=1,e=N._completes,n=0,o=e.length;o>n;++n)e[n]();N._completes=[]}}),C.beta&&f()},ready:function(e){0!=A.state?e():(N._completes.push(e),!_&&C.debug&&e())},error:function(e){"6.0.2">x||(-1==A.state?e(A.res):N._fail=e)},checkJsApi:function(e){var t=function(e){var t,i,n=e.checkResult;for(t in n)i=g[t],i&&(n[i]=n[t],delete n[t]);return e};i("checkJsApi",{jsApiList:c(e.jsApiList)},function(){return e._complete=function(e){if(b){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=t(e)},e}())},onMenuShareTimeline:function(e){n(h.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||m,desc:e.title||m,img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){n(h.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||m,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){n(h.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||m,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(h.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||m,desc:e.desc||"",img_url:e.imgUrl,link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"]},function(){return e._complete=function(e){if(b){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){i(h.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,i,n,o=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(i=o.indexOf(":"),n=o.substring(i+1)){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(h.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,i;w&&(t=e.resultStr,t&&(i=JSON.parse(t),e.resultStr=i&&i.scan_code&&i.scan_code.scan_result))},e}())},openProductSpecificView:function(e){i(h.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var t,n,o,a,r=e.cardList,s=[];for(t=0,n=r.length;n>t;++t)o=r[t],a={card_id:o.cardId,card_ext:o.cardExt},s.push(a);i(h.addCard,{card_list:s},function(){return e._complete=function(e){var t,i,n,o=e.card_list;if(o){for(o=JSON.parse(o),t=0,i=o.length;i>t;++t)n=o[t],n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=n.is_succ?!0:!1,delete n.card_id,delete n.card_ext,delete n.is_succ;e.cardList=o,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:C.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,n,o,a,r=e.cardList,s=[];for(t=0,n=r.length;n>t;++t)o=r[t],a={card_id:o.cardId,code:o.code},s.push(a);i(h.openCard,{card_list:s},e)},chooseWXPay:function(e){i(h.chooseWXPay,a(e),e)}},t&&(e.wx=e.jWeixin=$),$)}),define("tags",["riot"],function(e,t,i){i.exports=function(){var t=e("riot");t.tag("activity-createsuccess",'<div if="{!hidden}" id="createsuccess_document"> <div class="sucimgs"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_01.png"></div> <div class="sucimgs1"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_02.png"></div> <div class="pub_tit t-c m_top_s1"> 提示 </div> <div class="pun set_width1 t-c" > 已发布的活动可以在“我的活动”中查看和管理。 </div> <div class="footer_zw clear"></div>       <div class="footer-detail"> <div onclick="{homepage}"></div> <div class="button but2" style="width:36%;" onclick="{jumpActivitypPage}">查看活动</div> <div class="button but2" style="width:36%;" onclick="{jumpNewPage}">发布活动</div> </div> </div>',function(){var e=nest.presentable(this);e.env=__app.settings.env.NODE_ENV;var i=nest.modelable({},{url:__app.settings.api.url+"/pa/"});i._id=this._id=this.opts._id,i.on("fetch",function(t){console.info("activity is fetched"),e.item=t,e.picshow=util.calcImageUrl(e.item),e.update(),a()}),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this);var n=function(e){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),console.log(e),console.log(this._id),this._id=e||this._id,i.set("_id",this._id),i.fetch({action:"open"})}.bind(e),o=function(){this.trigger("ready",!1),i.fetch(this._id,{action:"refresh"})}.bind(e);this.on("open",function(e){console.log(e),console.info("tag activities is opening"),n(e),$(window).scrollTop("0px")}),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("refresh",function(){console.info("tag activity is refreshing"),o()}),this.homepage=function(){t.route("activity/index")}.bind(this),this.jumpNewPage=function(){t.route("activity/new")}.bind(this),this.jumpActivitypPage=function(){t.route("activity/_"+i._id)}.bind(this);var a=function(){var t=util.sharepic(e.item);$("#createsuccess_document").off("click").on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")}),wx.ready(function(){var n={title:e.item.name,desc:e.item.desc,link:__page.holder().getBaseUrl()+"/index#activity/_"+i._id,imgUrl:t};wx.onMenuShareAppMessage(n);var o={title:e.item.name,desc:e.item.desc,link:__page.holder().getBaseUrl()+"/index#activity/_"+i._id,imgUrl:t,success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",e.item.name||"",util.convertToValue(e.item.tags.type).join(",")||""])}};wx.onMenuShareTimeline(o)})};$(window).scrollTop("0px")}),t.tag("activity-detail",'<div class="view" if="{!hidden}" id="detail_document"> <mask-loading show="{mask}"></mask-loading> <div class="view" if="{!mask}"> <div if="{debug}"> <a href="#activity/index">返回</a> <a onclick="{refresh}" href="">刷新</a> <a href="#debug/index">调试</a> </div> <div class="screen"> <img riot-src="{picshow}" class="img100 imgsetwidth"> <div class="apply_sum"> <p class="p1 sum_font_{status1 ? status1 : \'\'}">{statusName}</p> <span><i>{num ? num :\'0\'}</i></span>人 </div> </div> <div class="detail_title"> <div class="tit_div1_wary" style=""> <div class="tit_div1">{item.name.length > 28 ? item.name.substring(0, 28)+\'...\':item.name}</div> <ul class="typetagsul"><li each="{name,i in item.tags.type || []}" style="margin-right: 5px">{__app.enums.TypeTags.values[name]}</li></ul> </div> <div class="tit_div2 fl activity_live_p {isActivityLike ? \'isLive\':\'\'}" onclick="{activityLive}"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/x_2.png" class="vertical nolike"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/x_1.png" class="vertical yeslike"> <span class="likesum">{likes}</span> </div> </div> <div class="m_top10_media position_rel detail_basic_info"> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_04.png"></div> <div> <p>活动时间</p> <p>{timeString}</p> <p>报名截止 {closingTimeString}</p> </div> </div> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_05.png"></div> <div> <p>活动地点</p> <p>{item.place}</p> </div> </div> <div> <div><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_06.png"></div> <div> <p>发起人</p> <p><img riot-src="{initiatorHeadUrl}" width="32" class="imgradius vertical"> <span id="initiatorNameinitiatorContacts"></span></p> </div> </div> <p class="pa_tyle immediately" if="{status1==\'a\'}">我要报名</p> </div> <div class="acrivity_Introduction_nav"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div class="introduce nav_info nav_info"> <div id="ac_detail" class="detail_pub m_top10">      {showDesc(acDesc)} </div> </div> <div class="list_nav" onclick="{operationNav}">  <div class="{(currentIndex == 2) ? \'click_h\' : \'\'}" alt="2">队友</div> <div class="{(currentIndex == 1) ? \'click_h\' : \'\'}" alt="1">咨询</div> <div class="{(currentIndex == 3) ? \'click_h\' : \'\'}" alt="3" id="random_notes_div1">随记</div> </div> <div class="clear"></div> <div class="interflow nav_info nav_info min_height1" if="{currentIndex==1}"> <div if="{cmtShow === true}"> <communication-index class="no_border" each="{comments}" tag="{this}"></communication-index> </div> <div class="noapply F14" if="{cmtShow === false}"> 没有内容，你来发表第一条吧~~~ </div> </div> <div class="applications nav_info min_height1" id="applications" if="{currentIndex==2}"> <div if="{applicShow === true}" > <div if="{isinitiator == false}"> <applications-item each="{applic}" tag="{this}"></applications-item> </div> <div if="{isinitiator == true}"> <div if="{sms_send == 0}"> <applications-item-initiator each="{applic}" tag="{this}"></applications-item-initiator> </div> <div if="{sms_send == 1}"> <form> <div class="check_all" onclick="{allSelect}"><p if="{selectbut == true}">全选</p><p if="{selectbut == false}">取消全选</p></div> <applications-item-initiator-sms each="{applic}" tag="{this}"></applications-item-initiator-sms> </form> </div> </div> </div> <div class="noapply F14" if="{applicShow === false}"> 没人报名，赶快去抢沙发吧~~~ </div> </div> <div class="random_notes nav_info nav_info min_height1" if="{currentIndex==3}">  <randomnotes-item class="no_border" each="{randomNotes}" tag="{this}"></randomnotes-item>  <div class="noapply F14" if="{randomNoteShow === false}"> 空空如也，你也来晒晒图吧~~~ </div> </div> <div class="acrivity_detail_more_tit"> <div class="activity_title"> <span></span> 相关推荐 </div> </div> <activity-recommend-item each="{items}" curritem="{this}"></activity-recommend-item> <div class="clear"></div> <div class="two_dimension_botder-top"></div> <div class="two_dimension"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/two_dimension.png"> </div> <div class="clear"></div> <div class="serv t-c" id="detail_serv"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/1_19.png"> 客服电话：400-680-9072</p> </div>  <div class="apply_wary border_radius position_rel display_none"> <img src="/web/images/bmwhole.png" class="applyclosebtn_img"> <div id="applyclosebtn" class="applyclosebtn applyclosebtn_css" onclick="{closeApplyLayer}" ></div> <div class="applybody setback_color_d6eeee"> <p class="leit1" if="{fieldIfExist(\'displayName\')}"><span class="vertical set_line_height26">姓名: </span><input type="text" class="userinfo" name="displayName" value="{contact.displayName}" id="displayName" placeholder="" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'phone\')}"><span class="vertical set_line_height26">手机: </span><input type="tel" class="userinfo" name="phone" id="phone" placeholder="" value="{contact.phone}" onclick="{preventEvent}"></p> <div class="leit1" if="{fieldIfExist(\'gender\')}"> <span class="vertical">性别: </span><input type="text" class="userinfo textw1" name="count" readonly placeholder=""> <div class="{(contact.gender && contact.gender == \'1\') ? \'sex right1 sex_select\' : \'sex right1\'}" onclick="{sexSelect}" value="1">女</div> <div class="{(contact.gender && contact.gender == \'1\') ? \'sex right2\' : \'sex right2 sex_select\'}" onclick="{sexSelect}" value="0">男</div> <input name="gender" type="hidden" id="gender" value="{contact.gender || 0}"> </div> <div class="leit1 position_rel" if="{fieldIfExist(\'birthday\')}"> <span class="vertical set_line_height26">出生日期:</span>  <input type="text" id="birthdayTxt" value="" readonly="readonly" class="userinfo textw1" style="width:70%;"> <input id="birthday" onchange="{birthdayChange}" onclick="{birthdayClick}" onblur="{birthdayBlur}" name="birthday" style="display: inline-block;margin-top:0px;width:70%;" type="date"> <p>请选择 </p> </div> <p class="leit1" if="{fieldIfExist(\'IDCard\')}"><span class="vertical set_line_height26">身份证: </span><input type="text" class="userinfo" name="IDCard" id="IDCard" placeholder="" value="{contact.IDCard}" onclick="{preventEvent}" style="width:75%;"></p> <p class="leit1" if="{fieldIfExist(\'company\')}"><span class="vertical set_line_height26">单位: </span><input type="text" class="userinfo" name="company" id="company" placeholder="" value="{contact.company}" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'position\')}"><span class="vertical set_line_height26">职位: </span><input type="text" class="userinfo" name="position" id="position" placeholder="" value="{contact.position}" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'business\')}"><span class="vertical set_line_height26">行业: </span><input type="text" class="userinfo" name="business" id="business" placeholder="" value="{contact.business}" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'school\')}"><span class="vertical set_line_height26">学校: </span><input type="text" class="userinfo" name="school" id="school" placeholder="" value="{contact.school}" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'discipline\')}"><span class="vertical set_line_height26">专业: </span><input type="text" class="userinfo" name="discipline" id="discipline" placeholder="" value="{contact.discipline}" onclick="{preventEvent}"></p> <p class="leit1" if="{fieldIfExist(\'class\')}"><span class="vertical set_line_height26">班级: </span><input type="text" class="userinfo" name="class" id="class" placeholder="" value="{contact.class}" onclick="{preventEvent}"></p> <div class="leit1"> <span class="vertical">人数: </span><input type="text" class="userinfo textw1" name="count" id="count" readonly placeholder=""> <div value="+" class="add" id="add1" >+</div> <input type="text" class="sum_info" value="1" name="num" id="num" readonly><div value="-" class="minus" id="minus1" >-</div> </div> <input name="applicant" type="hidden" id="applicant" value="" class="userinfo"> <div class="leit1" if="{fieldIfExist(\'desc\')}"> <table class=""> <tr> <td valign="top" width="35"><span >备注: </span></td> <td valign="top"> <textarea name="desc" id="desc" placeholder="" class="textarea1" onclick="{preventEvent}" rows="2" ></textarea></td> </tr> </table> </div> <p class="user_p_info_css">以上信息仅活动发起人可见，不会透露给其他人</p> <p class="leit1 bordernone color_C8C8CF"> <div id="applyaddbtn">提 交</div> </p> </div> <div class="applysubbtn setback_color_d6eeee"></div> </div> <div class="body_shadow display_none"></div>  <div class="footer_zw clear"></div> <div class="footer-detail" name="btnbox"> <div onclick="{returnPage}"></div> <div class="but1 star_undo button {isActivityStar ? \'star\':\'\'}" onclick="{activityStar}" if="{menu(status1,isinitiator,currentIndex,num).actions.star()}"></div> <div class="recall_but1 button but1" if="{menu(status1,isinitiator,currentIndex,num).actions.recall()}">撤回</div> <div class="button but1" onclick="{editpa}" if="{menu(status1,isinitiator,currentIndex,num).actions.modify()}">修改</div>  <div class="button but1_export" if="{menu(status1,isinitiator,currentIndex,num).actions.export() && sms_send == 0}" onclick="{showSendmail}">导出名单</div> <div class="button but1" onclick="{cancelSend}" if="{menu(status1,isinitiator,currentIndex,num).actions.smsSend() && sms_send == 1}">取消</div> <div class="button butmasstexting" if="{menu(status1,isinitiator,currentIndex,num).actions.massTexting() && sms_send == 0}" onclick="{addSend}">群发短信</div> <a href="#" onclick="javascript:var errorarr = []; errorarr.push(\'请选择要发送的队友\'); util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;" class="send" if="{menu(status1,isinitiator,currentIndex,num).actions.smsSend() && sms_send == 1}"><div class="button but2">发送</div></a>  <div class="immediately button but2 {(menu(status1,isinitiator,currentIndex,num).len==0) ? \'randomnote\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==3) ? \'butmasstexting_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==1) ? \'publish_width1\' : \'\'}" if="{menu(status1,isinitiator,currentIndex,sms_send).actions.application()}">我要报名</div>  <div class="release_but1 button but2" if="{menu(status1,isinitiator,currentIndex,num).actions.modify()}">立即发布</div>  <div class="button randomnote" onclick="{addRandomNote}" if="{menu(status1,isinitiator,currentIndex,num).actions.randomNote()}">添加随记</div>  <div class="button publish {(menu(status1,isinitiator,currentIndex,num).len==2) ? \'publish_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len==3) ? \'publish_width1\' : \'\'} {(menu(status1,isinitiator,currentIndex,num).len == 4) ? \'butmasstexting_width1\' : \'\'}" onclick="{showattention_by_publish}" if="{menu(status1,isinitiator,currentIndex,num).actions.publish()}">发布活动</div>  <div class="interflow_footer" if="{menu(status1,isinitiator,currentIndex,consult).actions.comment()}"> <input type="text" name="interflow_content" id="interflow_content" class="interflow_text1 inter_text_pub" placeholder="说说你的想法..." onclick="{interruptedBubbling}"> <span class="public_btn" onclick="{addComment}">发送</span> </div> <div class="interflow_reply_footer" if="{menu(status1,isinitiator,currentIndex,consult).actions.replyComments()}"> <input type="text" name="interflow_reply" id="interflow_reply" class="reply_text inter_text_pub" placeholder="" onclick="{interruptedBubbling}"> <span class="reply_btn" onclick="{replyComment}">发送</span> </div> </div> </div> <div class="body_shadow_pull display_none" onclick="{hideBodyShadowAll_detail}"></div> <div class="attention_wary border_radius display_none"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/closebtn2.png" class="closebtn2" onclick="{hideBodyShadowAll_detail}"> <p class="t-c inde_font">关注“快乐种子”后，可以接收活动<br>提醒和使用其他更多服务！</p> <div if="{!fromButtonClick}"> <div class="but_left fl t-c" onclick="{openWxhref}">关注，支持一下</div> <div class="but_right fl t-c" onclick="{hideBodyShadowAll_detail}">残忍拒绝:(</div> </div> <button class="atten_but border_radius" onclick="{openWxhref}" if="{fromButtonClick}">立即关注</button> </div> <div class="together display_none together_detail" id="clickXHidden" onclick="{hideBodyShadowAll_detail}"> <img src="/public/images/shareInfo1.png" class="together_img"> </div> <div class="sendmail"> <input type="email" name="mailboxName" value="{contact.email}" id="mailboxName" placeholder="请输入您的邮箱"> <div onclick="{exportmail}">发送到邮箱</div> <div onclick="{hideBodyShadowAll_detail}">取消</div> </div> </div>',"activity-detail { } activity-detail input{ background:transparent; } activity-detail .typetagsul{ overflow: hidden;float: right; } activity-detail .typetagsul li{ float: left;line-height:18px; } activity-detail .imgPreviewer ul li{ float:left; }",function(){function e(){var e,t,i,n=d.guest,o=d.randomNotes;
for(e=0,t=o.length;t>e;e+=1)if(o[e]._id===n){i=o[e],i&&i.pics&&i.pics.length>0&&util.wedgt.imgPreviewer($("#wary"),i.pics,{msg:i.desc});break}}function i(){if(d.randomNotes[0]){var e=d.randomNotes[0];wx.ready(function(){var t,i,n,o,a=e,r=d;if(d.shareinfo_detail(),a&&a.pics[0]&&a.pics[0]){var s={};s.images=[],s.images[0]={meta:a.pics[0].meta,url:a.pics[0].url},t="http://"+util.sharepic(s)}else t="/public/images/pabanner.png";i={title:'我在参加"'+r.item.name+'"活动,给小伙伴直播一下~~~~',desc:a.desc||r.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+r._id+"?guest="+e._id,imgUrl:t},n=Object.create(i),n.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",r.item.name||"",util.convertToValue(r.item.tags.type).join(",")||"",0])},o=Object.create(i),o.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",r.item.name||"",util.convertToValue(r.item.tags.type).join(",")||"",0])},wx.onMenuShareAppMessage(n),wx.onMenuShareTimeline(o)})}}function n(){$(".body_shadow").hide(),$(".apply_wary").hide()}function o(){$("#num").attr("value",1),document.getElementById("desc")&&(document.getElementById("desc").value="")}function a(){for(var e={},t=d.applicationFields,i=0;i<t.length;i++)e[t[i].name]=document.getElementById(t[i].name).value;return e.applicant=d.userId,e.num=document.getElementById("num").value,e}function r(){var e=a(),t=[];return seajs.use(["util"],function(i){for(var n=i.validator(),o=Object.keys(e),a=0;a<o.length;a++)switch(o[a]){case"displayName":n.empty(e.displayName)&&t.push("请输入姓名！");break;case"phone":n.empty(e.phone)&&t.push("请输入电话号码！");break;case"birthday":n.empty(e.birthday)&&t.push("请输入出生日期！");break;case"IDCard":n.empty(e.IDCard)&&t.push("请输入身份证号码！");break;case"company":n.empty(e.company)&&t.push("请输入单位名称！");break;case"position":n.empty(e.position)&&t.push("请输入职位名称！");break;case"business":n.empty(e.business)&&t.push("请输入行业名称！");break;case"school":n.empty(e.school)&&t.push("请输入学校！");break;case"class":n.empty(e.class)&&t.push("请输入班级！");break;case"discipline":n.empty(e.discipline)&&t.push("请输入专业名称！")}t.length>0&&i.tipssuccess(1,t[t.length-1],1)}),t.length>0?(t.pop(),!1):($.ajax({type:"post",url:"/pa/_"+d.id+"?action=new",data:e,dataType:"json",success:function(e){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.APPLICATE+")",d.item.name||"",util.convertToValue(d.item.tags.type).join(",")||"",e.num]),util.tipssuccess(0,"报名成功",1),d.applic=w(e),d.applicShow=d.applic.length?!0:!1;for(var t=0,i=0;i<d.applic.length;i++)t+=d.applic[i].num;d.num=t,d.update(),u.trigger("model-changed","update",d.id,"apps",t),n(),o()},error:function(){util.tipssuccess(1,"报名失败",1)}}),void 0)}function s(e){var t="add"+e,i="minus"+e,n="num";$("#"+t).off("click"),$("#"+t).click(function(){var e=Number($("#"+n).attr("value"));$("#"+n).attr("value",++e),console.info("+="+e)}),$("#"+i).off("click"),$("#"+i).click(function(){var e=Number($("#"+n).attr("value"));e>1?$("#"+n).attr("value",--e):$("#"+n).attr("value",e),console.info("-="+e)})}function c(){$("#interflow_content").blur(),$("#interflow_reply").blur(),$(".com_wary").parent().removeClass("com_wary_bjcolor"),d.consult=0,d.update()}function l(e){$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+d.id+"/"+e,success:function(i){i.status?(seajs.use(["util"],function(t){var i=[];"recall"==e&&(i.push("撤回成功!"),t.tipssuccess(0,i[i.length-1],1),i.pop())}),"recall"==e?f.fetch():t.route("activity/createsuccess/_"+d.id)):seajs.use(["util"],function(t){var i=[];"recall"==e?i.push("撤回失败!"):"publish"==e&&i.push("发布失败!"),t.tipssuccess(1,i[i.length-1],1),i.pop()})},error:function(){seajs.use(["util"],function(t){var i=[];"recall"==e?i.push("撤回失败!"):"publish"==e&&i.push("发布失败!"),t.tipssuccess(1,i[i.length-1],1),i.pop()})}})}var u=this.app=this.opts.app,d=nest.presentable(this);d.env=__app.settings.env.NODE_ENV,d.debug=__app.settings.env.debug,d.menu=function(e,t,i,n){var o=this,a=0,e=util.events._valueToKey(__app.enums.ProductActivityStatus.names)[e],r=__page.browser.Android;o.actions={publish:function(){return("Ready"===e||"Completed"===e||"Acting"==e||"Reviewing"===e||"Draft"==e||"Cancelled"==e&&!t)&&(0==i||2==i)},randomNote:function(){return 3==i},comment:function(){return 1==i&&0==n},replyComments:function(){return 1==i&&1==n},modify:function(){return("Draft"==e||"Cancelled"==e)&&t&&(0==i||2==i)},recall:function(){return"Applying"==e&&t&&0==n&&(0==i||2==i)},application:function(){return"Applying"==e&&(0==i||2==i)&&0==n},star:function(){return("Ready"===e||"Completed"===e||"Acting"==e||"Applying"==e)&&(!t||n>0)&&(0==i||2==i&&!t)},massTexting:function(){return"Draft"!=e&&r&&t&&2==i&&n>0},"export":function(){return"Draft"!=e&&t&&2==i&&n>0},smsSend:function(){return"Draft"!=e&&r&&t&&2==i&&n>0}};for(var s in o.actions)o.actions[s]()&&a++;return{len:a,actions:o.actions}};var p="";p=null==__page.user.displayName?"":"匿名"==__page.user.displayName?"":__page.user.displayName,d.contact={displayName:p},d.dName=p,d.subscribe=1==__page.user.wx_subscribe?!0:!1,d.wxhref=util.getWxhref(),d.fromButtonClick=!1;var f=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),h={sort:{priorityRank:-1,statusrank:1,startTime:1},page:{size:6,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},"tags.type":{},privateFlag:!1}},g=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:h});__page.tenant&&(h.conditions.tenantId=__page.tenant),g.on("fetch",function(e){for(var t=e.length,i=!1,n=0;t>n;n++)if(e[n]._id==d._id){e.splice(n,1),i=!0;break}i||e.pop(),d.update({items:e})}),d.footershow=!0,f._id=this._id=this.opts._id,f.on("fetch",function(t){console.info("activity is fetched"),d.item=t,d.num=_(t),d.highlightsArray=b(t.desc.split("\n")),d.acDesc=util.replaceImgTemplate(t.desc),d.applic=w(t.applications),d.randomNotes=t.randomNotes?t.randomNotes:"",d.cmt=t.comments,d.status1=t.status,d.reviewStatus=t.reviewStatus,d.applicShow=d.applic.length?!0:!1,d.randomNoteShow=d.randomNotes.length?!0:!1,d.cmtShow=d.cmt.length?!0:!1,d.id=t._id,d._comments=t.comments,v(),d.userId=window.__page.user.id,d.replyTo="",d.replyToName="",d.initiator=t.initiator,console.log("--------------------------"),console.log(d.item.userforHeadUrl.headImgUrl),d.picshow=util.calcImageUrl(d.item),d.startTime=util.dateFormat(new Date(t.startTime),"yyyy/MM/dd"),d.startTime_Week=util.getDateWeek(new Date(t.startTime)),d.endTime=util.dateFormat(new Date(t.endTime),"yyyy/MM/dd"),d.endTime_Week=util.getDateWeek(new Date(t.endTime)),d.closingTime=util.dateFormat(new Date(t.closingTime),"yyyy/MM/dd"),d.closingTime_Week=util.getDateWeek(new Date(t.closingTime)),d.timeString=d.endTime==d.startTime?d.startTime+" "+d.startTime_Week:d.startTime+" "+d.startTime_Week+" - "+d.endTime+" "+d.endTime_Week,d.closingTimeString=d.closingTime+" "+d.closingTime_Week,d.likes=t.meta.likes,d.stars=t.meta.stars,d.applicationFields=t.applicationFields,d.isinitiator=d.userId==d.initiator?!0:!1,d.currentIndex=2,d.consult=0,d.sms_send=0,d.isActivityLike=__page.user.meta.pa.likes[d.id],d.isActivityStar=__page.user.meta.pa.stars[d.id],d.statusName="r"==d.reviewStatus?__app.enums.ReviewStatus.values[d.reviewStatus]:__app.enums.ProductActivityStatus.values[d.status1],d.selectbut=!0,d.initiatorNameinitiatorContact=d.item.initiatorName+" "+d.item.initiatorContact,d.initiatorHeadUrl=d.item.userforHeadUrl.headImgUrl?d.item.userforHeadUrl.headImgUrl:"/public/images/head.png",d.update(),d.trigger("ready",!0),d.trigger("view-route-to"),$("#initiatorNameinitiatorContacts").text(d.initiatorNameinitiatorContact),x(),T(),k(),"true"===d.shareflag&&i(),d.guest?(d.currentIndex=3,d.update(),"true"!=d.guest&&e()):$(window).scrollTop(0),showattention_check(),console.log("cookie "+util.getCookie("applicants")),n()}),d.fieldIfExist=function(e){for(var t=!1,i=0,n=d.applicationFields.length;n>i;i++)if(d.applicationFields[i].name==e){t=!0;break}return t},this.editpa=function(){t.route("activity/edit/_"+d.id)}.bind(this),this.exportmail=function(){var e=this._id,t=$("#mailboxName").val().trim();console.log(t);var i=d.item.name,n=/^.+@.+\..{2,3}$/;n.test(t)?$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+e+"/applications?action=mail&mailbox="+t+"&name="+i,success:function(){console.log("success, prompt"),seajs.use(["util"],function(e){var t=[];t.push("邮件已发送！"),e.tipssuccess(0,t[t.length-1],1),t.pop()}),hideBodyShadowAll_detail()},error:function(){console.log("error"),seajs.use(["util"],function(e){var t=[];t.push("邮件发送失败！"),e.tipssuccess(1,t[t.length-1],1),t.pop()})}}):seajs.use(["util"],function(e){var t=[];t.push("请输入正确邮箱地址"),e.tipssuccess(1,t[t.length-1],1),t.pop()})}.bind(this);var v=function(){var e=d._comments.length;d.comments=[];for(var t=0;e>t;t++)"r"!=d._comments[t].reviewStatus&&d.comments.push(d._comments[t])},m=function(e){this.trigger("ready",!1),d.shareflag=e.share,d.guest=e.guest||null,this._id=e.id||this._id,f.set("_id",this._id),f.fetch({action:"open"}),g.fetch()}.bind(d),y=function(){this.trigger("ready",!1),f.fetch(this._id,{action:"refresh"})}.bind(d);this.on("mount",function(){console.info("tag activity is mounted")}),this.on("leave",function(){util.wedgt.imgPreviewer.refresh($("#wary"))}),this.on("open",function(e){console.info("tag activity is opening"),f&&f.fetched()&&k(),m(e)}),this.on("leave",function(){d.mask=!0,d.update()}),this.on("reenter",function(){d.mask=!1,d.update()}),this.on("refresh",function(){console.info("tag activity is refreshing"),y()}),this.on("show",function(e){e&&__page.holder().setTitle(d.item.name),$(window).scrollTop("0px")}),this.refresh=function(){y()}.bind(this);var _=function(e){for(var t=0,i=0;i<e.applications.length;i++)t+=e.applications[i].num;return t},b=function(e){for(var t=0;t<e.length;t++)e[t]&&(e[t]=e[t].replace(/ /g,"&nbsp;"));return e},w=function(e){for(var t=0,i=e.length;i>t;t++)e[t].birthday&&(e[t].birthday=util.dateFormat(new Date(e[t].birthday),"yyyy/MM/dd")),e[t].gender&&(e[t].gender="0"==e[t].gender?"男":"女");return e},x=function(){$(".img_home").click(function(){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set")}),$(".home_close").click(function(){$(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1")}),s(1),$(".recall_but1").off("click").on("click",function(){l("recall")}),$(".release_but1").off("click").on("click",function(){l("publish")}),$(".immediately").off("click").on("click",function(){d.fromButtonClick=!0,d.update(),d.subscribe?(A(),signUp()):showattention_detail()}),$(".body_shadow").off("click").on("click",function(){}),$("#applyaddbtn").off("click"),$("#applyaddbtn").on("click",function(){r()})},k=function(){var e=util.sharepic(d.item);wx.ready(function(){wx.onMenuShareAppMessage({title:d.item.name,desc:d.item.desc,link:__page.holder().getBaseUrl()+"/index#activity/_"+f._id,imgUrl:e,type:"",dataUrl:"",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",d.item.name||"",util.convertToValue(d.item.tags.type).join(",")||"",0])},cancel:function(){}}),wx.onMenuShareTimeline({title:d.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+f._id,imgUrl:e,success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",d.item.name||"",util.convertToValue(d.item.tags.type).join(",")||"",1])},cancel:function(){}})})};seajs.use("util",function(e){this.operationNav=function(e){d.currentIndex=$(e.target).attr("alt"),d.update()}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(100):$(".footer_navs_wary").slideDown(100),e.stopPropagation()}.bind(this),this.showattention_by_publish=function(){d.fromButtonClick=!0,d.subscribe?t.route("activity/new"):showattention_detail()}.bind(this),this.showattention_detail=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=$(".attention_wary").height()-100,o=t>i?t:i,a=e+t/2-n/2-100;$(".body_shadow_pull").show().css("height",o+"px").css("z-index","699"),$(".attention_wary").show().css("top",a+"px")}.bind(this),this.showattention_check=function(){d.subscribe||void 0==e.getCookie("showAttentionPrompt")&&(showattention_detail(),e.setCookie("showAttentionPrompt","true",1))}.bind(this);var i=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".together_detail").show().css("top",e+"px").css("z-index","700"),$(".body_shadow_pull").show().css("height",n+"px").css("z-index","699")};d.shareinfo_detail=i,this.hideBodyShadowAll_detail=function(){$(".body_shadow_pull").hide(),$(".attention_wary").hide(),$(".together_detail").hide(),$(".sendmail").hide()}.bind(this),this.openWxhref=function(){$(".body_shadow_pull").hide(),$(".attention_wary").hide(),e.setCookie("attentionUrl","activity/_"+d.id,1),window.location=d.wxhref}.bind(this),this.preventEvent=function(e){e.stopPropagation()}.bind(this),this.activityLive=function(){$.ajax({type:"GET",url:__app.settings.api.url+"/pa/_"+d.id+"/like",success:function(t){t.status&&(t.result>d.likes?(_czc.push(["_trackEvent",e.getDc().PA.NAME+"("+e.getDc().PA.ACTION.COLLECT+")",d.item.name||"",e.convertToValue(d.item.tags.type).join(",")||"",t.result]),d.isActivityLike=!0,__page.user.meta.pa.likes[d.id]=(new Date).getTime()):(d.isActivityLike=!1,delete __page.user.meta.pa.likes[d.id]),d.likes=t.result,u.trigger("model-changed","update",d.id,"likes",d.likes),d.update())}})}.bind(this),this.activityStar=function(){$.ajax({type:"GET",url:__app.settings.api.url+"/pa/_"+d.id+"/star",success:function(t){if(t.status){var i=[];t.result>d.stars?(_czc.push(["_trackEvent",e.getDc().PA.NAME+"("+e.getDc().PA.ACTION.LIKES+")",d.item.name||"",e.convertToValue(d.item.tags.type).join(",")||"",t.result]),d.isActivityStar=!0,i.push("收藏成功！"),e.tipssuccess(0,i[i.length-1],1),__page.user.meta.pa.stars[d.id]=(new Date).getTime()):(d.isActivityStar=!1,delete __page.user.meta.pa.stars[d.id]),d.stars=t.result,d.update()}}})}.bind(this),this.signUp=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=$(".apply_wary").height()-100,o=$(".apply_wary").height(),a=t>i?t:i,r=e+t/2-n/2-20;o>t&&(r=10,$(window).scrollTop("0px")),$(".body_shadow").show().css("height",a+"px"),$(".body_shadow_pull").hide(),$(".attention_wary").hide(),$(".apply_wary").show().css("top",r+"px")}.bind(this),this.sexSelect=function(e){$(".sex").removeClass("sex_select"),$("#gender").val($(e.target).attr("value")),$(e.target).addClass("sex_select")}.bind(this),this.closeApplyLayer=function(){n(),o()}.bind(this)}),this.addRandomNote=function(){util.setCookie("detailId",d.id,30),t.route("activity/add-randomnotes")}.bind(this),this.returnPage=function(){t.route(u.history.pop())}.bind(this),this.showSendmail=function(){A();var e=$(window).height(),t=$("body").height(),i=e>t?e:t;$(".body_shadow_pull").show().css("height",i+"px").css("z-index","699"),$(".sendmail").show()}.bind(this);var T=function(){$("#detail_document").off("click").on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover"),c()})};this._resetFooterStyle=function(){c()}.bind(this),this._MassTextingURL=function(){for(var e="",t=$(".add_info .add_info_checked"),i=$(".send"),n=0,o=t.length;o>n;n++){var a=t[n];e=0==n?$(a).attr("phone"):e+";"+$(a).attr("phone")}""!=e?(i.attr("href","sms:"+e),i.attr("onclick","")):(i.attr("href","#"),i.attr("onclick","javascript:var errorarr = []; errorarr.push('请选择要发送的队友');  util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;"))}.bind(this),this.allSelect=function(){d.selectbut?($(".add_info_checkbox_div1").addClass("add_info_checked"),d.selectbut=!1):($(".add_info_checkbox_div1").removeClass("add_info_checked"),d.selectbut=!0),d.update(),this._MassTextingURL()}.bind(this),this.cancelSend=function(){var e=$(".send");d.sms_send=0,$(".add_info_checkbox_div1").removeClass("add_info_checked"),d.selectbut=!0,d.update(),e.attr("href","#"),e.attr("onclick","javascript:var errorarr = []; errorarr.push('请选择要发送的队友');  util.tipssuccess(0, errorarr[errorarr.length-1], 1);return false;")}.bind(this),this.addSend=function(){d.sms_send=1,d.update()}.bind(this),this.interruptedBubbling=function(e){e.stopPropagation()}.bind(this),this.addComment=function(){var e={comment:"",commenter:"",commenterName:"",replyTo:"",replyToName:""};e.comment=document.getElementById("interflow_content").value,e.commenter=d.userId;var t=[];return seajs.use(["util"],function(i){var n=i.validator();n.empty(e.comment)&&t.push("请输入评论内容！"),t.length>0&&i.tipssuccess(1,t[t.length-1],1)}),t.length>0?(t.pop(),!1):($.ajax({type:"post",url:__app.settings.api.url+"/pa/_"+d.id+"/comment",data:e,dataType:"json",success:function(e){$("#interflow_content").val(""),$("#interflow_content").attr("placeholder","说说你的想法..."),d.comments=e.result,d.cmtShow=d.comments.length?!0:!1,d.update()},error:function(){util.tipssuccess(1,"评论失败",1)}}),n(),!0)}.bind(this),this.replyComment=function(){var e={comment:"",commenter:"",commenterName:"",replyTo:"",replyToName:""};e.comment=document.getElementById("interflow_reply").value;var t=[];if(seajs.use(["util"],function(i){var n=i.validator();n.empty(e.comment)&&t.push("请输入回复内容！"),t.length>0&&i.tipssuccess(1,t[t.length-1],1)}),t.length>0)return t.pop(),!1;var i=":"+e.comment;return e.comment=i,e.commenter=d.userId,e.replyTo=d.replyTo,e.replyToName=d.replyToName,$.ajax({type:"post",url:__app.settings.api.url+"/pa/_"+d.id+"/comment",data:e,dataType:"json",success:function(e){seajs.use(["util"],function(){$("#interflow_content").val(""),$("#interflow_content").attr("placeholder","说说你的想法...")}),d.comments=e.result,d.cmtShow=d.comments.length?!0:!1,d.update()},error:function(){util.tipssuccess(1,"回复失败",1)}}),!0}.bind(this);var C=d.newdate=new Date(__page.servertime);d.on("toabsolute",function(){d.btnbox.style.position="absolute",d.btnbox.style.bottom="0px"}),d.on("tofixed",function(){d.btnbox.style.position="fixed",d.btnbox.style.bottom="0px"});var N=navigator.userAgent;N.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.brithdayClick=function(){d.trigger("toabsolute")}.bind(this),this.birthdayBlur=function(){d.trigger("tofixed")}.bind(this)),this.birthdayChange=function(){var e=document.querySelector("#birthday"),t=document.querySelector("#birthdayTxt");return""==e.value&&util.getBrowser().android===!1?(e.value=C,t.value=util.dateFormat(C,"yyyy/MM/dd"),!1):(t.value=util.dateFormat(new Date(e.value),"yyyy/MM/dd"),void 0)}.bind(this),d.showDesc=function(e){$("#ac_detail").html(e)};var A=function(){$.ajax({type:"get",url:__app.settings.api.url+"/user/_"+__page.user.id+"/contact",dataType:"json",success:function(e){if(e.result&&e.result.contact&&(d.contact=e.result.contact,d.update(),document.querySelector("#birthday")&&d.contact.birthday)){var t=document.querySelector("#birthday"),i=document.querySelector("#birthdayTxt");t.value=util.dateFormat(new Date(d.contact.birthday),"yyyy-MM-dd"),i.value=util.dateFormat(new Date(d.contact.birthday),"yyyy-MM-dd")}},error:function(){}})}}),t.tag("activity-edit",' <div id="addactbody" if="{!hidden}"> <div class="statement_wary"> <p>提醒：活动内容包含违法、反动信息或者冒用他人/组织的名 义发布活动，平台有权删除其活动并提交公安机关处理</p> <img riot-src="/{env}/images/closebtn3.png" class="closebtn3" onclick="{closeStatement}"> </div> <form id="actform"> <div class="addactcontent"> <section> <div class="secleft"><img riot-src="/{env}/images/new1.png"></div> <div class="secright"> <div></div> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="name" value="" placeholder=""> </div> </section> <section class="pasection2x pasection3x"> <div class="secleft"><p class="p1"><img riot-src="/{env}/images/new2.png"></p> <p class="p2" onclick="{showSelectType}">类型标签</p></div> <div class="secright"> <div class="new_act_type_div"></div> <ul class="activity_new_type_ul"> <li each="{name,i in typetags}" data="{name}" class="{tagdefault:true,tagselected:parent.currtypetags.indexOf(name)>=0} {(i==3||i==7)?\'no_m_left\':\'\'}" onclick="{parent.selecttags}"> <i>{__app.enums.TypeTags.values[name]}</i> </li> </ul> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new3.png"></div> <div class="secright"> <div class="fl div_left">活动时间</div> <div class="fl div_right"> <div id="startTimebtn" class="datediv"> <input type="text" id="startTimetxt" value="00/00" readonly="readonly"> <input id="startTime" onchange="{startchange}" onclick="{dateclick}" onblur="{dateblur}" name="startTime" style="display: inline-block;margin-top:0px;" type="date"> </div> <i style="display:block;position:absolute;top:20px;left:43%;width:20px;height:1px;border-top:1px solid #ccc"></i> <div id="endTimebtn" class="datedivright"> <input type="text" id="endTimetxt" value="00/00" readonly="readonly"> <input id="endTime" onchange="{endchange}" onclick="{dateclick}" onblur="{dateblur}" name="endTime" style="display: inline-block;margin-top:0px" type="date"> </div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new4.png"></div> <div class="secright"> <div></div> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="place" value="" placeholder=""> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new5.png"></div> <div class="secright"> <div class="fl div_left">发起人</div> <div class="fl div_right"> <div style="width:30%;float: left;line-height: 35px;"><input type="text" onfocus="{inputonfocus}" style="font-size:14px;" onblur="{inputonblur}" name="initiatorName" placeholder="姓名"></div> <div style="width:70%;float:right;position:relative;line-height: 35px;"><span class="borderleft"></span><input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" style="font-size:14px;" name="initiatorContact" placeholder="联系方式"></div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new6.png"></div> <div class="secright"> <div class="fl div_left">报名截止</div> <div class="fl div_right"> <div class="datediv datediv360"> <input id="closingTimebtn" type="text" attr="closingTime" value="00/00" readonly="readonly"> <input id="closingTime" onchange="{closingchange}" onclick="{dateclick}" onblur="{dateblur}" name="closingTime" style="display: inline-block;" type="date"> </div> </div> </div> </section> </div> <div style="margin-top: 10px;margin-bottom: 8px;border-top:8px solid #eee;"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div> <div id="editor"></div>               </div> <div class="banner" onclick="{uploadimg}" if="{test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img style="width: 100%;" riot-src="{picshow}" class="imgsetwidth"> </div> <div class="banner" onclick="{uploadimg}" if="{!test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img id="banner" style="width: 100%;" riot-src="{imgsrc}"> </div> <div class="more_options" onclick="{moreOptions}"> <div class="activity_title"> <span></span> 更多选项 </div> </div> <div class="options" > <div class="new_hint_div1_div2"> <p>只允许被邀请的朋友参与</p> <div class="but_wary" id="but_wary"> <p id="but_radius"></p> </div> </div> <div class="user_options"> <div class="new_hint_div1_div3"> <p>报名填写项</p> </div> <ul onclick="{userOptions}"> <li each="{name,i in appFieldNameArr}" data="{name}" class="{parent.fieldIfSel(name) ? \'xz\' : \'\'}">{__page.appFields[name].title}</li> </ul> </div> </div> <div class="clear"></div> <div class="new_hint1" style="margin-top:0px;"> <div class="new_hint_div1"> <div class="new_hint_div1_div1"> <div> <p class="new_hint_p1">提示:</p> <p class="new_hint_p2">请确认活动内容后再发布!因为一旦发布并且有用户报名后,活动就不允许取消和修改了。</p> </div> </div> <div class="clear"></div> <div class="serv t-c"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env}/images/1_19.png"> 客服电话：400-680-9072</p> </div> </div> <div class="footer_zw"></div>       <div class="footer-detail" name="btnbox"> <div onclick="{homepage}"></div> <div class="button but1" style="width:27%;" onclick="{submitdraft}">保存草稿</div> <div class="button but2" style="width:45%;" onclick="{publishpa}">立即发布</div> </div> <div class="footer_shadow" id="btnbox2"></div> </div> </form> </div>',function(){var e=nest.presentable(this);e.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+e.env);var i={localIds:[],fileNames:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[],this.fileNames=[]}},n=new util.wedgt.WcEditor({modules:{Bold:!0,Color:!0,Img:!0,TextAlign:!0},container:"editor"}),o=[],a=[],r=[],s={localIds:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[]}},c=this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),l=this.imgmodel=nest.modelable({},{url:__app.settings.api.url+"/img/"}),u=this.startTimetxt,d=this.startTime,p=this.endTimetxt,f=this.endTime,h=this.closingTimebtn,g=this.closingTime,v=this.name,m=this.place,y=__page.user.id,_=this.initiatorName,b=this.initiatorContact,w=(this.actform,this.btnbox),x=new Date(__page.servertime);e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.typetags=Object.keys(__app.enums.TypeTags.values),e.actobj={txtareastr:"【活动说明】</br></br>【活动日程】</br>【费用说明】自行消费</br>【集合时间】</br>【集合地点】</br>【交通方式】</br>【报名说明】</br>1、直接系统报名，报名名单中显示用户名字即报名成功；</br>2、本活动不限名额。/本活动限x人，以报名先后确认名额。</br>【温馨提示】</br>1、</br>2、</br>",initPage:function(t){u.value=t&&t.startTime&&util.dateFormat(new Date(t.startTime),"MM/dd")||util.dateFormat(x,"MM/dd"),p.value=t&&t.endTime&&util.dateFormat(new Date(t.endTime),"MM/dd")||util.dateFormat(x,"MM/dd"),h.value=t&&t.closingTime&&util.dateFormat(new Date(t.closingTime),"MM/dd")||util.dateFormat(x,"MM/dd"),v.value=t&&t.name||"",d.value=t&&t.startTime&&util.dateFormat(new Date(t.startTime),"yyyy-MM-dd")||util.dateFormat(x,"yyyy-MM-dd"),f.value=t&&t.endTime&&util.dateFormat(new Date(t.endTime),"yyyy-MM-dd")||util.dateFormat(x,"yyyy-MM-dd"),g.value=t&&t.closingTime&&util.dateFormat(new Date(t.closingTime),"yyyy-MM-dd")||util.dateFormat(x,"yyyy-MM-dd"),m.value=t&&t.place||"",y=__page.user.id,_.value=t&&t.initiatorName||"",b.value=t&&t.initiatorContact||"",e.currtypetags=t&&t.tags.type||[],e.applicationFields=t&&t.applicationFields||[],e.acDesc=util.replaceImgTemplate(t.desc),a=t.introImgs},getJsondata:function(){var t={name:v.value.trim(),startTime:d.value||x,endTime:f.value||x,place:m.value.trim(),initiator:__page.user.id,initiatorName:_.value.trim(),initiatorContact:b.value.trim(),closingTime:g.value.trim()||x,pics:[],desc:n.getContentHtml()&&util.events.htmlToTemplate(n.getContentHtml())||e.actobj.txtareastr,applicationFields:j()};return t.tags={region:"",custom:"",type:e.currtypetags||[]},t},validatefield:function(t){var i=[];return k.empty(t.name)&&i.push("活动名称不能为空"),e.currtypetags.length<=0&&i.push("请选择类型"),k.empty(t.place)&&i.push("活动地点不能为空"),k.empty(t.initiatorName)&&i.push("请填写发起人姓名"),k.empty(t.initiatorContact)&&i.push("请填写发起人联系方式"),util.compareDate(util.dateFormat(x,"yyyy-MM-dd"),d.value)&&i.push("开始时间不能早于今天"),util.compareDate(d.value,f.value)&&i.push("结束时间不能早于开始时间"),util.compareDate(g.value,d.value)&&i.push("截止时间不能晚于开始时间"),i},submitform:function(t){var l=this;e.acDesc=n.getContentHtml(),e.update(),i.refresh(),o=[],r=[];var u=$(util.events._wrapdiv(n.getContentHtml()));u.find("img").each(function(e){if($(this).attr("localid"))i.localIds.push($(this).attr("localid")),i.fileNames.push($(this).attr("fileName"));else for(var t=$(this).attr("fileName"),e=0,n=a.length;n>e;e++)if(a[e].name=t){r.push(a[e]);break}}),i.localIds.length>0?l._upload4Wx(i.localIds,i.serverIds,function(e){if(e)return s.refresh(),i.refresh(),r=[],util.tipssuccess(1,"上传图片失败",0);for(var n,a=0,u=i.localIds.length;u>a;a++)n={localId:i.localIds[a],name:i.fileNames[a],mediaId:i.serverIds[a]},o.push(n);$.ajax({type:"post",url:__app.settings.api.url+"/img/images",data:{imgArr:o}}).success(function(e){for(var i,n=e.result,o=0,a=n.length;a>o;o++)i={id:n[o]._id,name:n[o].name,mediaId:n[o].mediaId,localId:n[o].localId},r.push(i);c.set("introImgs",r),l._uploadPaObj(t)})}):l._uploadPaObj(t)},_uploadPaObj:function(t){s.localIds.length>0?wx.uploadImage({localId:s.localIds[0],success:function(n){var o={name:util.getFileName(),mediaId:n.serverId};l.set("myobj",o),l.save(),l.off("save").on("save",function(o){var a=[{id:o._id,mediaId:n.serverId,name:o.name}];t.images=a,t.pics[0]="/public/images/pabanner.png",t&&t.status&&"d"==t.status?c.set("query",{action:"draft"}):(s.refresh(),e.update(),c.set("query",{action:"publish"})),t&&t.status&&delete t.status,c.set("myobj",t),c.set("privateFlag",N),c.save(),s.refresh(),i.refresh(),r=[]})},fail:function(e){console.error(JSON.stringify(e))}}):(t&&t.status&&"d"==t.status?c.set("query",{action:"draft"}):c.set("query",{action:"publish"}),t&&t.status&&delete t.status,t.pics=["/public/images/pabanner.png"],c.set("myobj",t),c.set("privateFlag",N),c.save(),s.refresh(),i.refresh(),r=[])},_upload4Wx:function(e,t,i){function n(){wx.uploadImage({localId:e[a],success:function(e){return t.push(e.serverId),a++,o-1>=a?(n(),void 0):i?i():void 0},fail:function(e){i(JSON.stringify(e)),console.error(JSON.stringify(e))}})}var o=e.length,a=0;n()}};var k=util.validator();c.on("save",function(e){"publish"==c.query.action&&t.route("activity/createsuccess/_"+e._id),"draft"==c.query.action&&(c&&c.query&&delete c.query,util.tipssuccess(0,"保存成功"))}),c.on("save-error",function(){util.tipssuccess(1,"保存失败")}),c.on("error",function(){util.tipssuccess(1,"保存失败")}),this.selecttags=function(t){var i=t.item,n=e.currtypetags.indexOf(i.name);return n>=0?e.currtypetags.splice(n,1):e.currtypetags.push(i.name)}.bind(this),this.startchange=function(){return""==d.value&&util.getBrowser().android===!1?(d.value=x,u.value=util.dateFormat(x,"MM/dd"),!1):(u.value=util.dateFormatstr(d.value),(!f||f.value<d.value)&&(f.value=d.value,e.endchange()),(!g||g.value>d.value)&&(g.value=d.value,e.closingchange()),void 0)}.bind(this),this.endchange=function(){return""==f.value&&util.getBrowser().android===!1?(f.value=x,p.value=util.dateFormat(x,"MM/dd"),!1):(p.value=util.dateFormatstr(f.value),void 0)}.bind(this),this.closingchange=function(){return""==g.value&&util.getBrowser().android===!1?(g.value=x,h.value=util.dateFormat(x,"MM/dd"),!1):(h.value=util.dateFormatstr(g.value),void 0)}.bind(this),this.publishpa=function(){var t=e.actobj.getJsondata();console.log("initiator="+t.initiator),t.status="o";var i=e.actobj.validatefield(t);return i.length>0?(util.tipssuccess(1,i[0],1),void 0):(e.actobj.submitform(t),void 0)}.bind(this),this.submitdraft=function(){var t=e.actobj.getJsondata();t.status="d";var i=e.actobj.validatefield(t);return i.length>0?(util.tipssuccess(1,i[0],1),void 0):(e.actobj.submitform(t),void 0)}.bind(this),this.moreOptions=function(){$(".options").slideToggle(),$(".more_options").toggleClass("more_options_zk")}.bind(this);var T,C,N=!1,A=function(){var e=document.getElementById("but_wary");e.addEventListener("touchstart",I,!1),e.addEventListener("touchmove",S,!1),e.addEventListener("touchend",D,!1)},I=function(e){e.preventDefault();var e=e||window.event;T=e.touches[0].pageX},S=function(e){e.preventDefault();var e=e||window.event;C=e.touches[0].pageX},D=function(){C>T?($(".but_wary").addClass("but_right"),$(".but_wary").removeClass("but_left"),N=!0):T>C&&($(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right"),N=!1),T=0,C=0};e.on("toabsolute",function(){w.style.position="absolute",w.style.bottom="0px",e.btnbox2.style.position="absolute",e.btnbox2.style.bottom="0px"}),e.on("tofixed",function(){w.style.position="fixed",w.style.bottom="0px",e.btnbox2.style.position="fixed",e.btnbox2.style.bottom="0px"
}),this.inputonfocus=function(){e.trigger("toabsolute")}.bind(this),this.inputonblur=function(){e.trigger("tofixed")}.bind(this),this.descfocus=function(){e.trigger("toabsolute")}.bind(this),this.descblur=function(){e.trigger("tofixed")}.bind(this);var E=navigator.userAgent;E.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){e.trigger("toabsolute")}.bind(this),this.dateblur=function(){e.trigger("tofixed")}.bind(this)),this.showSelectType=function(){var e=$(".pasection2x").attr("class");e.indexOf("animation_pasection3x")>0?$(".pasection2x").removeClass("animation_pasection3x").addClass("animation_pasection4x"):$(".pasection2x").removeClass("animation_pasection4x").addClass("animation_pasection3x")}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this);var F=function(t){this.trigger("ready",!1),c.set("_id",t||e.opts._id),c.fetch({action:"open"})}.bind(e);c.on("fetch",function(t){e.fecthjson=t,e.actobj.initPage(e.fecthjson),e.picshow=util.calcImageUrl(e.fecthjson),e.trigger("ready",!0),e.trigger("view-route-to"),n.init(),n.reset(),M(e.acDesc),$("#contentdiv").on("focus",function(){e.trigger("toabsolute")}),$("#contentdiv").on("blur",function(){e.trigger("tofixed")}),n.off("chooseImgBegin").on("chooseImgBegin",function(){wx.chooseImage({success:function(e){n.trigger("chooseImgComplete",e.localIds[0])}})}),e.update(),A()}),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(t){console.info("tag activities is opening"),F(t),e.test=!0,wx.ready(function(){e.uploadimg=function(){wx.chooseImage({success:function(t){s.refresh(),s.localIds[0]=t.localIds[0],e.test=!1,e.update();var i=$("#banner");i.attr("src",t.localIds[0])}})},e.update()})});var j=function(){for(var t=[],i=$(".user_options .xz"),n=0;n<i.length;n++)t.push(e.appFields[$(i[n]).attr("data")]);return t};this.userOptions=function(e){"姓名"!=e.target.outerText&&"手机"!=e.target.outerText&&$(e.target).toggleClass("xz")}.bind(this),e.fieldIfSel=function(t){for(var i=!1,n=0,o=e.applicationFields.length;o>n;n++)if(e.applicationFields[n].name==t){i=!0;break}return i},this.homepage=function(){t.route("activity/index")}.bind(this);var M=function(e){$("#contentdiv").html(e)}}),t.tag("activity-index",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div if="{!mask}" id="scroll_body"> <link href="../web/css/iscroll.css" rel="stylesheet"> <div class="list_more_nav_wz"></div> <div class="list_more_nav"> <div class="nav_div1" onclick="{clickIndexNav}" alt="label_screening" id="label_screeningId">类型筛选</div> <div class="nav_div2" onclick="{clickIndexNav}" alt="time_screen" id="sel_date">时间筛选</div> <div class="nav_div3" onclick="{clickIndexNav}" alt="sort" id="sel_sort">排序</div> <a href="#activity/search"><img riot-src="/{env}/images/search_bj.png"></a> <div class="select_info select_pub time_screen"> <ul class="ul_sel_date" alt="sel_date"> <li onclick="{select_type}" class="xz" value="0">全部</li> <li onclick="{select_type}" value="1">最近三天</li> <li onclick="{select_type}" value="2">本周</li> <li onclick="{select_type}" value="3">下周</li> <li onclick="{select_type}" value="4">本月</li> <li onclick="{select_type}" value="5">下月</li> </ul> </div> <div class="select_info select_pub sort"> <ul class="ul_sel_sort" alt="sel_sort"> <li onclick="{select_type}" class="xz" value="acquiesce">默认（开始时间）</li> <li onclick="{select_type}" value="newest">最新（创建时间）</li> <li onclick="{select_type}" value="popularity">人气</li> </ul> </div> <div class="label_screening select_pub"> <ul> <li onclick="{select_type}" value="fa">亲子少儿</li> <li onclick="{select_type}" value="of">户外健身</li> <li onclick="{select_type}" value="tn">周边游</li> <li onclick="{select_type}" value="pt">聚会派对</li> <li onclick="{select_type}" value="ex">展览展会</li> <li onclick="{select_type}" value="tb">团队建设</li> <li onclick="{select_type}" value="tr">旅行</li> <li onclick="{select_type}" value="oa">其他活动</li> </ul> <div class="clear"></div> <div class="label_button"> <div class="label_button_div"> <button class="confirm_but1 border_radius fl" onclick="{setAllType}"><img riot-src="/{env}/images/but_s1.png" class="vertical"> <span class="vertical" >全部</span></button> <button class="confirm_but2 border_radius fr" onclick="{typeSelectObj}"><img riot-src="/{env}/images/but_s2.png" class="vertical"> <span class="vertical" >筛选</span></button> </div> </div> </div> </div> <div class="clear">&nbsp</div> <div id="pullDown" class="loading" style="display: none"> <span class="pullDownIcon"></span><span class="pullDownLabel">正在刷新列表...</span> </div> <div class="recomm_wary activity_wary"> <activity-item class="ac_item" each="{items}" curritem="{this}"></activity-item> <activity-item class="ac_item" each="{appended_list}" curritem="{this}"></activity-item> </div> <div id="pullUp"> <span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多活动...</span> </div>  <wechat-menu if="{!subscribe}"></wechat-menu> <div id="noResult" style="display: none;text-align:center;padding-top:80px;font-size:14px;color:#666;"> <p><img riot-src="/{env}/images/c_02.png" style="width: 35%"></p> <p class="m_top10">抱歉，没有找到相关活动</p> </div>  <div class="footer_zw"></div> <div class="footer-index setleft"> <div> <a href="#activity/index"><i class="current"><img riot-src="/{env}/images/footer_nav_activity2.png"><br>活动</i></a> <a href="#travel/index"><i><img riot-src="/{env}/images/footer_nav_travel1.png"><br>目的地</i></a> <a href="#mine/index"><i><img riot-src="/{env}/images/footer_nav_mine1.png"><br>我的</i></a> </div> <div> <i onclick="{showattention}">发布活动</i> </div>      </div> <div class="body_shadow display_none" onclick="{hideBodyShadowAll}"></div> <div class="attention_wary border_radius display_none"> <img riot-src="/{env}/images/closebtn2.png" class="closebtn2" onclick="{hideBodyShadowAll}"> <p class="t-c inde_font">关注“快乐种子”后，可以接收活动<br>提醒和使用其他更多服务！</p> <div if="{!fromButtonClick}"> <div class="but_left fl t-c" onclick="{openWxhref}">关注，支持一下</div> <div class="but_right fl t-c" onclick="{hideBodyShadowAll}">残忍拒绝:(</div> </div> <button class="atten_but border_radius" onclick="{openWxhref}" if="{fromButtonClick}">立即关注</button> </div> </div> </div>',function(){function e(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}function i(e){void 0!=e&&(e.forEach(function(e){o.items.push(e)}),console.log("self.items "+o.items.length))}function n(e){console.log(e),0==e.length?document.getElementById("pullUp").style.display="none":(document.getElementById("pullUp").style.display="block",c.className="",c.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}this.app=this.opts.app;var o=nest.presentable(this);o.env="production"==__app.settings.env.NODE_ENV?"public":"web",o.subscribe=1==__page.user.wx_subscribe?!0:!1,o.wxhref=util.getWxhref(),o.fromButtonClick=!1,console.log("env="+o.env);var a={sort:{priorityRank:-1,statusrank:1,startTime:1},page:{size:10,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},"tags.type":{},privateFlag:!1}};__page.tenant&&(a.conditions.tenantId=__page.tenant);var r,s,c,l=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:a}),u=0,d=0,p=!1,f=!0;l.on("fetch",function(e){console.info("activities is fetched"),o.items=e,f=o.items.length%10==0?!0:!1,o.update(),o.trigger("ready",!0),o.trigger("view-route-to"),c=document.getElementById("pullUp"),s=$("#noResult"),r=document.getElementById("scroll_body"),n(e),0!=e.length?(e.length>3?$("#pullUp").show():$("#pullUp").hide(),s.hide()):($("#pullUp").hide(),s.show()),y(),m(),_(),showAttentionPrompt(),$(window).scrollTop("0px"),l.trigger("fetched")}),l.on("fetched",function(){p=!0}),l.on("append",function(e){console.info("activities is append"),i(o.appended_list),o.appended_list=e,console.log(o.appended_list),f=0==o.appended_list.length?!1:o.appended_list.length%10==0?!0:!1,o.update({appended_list:e}),n(e),o.trigger("ready",!0),m()});var h=function(e){this.trigger("ready",!1),this.filter=e||this.filter,void 0==l.fetched()||o.items&&0==o.items.length?l.fetch({filter:this.filter}):(o.update(),o.trigger("ready",!0),o.trigger("view-route-to"))}.bind(o),g=function(){o.item=[],o.appended_list=[],a.page.size=10,a.page.no=1,this.trigger("ready",!1),setTimeout(function(){$("#pullDown").hide(),l.fetch({filter:this.filter})},500)}.bind(o),v=function(){this.trigger("ready",!1),l.append({filter:this.filter})}.bind(o);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),_(),h(e),m()}),this.on("leave",function(){o.mask=!0,o.update()}),this.on("reenter",function(){o.mask=!1,o.update()}),this.on("refresh",function(){console.info("tag activities is refreshing"),g()}),this.on("show",function(e){e&&__page.holder().setTitle("活动"),$(window).scrollTop(__page.holder().getTop())}),this.refresh=function(){g()}.bind(this),this.app.on("model-changed",function(e,t){switch(e){case"update":var i=!1;if(o.appended_list)for(var n=0;n<o.appended_list.length;n++)if(o.appended_list[n]._id==t){i=!0;var a=n;$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+t,dataType:"json",success:function(e){o.appended_list[a]=e.result,o.update({append_list:o.appended_list})},error:function(){}});break}if(!i)for(var n=0;n<o.items.length;n++)if(o.items[n]._id==t){var a=n;$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+t,dataType:"json",success:function(e){o.items[a]=e.result,o.update({items:o.items})},error:function(){}});break}}}),seajs.use(["util"],function(e){this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this),this.clickIndexNav=function(e){var t=$(e.target).attr("alt"),i=$(e.target).attr("class");$(".list_more_nav div").removeClass("nav_div_hover"),i.indexOf("nav_div_hover")>0?($(".select_pub").removeClass("label_screening_animationshow").removeClass("sort_animationshow").removeClass("time_screen_animationshow"),$("."+t).addClass("animationshow1"),hideBodyShadow()):($(e.target).addClass("nav_div_hover"),$(".select_pub").removeClass("label_screening_animationshow").removeClass("sort_animationshow").removeClass("time_screen_animationshow"),$(".select_pub").removeClass("animationshow1"),$("."+t).addClass(t+"_animationshow"),showBodyShadow())}.bind(this),this.select_type=function(e){var t=$(e.target).attr("value"),i=$(e.target).text(),n=$(e.target).parent().attr("alt");if($("#"+n).text(i),$("#"+n).addClass("setfont_color"),"sel_date"==n){$(".ul_sel_date li").removeClass("xz");var o;seajs.use(["util"],function(e){switch(t){case"0":o={},$("#"+n).text("时间筛选"),$("#"+n).removeClass("setfont_color");break;case"1":o={$gte:e.getLastDayStartDate(),$lte:e.getLastDayEndDate()};break;case"2":o={$gte:e.getWeekStartDate(),$lte:e.getWeekEndDate()};break;case"3":o={$gte:e.getNextWeekStartDate(),$lte:e.getNextWeekEndDate()};break;case"4":o={$gte:e.getMonthStartDate(),$lte:e.getMonthEndDate()};break;case"5":o={$gte:e.getNextMonthStartDate(),$lte:e.getNextMonthEndDate()};break;default:console.log("no match!!!")}a.conditions.startTime=o,console.log(a),g(),hideBodyShadowAll()})}else"sel_sort"==n&&($(".ul_sel_sort li").removeClass("xz"),"acquiesce"==t?($("#"+n).text("排序"),$("#"+n).removeClass("setfont_color"),a.sort={priorityRank:-1,statusrank:1,startTime:1}):"newest"==t?($("#"+n).text("最新"),a.sort="newest"==t?{crtOn:-1}:{"meta.apps":-1}):a.sort="newest"==t?{crtOn:-1}:{"meta.apps":-1},g(),hideBodyShadowAll());$(e.target).toggleClass("xz")}.bind(this),this.typeSelectObj=function(){var e=$(".label_screening .xz");if(e.length>0){$("#label_screeningId").addClass("setfont_color");for(var t=[],i=0;i<e.length;i++)t.push($(e[i]).attr("value"));console.log(t),a.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{$in:t},privateFlag:!1},__page.tenant&&(a.conditions.tenantId=__page.tenant),g(),hideBodyShadowAll()}}.bind(this),this.setAllType=function(){$(".label_screening li").removeClass("xz"),a.conditions={status:{$in:["a","re","ac","co"]},"tags.type":{},privateFlag:!1},__page.tenant&&(a.conditions.tenantId=__page.tenant),$("#label_screeningId").removeClass("setfont_color"),g(),hideBodyShadowAll()}.bind(this),this.showBodyShadow=function(){var e=$(window).height(),t=$("body").height(),i=e>t?e:t;$(".body_shadow").show().css("height",i+"px").css("z-index","500")}.bind(this),this.hideBodyShadowAll=function(){$(".select_pub").removeClass("label_screening_animationshow").removeClass("sort_animationshow").removeClass("time_screen_animationshow"),$(".select_pub").addClass("animationshow1"),$(".list_more_nav div").removeClass("nav_div_hover"),$(".attention_wary").hide(),hideBodyShadow()}.bind(this),this.openWxhref=function(){e.setCookie("attentionUrl","activity/index",1),hideBodyShadowAll(),window.location=o.wxhref}.bind(this),this.hideBodyShadow=function(){$(".body_shadow").hide()}.bind(this),this.showattention=function(){if(o.fromButtonClick=!0,o.subscribe)t.route("activity/new");else{var e=$(window).scrollTop(),i=$(window).height(),n=$("body").height(),a=$(".attention_wary").height()-100,r=i>n?i:n,s=e+i/2-a/2-100;$(".body_shadow").show().css("height",r+"px").css("z-index","699"),$(".attention_wary").show().css("top",s+"px")}}.bind(this),this.showAttentionPrompt=function(){if(!o.subscribe&&void 0==e.getCookie("showAttentionPrompt")){var t=$(window).scrollTop(),i=$(window).height(),n=$("body").height(),a=$(".attention_wary").height()-100,r=i>n?i:n,s=t+i/2-a/2-100;$(".body_shadow").show().css("height",r+"px").css("z-index","699"),$(".attention_wary").show().css("top",s+"px"),e.setCookie("showAttentionPrompt","true",1)}}.bind(this)});var m=function(){e()},y=function(){function t(e){var e=e||window.event;switch(e.type){case"touchstart":console.log("touchstart"),u=e.targetTouches[0].screenY;break;case"touchcancel":case"touchend":console.log("touchend"),c.className.match("flip")&&(c.className="loading",c.querySelector(".pullUpLabel").innerHTML="加载中...",1==f?(f=!1,a.page.no++,v()):document.getElementById("pullUp").style.display="none");break;case"touchmove":console.log("touchmove");var t=e.targetTouches[0],i=!1;$(t.target).attr("class").indexOf("activity-cover-img")>-1&&t.pageY>45&&(i=!0),d=t.screenY,d-u>0&&i&&0===$(window).scrollTop()&&p&&(p=!1,$("#pullDown").show(),g());var n=parseFloat($(window).height())+parseFloat($(window).scrollTop());__page.holder().saveTop($(window).scrollTop()),$(document).height()-25<=n&&$(document).height()<=n?c.className.match("flip")||(c.className="flip",c.querySelector(".pullUpLabel").innerHTML="松开加载更多活动..."):$(document).height()-50<=n&&$(document).height()-25>=n&&c.className.match("flip")&&(c.className="",c.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}}r.addEventListener("touchstart",t,!1),r.addEventListener("touchmove",t,!1),r.addEventListener("touchend",t,!1),r.addEventListener("touchcancel",t,!1),$(window).resize(function(){e()})},_=function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",0])},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")","首页","",1])},cancel:function(){}})}}),t.tag("activity-item",' <div class="screen recommended over_hidden"> <div>{check}</div> <a href="#" onclick="{showPaDetail}"><img riot-src="{picshow}" class="activity-cover-img img1"></a>  <div class="lv_typewz lv_typewz_{status ? status : \'\'} lv_width_{status ? status : \'\'} {reviewStatus==\'r\' ? \'lv_typewz_999999\' : \'\'}">{statuszw}</div> <div class="lv_num lv_num_gw"> <p class="p1"><img riot-src="/{env}/images/item2.png" width="15" class="vertical"> <span class="vertical" >{num}</span></p> <p class="p2"><img riot-src="{likes_imgsrc}" width="15"> <span class="vertical" >{likes}</span></p> <p class="p3"></p> <p class="p4"></p> </div> <div class="scr"> <div class="scr_left scr_left_widht100"> <p class="p1">{name.length > 15 ? name.substring(0, 15)+\'...\':name}</p> <p class="p2"> <span></span>{startTimes_Week} {place.length > 16 ? place.substring(0, 16)+\'...\':place} </p> </div> </div> <div class="shadow"></div> </div>',function(){var e=this.opts.curritem;this.statuszw=__app.enums.ProductActivityStatus.values[e.status],"r"==e.reviewStatus&&(this.statuszw=__app.enums.ReviewStatus.values[e.reviewStatus]),this.num=e.meta.apps;var i=this;i.env="production"==__app.settings.env.NODE_ENV?"public":"web",i.picshow=util.calcImageUrl(e),i.likes=e.meta.likes||0,i.startTimes=util.dateFormat(new Date(e.startTime),"MM/dd"),i.Week=util.getDateWeek(new Date(e.startTime)),i.startTimes_Week=i.startTimes+" "+i.Week,i.reviewStatus=e.reviewStatus?e.reviewStatus:"",i.likes_imgsrc=__page.user.meta.pa.likes[e._id]?"/"+i.env+"/images/item1_like.png":"/"+i.env+"/images/item1.png",this.showPaDetail=function(n){n.preventDefault(),_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",i.parent.name||"",util.convertToValue(i.parent.tags.type).join(",")||""]),t.route("activity/_"+e._id)}.bind(this)}),t.tag("activity-menu",' <div class="footer_navs_wary display_none"> <a href="#activity/index" class="nav1">活动</a> <a href="#travel/index" class="nav2">目的地</a> <a href="#mine/index" class="nav3">我的</a> <a href="{wxhref}" class="nav4" if="{!subscribe}">关注快乐种子</a> </div>',function(){self=this,self.subscribe=1==__page.user.wx_subscribe?!0:!1;var e=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};self.wxhref=util.getWxhref(),self.env=e(),console.log("env="+self.env)}),t.tag("activity-new",' <div id="addactbody" if="{!hidden}"> <div class="statement_wary"> <p>提醒：活动内容包含违法、反动信息或者冒用他人/组织的名义发布活动，平台有权删除其活动并提交公安机关处理</p> <img riot-src="/{env}/images/closebtn3.png" class="closebtn3" onclick="{closeStatement}"> </div> <form id="actform"> <div class="addactcontent"> <section> <div class="secleft"><img riot-src="/{env}/images/new1.png"></div> <div class="secright"> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="name" value="" placeholder="活动名称"> </div> </section> <section class="pasection2x pasection3x"> <div class="secleft"><p class="p1"><img riot-src="/{env}/images/new2.png"></p> <p class="p2" onclick="{showSelectType}">类型标签</p></div> <div class="secright"> <div class="new_act_type_div"></div> <ul class="activity_new_type_ul"> <li each="{name,i in typetags}" data="{name}" class="{tagdefault:true,tagselected:parent.currtypetags.indexOf(name)>=0} {(i==3||i==7)?\'no_m_left\':\'\'}" onclick="{parent.selecttags}"> <i>{__app.enums.TypeTags.values[name]}</i> </li> </ul> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new3.png"></div> <div class="secright"> <div class="fl div_left">活动时间</div> <div class="fl div_right"> <div id="startTimebtn" class="datediv"> <input type="text" id="startTimetxt" value="00/00" readonly="readonly"> <input id="startTime" onchange="{startchange}" onclick="{dateclick}" onblur="{dateblur}" name="startTime" style="display: inline-block;margin-top:0px;" type="date"> </div> <i style="display:block;position:absolute;top:20px;left:43%;width:20px;height:1px;border-top:1px solid #ccc"></i> <div id="endTimebtn" class="datedivright"> <input type="text" id="endTimetxt" value="00/00" readonly="readonly"> <input id="endTime" onchange="{endchange}" onclick="{dateclick}" onblur="{dateblur}" name="endTime" style="display: inline-block;margin-top:0px" type="date"> </div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new4.png"></div> <div class="secright"> <div></div> <input type="text" onfocus="{inputonfocus}" onblur="{inputonblur}" name="place" value="" placeholder="活动地点"> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new5.png"></div> <div class="secright"> <div class="fl div_left">发起人</div> <div class="fl div_right"> <div style="width:40%;float: left;line-height: 35px;"><input type="text" id="displayName" onfocus="{inputonfocus}" style="font-size:14px;" onblur="{inputonblur}" name="initiatorName" placeholder="姓名" value="{__page.user.displayName}"></div> <div style="width:60%;float:right;position:relative;line-height: 35px"><span class="borderleft"></span><input type="text" onfocus="{inputonfocus}" id="phone" onblur="{inputonblur}" style="font-size:14px;" name="initiatorContact" placeholder="联系方式"></div> </div> </div> </section> <section> <div class="secleft"><img riot-src="/{env}/images/new6.png"></div> <div class="secright"> <div class="fl div_left">报名截止</div> <div class="fl div_right"> <div class="datediv datediv360"> <input id="closingTimebtn" type="text" attr="closingTime" value="00/00" readonly="readonly"> <input id="closingTime" onchange="{closingchange}" onclick="{dateclick}" onblur="{dateblur}" name="closingTime" style="display: inline-block;margin-left:0;" type="date"> </div> </div> </div> </section> </div> <div style="margin-top: 10px;margin-bottom: 8px;border-top:8px solid #eee;"> <div class="activity_title"> <span></span> 活动介绍 </div> </div> <div id="editor"></div>        <div class="banner" onclick="{uploadimg}" if="{test}" style="position: relative"> <img style="width: 100%" riot-src="/{env}/images/pabannershow.png"> </div> <div class="banner" onclick="{uploadimg}" if="{!test}" style="position: relative"> <div style="position: absolute;bottom:10px;right:10px;width:24px;height:24px;z-index: 100;"> <img style="width:24px;height:24px" riot-src="/{env}/images/5.0.8.png"> </div> <img id="banner" style="width: 100%;" riot-src="{imgsrc}"> </div> <div class="more_options more_options_zk" onclick="{moreOptions}"> <div class="activity_title"> <span></span> 更多选项 </div> </div> <div class="options" > <div class="new_hint_div1_div2"> <p>只允许被邀请的朋友参与</p> <div class="but_wary" id="but_wary"> <p id="but_radius"></p> </div> </div> <div class="user_options"> <div class="new_hint_div1_div3"> <p>报名填写项</p> </div> <ul onclick="{userOptions}"> <li each="{name,i in appFieldNameArr}" data="{name}" class="{i < 2 || name == \'desc\' ? \'xz\':\'\'}">{__page.appFields[name].title}</li> </ul> </div> </div> <div class="clear"></div> <div class="new_hint1" style="margin-top:0px;"> <div class="new_hint_div1"> <div class="new_hint_div1_div1"> <div> <p class="new_hint_p1">提示:</p> <p class="new_hint_p2">请确认活动内容后再发布!因为一旦发布并且有用户报名后,活动就不允许取消和修改了。</p> </div> </div> <div class="clear"></div> <div class="serv t-c"> <p>使用过程中如有任何疑问请咨询客服</p> <p class="m_top10_media p2"><img riot-src="/{env}/images/1_19.png"> 客服电话：400-680-9072</p> </div> </div> <div class="footer_zw"></div>       <div class="footer-detail" name="btnbox"> <div onclick="{homepage}"></div> <div class="button but1" style="width:27%;" onclick="{submitdraft}">保存草稿</div> <div class="button but2" style="width:45%;" onclick="{publishpa}">立即发布</div> </div> <div class="footer_shadow" id="btnbox2"></div> </div> </form> </div>',function(){var e=nest.presentable(this);e.env="production"==__app.settings.env.NODE_ENV?"public":"web";var i={localIds:[],fileNames:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[],this.fileNames=[]}},n=new util.wedgt.WcEditor({modules:{Bold:!0,Color:!0,Img:!0,TextAlign:!0},container:"editor"}),o=[],a={localIds:[],serverIds:[],refresh:function(){this.localIds=[],this.serverIds=[]}},r=this.imgmodel=nest.modelable({},{url:__app.settings.api.url+"/img/"}),s=this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),c=this.startTimetxt,l=this.startTime,u=this.endTimetxt,d=this.endTime,p=this.closingTimebtn,f=this.closingTime,h=this.name,g=this.place,v=__page.user.id,m=this.initiatorName,y=this.initiatorContact,_=(this.desc,this.actform,this.btnbox),b=new Date(__page.servertime);e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.typetags=Object.keys(__app.enums.TypeTags.values),e.test=!0,e.actobj={txtareastr:"【活动主题】</br></br> 【活动日程】</br>   8：00 在xx集合；</br>【费用说明】</br>【报名说明】</br>    1、直接系统报名，队友名单中显示用户名字即报名成功；</br>    2、本活动不限名额。</br>【温馨提示】",initPage:function(){c.value=util.dateFormat(b,"MM/dd"),u.value=util.dateFormat(b,"MM/dd"),p.value=util.dateFormat(b,"MM/dd"),h.value="",l.value=util.dateFormat(b,"yyyy-MM-dd"),d.value=util.dateFormat(b,"yyyy-MM-dd"),f.value=util.dateFormat(b,"yyyy-MM-dd"),g.value="",v=__page.user.id,m.value=__page.user.displayName,y.value="",n.setContentHtml(this.txtareastr),$.ajax({type:"get",url:__app.settings.api.url+"/user/_"+__page.user.id+"/contact",dataType:"json",success:function(e){e.result&&e.result.contact&&($("#displayName").val(e.result.contact.displayName),$("#phone").val(e.result.contact.phone))},error:function(){}}),o=[],a.refresh(),i.refresh(),C(),S(),T=!1,$(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right")},getJsondata:function(){var t={name:h.value.trim(),startTime:l.value||b,endTime:d.value||b,place:g.value.trim(),initiator:__page.user.id,initiatorName:m.value.trim(),initiatorContact:y.value.trim(),closingTime:f.value.trim()||b,pics:[],desc:n.getContentHtml()&&util.events.htmlToTemplate(n.getContentHtml())||e.actobj.txtareastr,applicationFields:F()};return t.tags={region:"",custom:"",type:e.currtypetags||[]},t},validatefield:function(t){var i=[];return w.empty(t.name)&&i.push("活动名称不能为空"),e.currtypetags.length<=0&&i.push("请选择类型"),w.empty(t.place)&&i.push("活动地点不能为空"),w.empty(t.initiatorName)&&i.push("请填写发起人姓名"),w.empty(t.initiatorContact)&&i.push("请填写发起人联系方式"),util.compareDate(util.dateFormat(b,"yyyy-MM-dd"),l.value)&&i.push("开始时间不能早于今天"),util.compareDate(l.value,d.value)&&i.push("结束时间不能早于开始时间"),util.compareDate(f.value,l.value)&&i.push("截止时间不能晚于开始时间"),i},submitform:function(e){var t=this,r=$(util.events._wrapdiv(n.getContentHtml()));r.find("img").each(function(){i.localIds.push($(this).attr("localid")),i.fileNames.push($(this).attr("fileName"))}),i.localIds.length>0?t._upload4Wx(i.localIds,i.serverIds,function(n){if(n)return a.refresh(),i.refresh(),util.tipssuccess(1,"上传图片失败",0);for(var r,c=0,l=i.localIds.length;l>c;c++)r={localId:i.localIds[c],name:i.fileNames[c],mediaId:i.serverIds[c]},o.push(r);$.ajax({type:"post",url:__app.settings.api.url+"/img/images",data:{imgArr:o}}).success(function(i){for(var n,o=i.result,a=[],r=0,c=o.length;c>r;r++)n={id:o[r]._id,name:o[r].name,mediaId:o[r].mediaId,localId:o[r].localId},a.push(n);s.set("introImgs",a),t._uploadPaObj(e)})}):t._uploadPaObj(e)},_uploadPaObj:function(t){a.localIds.length>0?wx.uploadImage({localId:a.localIds[0],success:function(n){var o={name:util.getFileName(),mediaId:n.serverId};r.set("myobj",o),r.save(),r.off("save").on("save",function(o){var r=[{id:o._id,mediaId:n.serverId,name:o.name}];t.images=r,t.pics[0]="/public/images/pabanner.png",t&&t.status&&"d"==t.status?s.set("query",{action:"draft"}):(a.refresh(),e.update(),s.set("query",{action:"publish"})),t&&t.status&&delete t.status,s.set("myobj",t),s.set("privateFlag",T),s.save(),a.refresh(),i.refresh()})},fail:function(e){console.error(JSON.stringify(e))}}):(t&&t.status&&"d"==t.status?s.set("query",{action:"draft"}):s.set("query",{action:"publish"}),t&&t.status&&delete t.status,t.pics=["/public/images/pabanner.png"],s.set("myobj",t),s.set("privateFlag",T),s.save(),a.refresh(),i.refresh())},_upload4Wx:function(e,t,i){function n(){wx.uploadImage({localId:e[a],success:function(e){return t.push(e.serverId),a++,o-1>=a?(setTimeout(n,500),void 0):i?i():void 0},fail:function(e){i(JSON.stringify(e)),console.error(JSON.stringify(e))}})}var o=e.length,a=0;n()}},this.homepage=function(){t.route("activity/index")}.bind(this);var w=util.validator();s.on("save",function(i){s.set("_id",i._id),"publish"==s.query.action&&(_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.PUBLISH+")",i.name||"",util.convertToValue(e.currtypetags).join(",")||""]),t.route("#activity/createsuccess/_"+i._id)),"draft"==s.query.action&&(s&&s.query&&delete s.query,util.tipssuccess(0,"保存成功"))}),s.on("save-error",function(){util.tipssuccess(1,"保存失败")}),s.on("error",function(){util.tipssuccess(1,"保存失败")}),this.selecttags=function(t){var i=t.item,n=e.currtypetags.indexOf(i.name);return n>=0?e.currtypetags.splice(n,1):e.currtypetags.push(i.name)}.bind(this),this.startchange=function(){return""==l.value&&util.getBrowser().android===!1?(l.value=b,c.value=util.dateFormat(b,"MM/dd"),!1):(c.value=util.dateFormatstr(l.value),(!d||d.value<l.value)&&(d.value=l.value,e.endchange()),(!f||f.value>l.value)&&(f.value=l.value,e.closingchange()),void 0)}.bind(this),this.endchange=function(){return""==d.value&&util.getBrowser().android===!1?(d.value=b,u.value=util.dateFormat(b,"MM/dd"),!1):(u.value=util.dateFormatstr(d.value),void 0)}.bind(this),this.closingchange=function(){return""==f.value&&util.getBrowser().android===!1?(f.value=b,p.value=util.dateFormat(b,"MM/dd"),!1):(p.value=util.dateFormatstr(f.value),void 0)}.bind(this),this.publishpa=function(){var t=e.actobj.getJsondata();console.log("initiator="+t.initiator),t.status="o";var i=e.actobj.validatefield(t);if(i.length>0)return util.tipssuccess(1,i[0],1),void 0;if(__page.tenant&&__page.user.wx_openid){var n={};n.tenantId=__page.tenant,n.wx_openid=__page.user.wx_openid,$.ajax({type:"get",url:__app.settings.api.url+"/tenant/_"+n.tenantId+"/ifTenantMember",dataType:"json",success:function(i){i&&(t.tenantId=__page.tenant),e.actobj.submitform(t)},error:function(){util.tipssuccess(1,"用户授权失败",1)}})}else e.actobj.submitform(t)}.bind(this),this.submitdraft=function(){var t=e.actobj.getJsondata();t.status="d";var i=e.actobj.validatefield(t);if(i.length>0)return util.tipssuccess(1,i[0],1),void 0;if(__page.tenant&&__page.user.wx_openid){var n={};n.tenantId=__page.tenant,n.wx_openid=__page.user.wx_openid,$.ajax({type:"get",url:__app.settings.api.url+"/tenant/_"+n.tenantId+"/ifTenantMember",dataType:"json",success:function(i){i&&(t.tenantId=__page.tenant),e.actobj.submitform(t)},error:function(){util.tipssuccess(1,"用户授权失败",1)}})}else e.actobj.submitform(t)}.bind(this),this.moreOptions=function(){$(".options").slideToggle(),$(".more_options").toggleClass("more_options_zk")}.bind(this),this.userOptions=function(e){"姓名"!=e.target.outerText&&"手机"!=e.target.outerText&&$(e.target).toggleClass("xz")}.bind(this);var x,k,T=!1,C=function(){var e=document.getElementById("but_wary");e.addEventListener("touchstart",N,!1),e.addEventListener("touchmove",A,!1),e.addEventListener("touchend",I,!1)},N=function(e){e.preventDefault();var e=e||window.event;x=e.touches[0].pageX},A=function(e){e.preventDefault();var e=e||window.event;k=e.touches[0].pageX},I=function(){k>x?($(".but_wary").addClass("but_right"),$(".but_wary").removeClass("but_left"),T=!0):x>k&&($(".but_wary").addClass("but_left"),$(".but_wary").removeClass("but_right"),T=!1),x=0,k=0},S=function(){var e=util.getCookie("noSetatementShow");e&&$(".statement_wary").hide()};e.on("toabsolute",function(){_.style.position="absolute",_.style.bottom="0px",e.btnbox2.style.position="absolute",e.btnbox2.style.bottom="0px"}),e.on("tofixed",function(){_.style.position="fixed",_.style.bottom="0px",e.btnbox2.style.position="fixed",e.btnbox2.style.bottom="0px"}),this.inputonfocus=function(){e.trigger("toabsolute")}.bind(this),this.inputonblur=function(){e.trigger("tofixed")}.bind(this),this.descfocus=function(){e.trigger("toabsolute")}.bind(this),this.descblur=function(){e.trigger("tofixed")}.bind(this);var D=navigator.userAgent;D.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){e.trigger("toabsolute")
}.bind(this),this.dateblur=function(){e.trigger("tofixed")}.bind(this)),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this),this.showSelectType=function(){var e=$(".pasection2x").attr("class");e.indexOf("animation_pasection3x")>0?$(".pasection2x").removeClass("animation_pasection3x").addClass("animation_pasection4x"):$(".pasection2x").removeClass("animation_pasection4x").addClass("animation_pasection3x")}.bind(this),this.closeStatement=function(){$(".statement_wary").addClass("close_transition"),util.setCookie("noSetatementShow","true","7")}.bind(this);var E=function(){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),$("#textareadiv").one("click",function(){util.setCookie("ReadedPushlishTips","true",30),$("#textareatips").remove()}),n.init(),n.reset(),$("#contentdiv").on("focus",function(){e.trigger("toabsolute")}),$("#contentdiv").on("blur",function(){e.trigger("tofixed")}),n.off("chooseImgBegin").on("chooseImgBegin",function(){wx.chooseImage({success:function(e){n.trigger("chooseImgComplete",e.localIds[0])}})})}.bind(e);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("show",function(e){e&&__page.holder().setTitle("发布活动"),$(window).scrollTop(__page.holder().getTop())}),this.on("open",function(t){E(t),e.test=!0,e.actobj.initPage(),s&&s._id&&delete s._id,s&&s.query&&delete s.query,e.currtypetags=[],wx.ready(function(){e.uploadimg=function(){wx.chooseImage({success:function(t){a.refresh(),a.localIds[0]=t.localIds[0],e.test=!1,e.update();var i=$("#banner");i.attr("src",t.localIds[0])}})},e.update()}),$(window).scrollTop("0px")});var F=function(){for(var t=[],i=$(".user_options .xz"),n=0;n<i.length;n++)t.push(e.appFields[$(i[n]).attr("data")]);return t}}),t.tag("activity-recommend-item",'<div class="acrivity_detail_more" onclick="{showPaDetail}"> <div> <img riot-src="{picshow}"> </div> <div> <p>{name.length > 24 ? name.substring(0, 24)+\'...\':name}</p> <p>{startTimes} {place.length > 8 ? place.substring(0, 8)+\'...\':place}</p> <p>{num}人报名 {likes}人点赞</p> </div> </div>',function(){var e=this.opts.curritem,i=this;i.num=e.meta.apps,i.picshow=util.calcImageUrl(e),i.likes=e.meta.likes||0,i.startTimes=util.dateFormat(new Date(e.startTime),"MM/dd"),i.Week=util.getDateWeek(new Date(e.startTime)),i.startTimes_Week=i.startTimes+" "+i.Week,i.name=e.name,this.showPaDetail=function(n){n.preventDefault(),_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.VIEW+")",i.parent.name||"",util.convertToValue(i.parent.tags.type).join(",")||""]),t.route("activity/_"+e._id)}.bind(this)}),t.tag("activity-search",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div id="scroll_body" if="{!mask}"> <link href="../web/css/iscroll.css" rel="stylesheet"> <div class="search_wary"> <input type="text" name="name" placeholder="输入活动名搜索"><input type="button" onclick="{search}" value="搜索"> </div> <mask-loading show = "{!ready}"></mask-loading> <div class="search_wary_zw"></div> <div id="pullDown" class="loading" style="display: none"> <span class="pullDownIcon"></span><span class="pullDownLabel">正在刷新列表...</span> </div> <div class="recomm_wary activity_wary"> <activity-item class="ac_item" each="{items}" curritem="{this}"></activity-item> <activity-item class="ac_item" each="{appended_list}" curritem="{this}"></activity-item> </div> <div id="pullUp" style="display: none"> <span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多活动...</span> </div> <div id="noResult" style="display: none;text-align:center;padding-top:80px;font-size:14px;color:#666;"> <p><img riot-src="/{env}/images/c_02.png" style="width: 35%"></p> <p class="m_top10">抱歉，没有找到相关活动</p> </div>  <div class="footer_zw"></div> <div class="footer-detail" name="btnbox"> <div onclick="{homepage}"></div> <div class="button publish" onclick="{showattention_by_publish}">发布活动</div> </div> </div> </div>',function(){function e(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}function i(e){void 0!=e&&(e.forEach(function(e){o.items.push(e)}),console.log("self.items "+o.items.length))}function n(e){console.log(e),0==e.length?document.getElementById("pullUp").style.display="none":(document.getElementById("pullUp").style.display="block",l.className="",l.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}this.app=this.opts.app;var o=nest.presentable(this);o.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+o.env);var a=this.name,r={sort:{priorityRank:-1,rank:-1},page:{size:10,no:1},conditions:{status:{$in:["a","re","ac","co"]},reviewStatus:{$in:["t","d"]},privateFlag:!1}};__page.tenant&&(r.conditions.tenantId=__page.tenant);var s,c,l,u=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/find",filter:r}),d=0,p=0,f=!1,h=!0;u.on("fetch",function(e){console.info("activities is fetched"),o.items=e,o.appended_list=[],h=o.items.length%10==0?!0:!1,o.update(),o.trigger("ready",!0),o.trigger("view-route-to"),l=document.getElementById("pullUp"),c=$("#noResult"),s=document.getElementById("scroll_body"),n(e),0!=e.length?(e.length>3?$("#pullUp").show():$("#pullUp").hide(),c.hide()):($("#pullUp").hide(),c.show()),b(),_(),y(),$(window).scrollTop("0px"),l.className="",u.trigger("fetched")}),u.on("fetched",function(){f=!0}),u.on("append",function(e){console.info("activities is append"),i(o.appended_list),o.appended_list=e,h=0==o.appended_list.length?!1:o.appended_list.length%10==0?!0:!1,o.update({appended_list:e}),o.trigger("ready",!0),n(e)});var g=function(e){this.trigger("ready",!1),this.filter=e||this.filter,u.fetch({filter:this.filter})}.bind(o),v=function(){this.trigger("ready",!1),u.append({filter:this.filter})}.bind(o),m=function(){return r.keyword=a.value.trim(),r.page.no=1,0==r.keyword.length?(util.tipssuccess(1,"搜索内容不能为空",1),setTimeout(function(){$("#pullDown").hide()},300),void 0):(setTimeout(function(){$("#pullDown").hide(),o.trigger("ready",!1),g()},500),void 0)};this.search=function(){return r.keyword=a.value.trim(),r.page.no=1,0==r.keyword.length?(util.tipssuccess(1,"搜索内容不能为空",1),void 0):($("#pullDown").hide(),o.trigger("ready",!1),g(),void 0)}.bind(this),this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(){console.info("tag activities is opening"),this.trigger("ready",!1),this.update(),this.trigger("ready",!0),o.trigger("view-route-to")}),this.on("leave",function(){o.mask=!0,o.update()}),this.on("reenter",function(){o.mask=!1,o.update()}),this.on("show",function(e){o.trigger("ready",!0),e&&__page.holder().setTitle("搜索"),$(window).scrollTop(__page.holder().getTop())}),this.app.on("model-changed",function(e,t){switch(e){case"update":var i=!1;if(o.appended_list)for(var n=0;n<o.appended_list.length;n++)if(o.appended_list[n]._id==t){i=!0;var a=n;$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+t,dataType:"json",success:function(e){o.appended_list[a]=e.result,o.update({append_list:o.appended_list}),_()},error:function(){}});break}if(!i)for(var n=0;n<o.items.length;n++)if(o.items[n]._id==t){var a=n;$.ajax({type:"get",url:__app.settings.api.url+"/pa/_"+t,dataType:"json",success:function(e){o.items[a]=e.result,o.update({items:o.items})},error:function(){}});break}}}),seajs.use(["util"],function(){this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this)});var y=function(){$(document).on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")})},_=function(){e()};this.homepage=function(){t.route("activity/index")}.bind(this),this.showattention_by_publish=function(){t.route("activity/new")}.bind(this);var b=function(){function t(e){var e=e||window.event;switch(e.type){case"touchstart":console.log("touchstart"),d=e.targetTouches[0].screenY;break;case"touchcancel":case"touchend":console.log("touchend"),l.className.match("flip")&&(l.className="loading",l.querySelector(".pullUpLabel").innerHTML="加载中...",1==h?(h=!1,r.page.no++,v()):document.getElementById("pullUp").style.display="none");break;case"touchmove":console.log("touchmove");var t=e.targetTouches[0],i=!1;$(t.target).attr("class").indexOf("activity-cover-img")>-1&&t.pageY>45&&(i=!0),p=t.screenY,p-d>0&&i&&0===$(window).scrollTop()&&f&&(f=!1,$("#pullDown").show(),m());var n=parseFloat($(window).height())+parseFloat($(window).scrollTop());__page.holder().saveTop($(window).scrollTop()),$(document).height()-25<=n&&$(document).height()<=n?l.className.match("flip")||(l.className="flip",l.querySelector(".pullUpLabel").innerHTML="松开加载更多活动..."):$(document).height()-50<=n&&$(document).height()-25>=n&&l.className.match("flip")&&(l.className="",l.querySelector(".pullUpLabel").innerHTML="上拉加载更多活动...")}}s.addEventListener("touchstart",t,!1),s.addEventListener("touchmove",t,!1),s.addEventListener("touchend",t,!1),s.addEventListener("touchcancel",t,!1),$(window).resize(function(){e()}),wx.ready(function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){},cancel:function(){}})})}}),t.tag("add-randomnotes",'<div if="{!hidden}"> <textarea style="box-shadow: inset 0 0 0 white;text-shadow: none" class="reandom_text1" name="desc" onfocus="{inputonfocus}" onblur="{inputonblur}" placeholder="写点想说的话吧..."></textarea> <div class="random_img_wary"> <ul> <li each="{name, i in localIds}"> <img id="thumbnail" riot-src="{name}"> <div class="delete_img" ><span></span></div> <span onclick="{ parent.removeImg }" class="delete_img_area" ></span> </li> </ul> <div id="filePicker" class="random_img_but">+</div> </div> <div class="clear"></div> <div class="check_div" onclick="{shareOrNotToggle}">   <div class="checkbox_div1 {checked:!shareOrNot}" onclick="{ return; }"></div> <span class="vertical"> 分享到朋友圈或者朋友</span> </div>          <div class="footer-detail" name="btnbox"> <div onclick="{submitdraft}"></div> <div class="button randomnote" onclick="{sendNote}">发送</div> </div> </div>',"add-randomnotes ul li{ position:relative;overflow: hidden;float: left; }",function(){function e(e){var n={desc:"",pics:[],initiator:"",initiatorName:""};return n.desc=r.value.trim(),n.initiator=window.__page.user.id,n.pics="undefined"!=typeof e?e:[],$.ajax({type:"post",url:__app.settings.api.url+"/pa/_"+s+"/sendNote",data:n,dataType:"json",success:function(){util.uploadtips("hide"),util.removeforbidOperation_cp(),i.shareOrNot?t.route("activity/_"+s+"?share=true&guest=true"):t.route("activity/_"+s+"?guest=true")},error:function(){util.uploadtips("hide"),util.tipssuccess(1,"失败,请查看您的网络"),util.removeforbidOperation_cp()}}),!0}var i=nest.presentable(this),n=[],o=[];i.localIds=n,i.shareOrNot=!0,i.env="production"==__app.settings.env.NODE_ENV?"public":"web";var a=this.img_model=nest.modelable({},{url:__app.settings.api.url+"/img/"}),r=(this.model=nest.modelable({},{url:__app.settings.api.url+"/pa/"}),this.desc),s=util.getCookie("detailId");this.sendNote=function(){return i.localIds.length<=0&&""===r.value.trim()?(util.tipssuccess(1,"内容为空"),void 0):(util.forbidOperation_cp(),util.uploadtips("show","上传中,请稍后.."),u(n),void 0)}.bind(this),this.removeImg=function(e){i.localIds.splice(e.item.i,1)}.bind(this),this.shareOrNotToggle=function(){return i.shareOrNot?(i.shareOrNot=null,void 0):(i.shareOrNot=!0,void 0)}.bind(this);var c=function(){this.trigger("ready",!1),this.update(),this.trigger("ready",!0),this.trigger("view-route-to"),l()}.bind(i);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("show",function(e){e&&__page.holder().setTitle("添加随记"),$(window).scrollTop(__page.holder().getTop())}),this.on("open",function(e){c(e),i.shareOrNot=!0,i.desc.value="",n=[],o=[],i.localIds=n,i.update(),wx.ready(function(){$("#filePicker").off("click").on("click",function(){wx.chooseImage({success:function(e){i.localIds=i.localIds.concat(e.localIds).slice(0,9),n=i.localIds,i.update()}})})}),$(window).scrollTop("0px")}),this.submitdraft=function(){t.route("activity/_"+s)}.bind(this),this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this);var l=function(){$(document).on("click",function(){$(".footer_navs_wary").slideUp(),$(".footer_navs_but").removeClass("footer_navs_but_hover")})},u=function(t){if(t.length<=0)return e();var n=t.pop();wx.uploadImage({localId:n,success:function(n){var r={name:util.getFileName(),mediaId:n.serverId};a.set("randomNotePic",r),a.save(),a.off("save").on("save",function(n){$.ajax({type:"post",url:__app.settings.api.url+"/pa/_"+s+"/uploadNotePic",data:n._id,dataType:"json",success:function(n){o.unshift(n.result),t.length>0?(i.update(),u(t)):e(o)},error:function(){alert("upload note pic fail")}})})}})}}),t.tag("applications-item-initiator-sms",'<div class="add_info" onclick="{checkboxSelect}"> <div class="add_info_width"> <div class="div1"> <div class="add_info_checkbox_div1" phone="{phone}" ></div> <img riot-src="{headImg}" width="24" class="imgradius"> {applicantName} </div> <div class="div2"> <table class=""> <tr> <td class=" td1">{_displayName}</td> <td class=" td2">{num}人</td> </tr> </table> </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId,e.smsImg="/"+e.env+"/images/sms.png",e.telImg="/"+e.env+"/images/tel.png",e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.moreOption=!1;for(var n=[],o=!1,a=0,r=e.appFieldNameArr.length;r>a;a++)"displayName"==e.appFieldNameArr[a]||"phone"==e.appFieldNameArr[a]?n.push(a):e.tag[e.appFieldNameArr[a]]&&!o&&(e.moreOption=!0,o=!0);for(var a=0,r=n.length;r>a;a++)e.appFieldNameArr.splice(n[a],1),n[a+1]=n[a+1]-1;var s=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=s();var c=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=c();var l=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=l();var u=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=u(),this.checkboxSelect=function(e){$(e.currentTarget).find(".add_info_checkbox_div1").toggleClass("add_info_checked"),i._MassTextingURL()}.bind(this)}),t.tag("applications-item-initiator",'<div class="add_info" > <div class="add_info_width"> <div class="div1" onclick="{toggleMoreInfo}"><img riot-src="{headImg}" width="24" class="imgradius"> {applicantName}</div> <div class="div2" onclick="{toggleMoreInfo}"> <table class=""> <tr> <td class=" td1">{_displayName}</td> <td class=" td2">{num}人</td> </tr> </table> </div> </div> <div class="clear"></div> <div class="app_user_info"> <div class="div3 c999" if="{moreOption}"> <table class=""> <tr each = "{name, i in appFieldNameArr}" if="{parent[name]}"> <td class=" td1" valign="top">{parent.appFields[name].title}：</td> <td class=" td2">{parent[name]}</td> </tr> </table> </div > <div class="div4"> <a href="sms:{phone}"><img riot-src="{smsImg}" class="vertical"> <span class="vertical">发短信</span></a> <a href="tel:{phone}"><img riot-src="{telImg}" class="vertical"> <span class="vertical">打电话</span> </a> </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId,e.smsImg="/"+e.env+"/images/sms.png",e.telImg="/"+e.env+"/images/tel.png",e.appFields=__page.appFields,e.appFieldNameArr=Object.keys(e.appFields),e.moreOption=!1;for(var n=[],o=!1,a=0,r=e.appFieldNameArr.length;r>a;a++)"displayName"==e.appFieldNameArr[a]||"phone"==e.appFieldNameArr[a]?n.push(a):e.tag[e.appFieldNameArr[a]]&&!o&&(e.moreOption=!0,o=!0);for(var a=0,r=n.length;r>a;a++)e.appFieldNameArr.splice(n[a],1),n[a+1]=n[a+1]-1;var s=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=s();var c=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=c();var l=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=l();var u=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=u(),this.toggleMoreInfo=function(e){$(e.currentTarget).parent().parent().find(".app_user_info").toggle()}.bind(this)}),t.tag("applications-item",'<div class="add_info"> <div class="add_info_width"> <div class="div1"><img riot-src="{headImg}" width="24" class="imgradius"> {applicantName}</div> <div class="div2" style="text-align:right;"> {num}人 </div> </div> </div>',function(){var e=this,t=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};e.env=t(),console.log("env="+e.env);var i=this.opts.tag.parent;e.tag=this.opts.tag,e.initiator=i.initiator,e.userId=i.userId,console.log("applications-item userid=",e.userId),console.log("applications-item initiator=",e.initiator);var n=function(){var t=!1;return t=null==e.initiator?!1:null==e.userId?!1:e.initiator==e.userId?!0:!1};e.isNitiator=n();var o=function(){if(null==e.tag.applicant){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}if(null==e.tag.applicant.headImgUrl){var t="/"+e.env+"/images/head.png";return console.log("headImg="+t),t}return e.tag.applicant.headImgUrl};e.headImg=o();var a=function(){return 1==e.isNitiator?null!=e.tag.displayName?e.tag.displayName+"/"+e.tag.phone:e.tag.phone:""};e._displayName=a();var r=function(){return null==e.tag.applicant?"匿名":null==e.tag.applicant.displayName?"匿名":e.tag.applicant.displayName};e.applicantName=r()}),t.tag("communication-index",'<div if="{!hidden}"> <div class="com_wary" onclick="{showEdit}" name="{commenter.displayName}" replyuserid="{commenter._id}"> <div class="com_img fl"><img riot-src="{commenter.headImgUrl}" width="24" class="imgradius"></div> <div class="com_tit fl"> <p class="p1"><span>{commenter.displayName}：</span>{replyString}<span>{replyToName}</span>{comment}</p> <p class="p2"> {time} <span>&nbsp;&nbsp;</span><a onclick="{deleteComment}" alt="{_id}" class="delete" if="{commenter._id == window.__page.user.id}">删除</a></p> </div> <div class="clear"></div> </div> </div>',function(){var e=this;e.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("env="+e.env);var t=this.opts.tag.parent,i=this.opts.tag.parent._id,n=this.opts.tag.crtOn;e.replyString=""==this.opts.tag.replyTo?"":"回复 ",seajs.use("util",function(o){var a=o.formatDate(n);e.time=a,e.update(),this.deleteComment=function(e){console.log(e);var n=$(e.target).attr("alt");console.log(n),console.log(i),$.ajax({type:"delete",url:__app.settings.api.url+"/pa/_"+i+"/comment",data:{deleteId:n},dataType:"json",success:function(e){t.comments=e.result,t.update()},error:function(){}}),e.stopPropagation()}.bind(this),this.showEdit=function(e){var i=$(e.currentTarget).parent().attr("class");if(i)t._resetFooterStyle();else{var n=$(e.currentTarget).attr("name"),o=$(e.currentTarget).attr("replyUserId"),a="";try{a=n?n:""}catch(e){a=""}t.replyToName=a,t.replyTo=o,$("#interflow_reply").val(""),$("#interflow_reply").attr("placeholder","回复 "+a+":"),$(".com_wary").parent().removeClass("com_wary_bjcolor"),$(e.currentTarget).parent().addClass("com_wary_bjcolor"),t.consult=1,t.update(),document.getElementById("interflow_reply").focus()}e.stopPropagation()}.bind(this)})}),t.tag("component-date",'<input type="text" id="{dateidtext}" value="00/00/00" readonly="readonly"> <input id="{dateid}" onchange="{datechange}" onclick="{dateclick}" onblur="{dateblur}" style="display: inline-block;margin-top:0px;" type="date">',function(){var e=nest.presentable(this);e.dateid=this.opts.dateid,e.datename=this.opts.datename,e.dateidtext=this.opts.dateidtext;var t=e.newdate=new Date(__page.servertime);e.on("toabsolute",function(){e.parent.btnbox.style.position="absolute",e.parent.btnbox.style.bottom="0px",e.parent.btnbox2.style.position="absolute",e.parent.btnbox2.style.bottom="0px"}),e.on("tofixed",function(){e.parent.btnbox.style.position="fixed",e.parent.btnbox.style.bottom="0px",e.parent.btnbox2.style.position="fixed",e.parent.btnbox2.style.bottom="0px"});var i=navigator.userAgent;i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&(this.dateclick=function(){e.trigger("toabsolute")}.bind(this),this.dateblur=function(){e.trigger("tofixed")}.bind(this)),this.datechange=function(){var i=document.querySelector("#"+e.dateid),n=document.querySelector("#"+e.dateidtext);return""==i.value&&util.getBrowser().android===!1?(i.value=t,n.value=util.dateFormat(t,"yyyy/MM/dd"),!1):(n.value=util.dateFormat(new Date(i.value),"yyyy/MM/dd"),void 0)}.bind(this)}),t.tag("debug-index",'<div class="view" if="{!hidden}"> <div> <button onclick="{refresh}">刷新</button> <button onclick="{back}">返回</button> <button onclick="{userInfo}">用户信息</button> <button onclick="{userReset}">重置用户</button> <button onclick="{userResetForChannel}">重置用户渠道信息</button> <a href="/auth/signout">注销</a>  <br> <a onclick="triggerClickMe();"> click me </a><br> <a id="clickMeLink" href="weixin://profile/gh_ad1cd17862c0" onclick="WeiXinAddContact(\'<span style=" background-color:#ff0000;"=""> click me </a><br>  <a id="clickLinkDirectlyLink" href="weixin://profile/gh_ad1cd17862c0" onclick="clickLinkDirectly();"> 直接点链接 </a><br>  <a id="followSeedTripLink" href="weixin://profile/gh_ad1cd17862c0" onclick="followSeedTrip"> 模拟点链接, 间接调用方法 </a><br>  <a href="weixin://profile/gh_ad1cd17862c0" onclick="triggerFollowMe();"> 模拟点链接, 直接调用方法 </a><br> <a id="followMeLink" href="weixin://profile/gh_ad1cd17862c0" onclick="WeiXinAddContact();"> 模拟点链接, 直接调用方法 </a><br>   </div> 页面用户信息： <div id="user"> </div> 存储用户信息： <div id="userLoaded"> </div> COOKIE信息 <div id="cookie"> </div> </div>',function(){function e(e,t){return"undefined"==typeof WeixinJSBridge?(alert("WeixinJSBridge undefined"),!1):"undefined"==typeof WeixinJSBridge.invoke?(alert("WeixinJSBridge.invoke undefined"),!1):(WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e,i){alert(e.err_code),alert(e.err_msg),alert(i),t&&t(e.err_msg)}),void 0)}var t=nest.presentable(this);t.env=__app.settings.env.NODE_ENV,console.log("env="+t.env);var i=function(){t.trigger("view-route-to")},n=function(){t.update(),t.trigger("show",!0)};this.on("mount",function(){console.info("tag debug is mounted")}),this.on("open",function(){console.info("tag debug is opening"),i()}),this.on("refresh",function(){console.info("tag debug is refreshing"),n()}),this.on("show",function(e){e&&__page.holder().setTitle("调试页面")}),this.refresh=function(){n()}.bind(this),this.back=function(){t.trigger("view-route-back")}.bind(this),this.userInfo=function(){$("#user").html(JSON.stringify(__page.user)),$("#cookie").html("token: "+$.cookie("token")+"<br>agent: "+$.cookie("agent")+"<br>connect.sid: "+$.cookie("connect.sid")),__page.user.id&&$.getJSON(__app.settings.api.url+"/user/_"+__page.user.id).done(function(e){$("#userLoaded").text(JSON.stringify(e.result))}).fail(function(e,t,i){$("#userLoaded").text(JSON.stringify(i))})}.bind(this),this.userReset=function(){$.cookie("token",null,{path:"/"}),$.cookie("agent",null,{path:"/"})}.bind(this),this.userResetForChannel=function(){$.get(__app.settings.api.url+"/user/resetUserForChannel",function(e){alert(e)})}.bind(this),this.follow=function(){e("gh_ad1cd17862c0",function(e,t){alert(e),alert(t)})}.bind(this)}),t.tag("highlights-desc","<span></span>",function(){this.root.innerHTML=""==this.opts.content?"&nbsp;":this.opts.content}),t.tag("initactivity-menu",' <div class="xcgyimg xcgy_gz setwzcss border_radius" id="focus_on"><a href="/index#activity/new"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/c_04.png" class="border_radius"></a></div>',function(){self=this,self.env=__app.settings.env.NODE_ENV,console.log("env="+self.env)}),t.tag("introduce-item","<p>{name}</p>",function(){}),t.tag("mask-loading",'<div> <div class="container" riot-style="height:{winheight}"> <div class="mask_loading" > <div></div> <div></div> <p>小种子努力加载中...</p> </div> </div> </div>',"mask-loading { } mask-loading .container{ width:100%; height:100%; min-height:567px; }",function(){var e=nest.presentable(this);e.env=__app.settings.env.NODE_ENV,this.winheight=window.innerHeight+"px",this.on("mount",function(){}),this.show=this.opts.show}),t.tag("mine-index",'<div if="{!hidden}"> <mask-loading show="{mask}"></mask-loading> <div if="{!mask}"> <div class="my_list_nav_zw"></div> <div class="my_list_nav"> <div class="mine_nav"> <div class="click_h fl" alt="attendee" onclick="{minenav}">报名的活动</div> <div class="fl" alt="initiator" onclick="{minenav}">发布的活动</div> <div class="fr" alt="minelike" onclick="{minenav}">收藏的活动</div> </div> </div> <div class="clear"></div> <div class="recomm_wary activity_wary"> <div class="attendee nav_info nav_info" id="attendee"> <div class="view">  <div class="view" if="{ready}">  <ul> <activity-item each="{items2}" curritem="{this}"></activity-item> </ul> </div> </div> </div> <div class="initiator display_none nav_info" id="initiator"> <div class="view">  <div class="view" if="{ready}">  <ul> <activity-item each="{items}" curritem="{this}"></activity-item> </ul> </div> </div> </div> <div class="minelike display_none nav_info" id="minelike"> <div class="view">  <div class="view" if="{ready}">  <ul> <activity-item each="{items3}" curritem="{this}"></activity-item> </ul> </div> </div> </div> </div>  <div class="footer_zw"></div> <div class="footer-index setleft"> <div> <a href="#activity/index"><i><img riot-src="/{env}/images/footer_nav_activity1.png"><br>活动</i></a> <a href="#travel/index"><i><img riot-src="/{env}/images/footer_nav_travel1.png"><br>目的地</i></a> <a href="#mine/index"><i class="current"><img riot-src="/{env}/images/footer_nav_mine2.png"><br>我的</i></a> </div> <div> <i onclick="{showattention}">发布活动</i> </div> </div> </div> </div>',function(){function e(){var e=Math.round(360*$("#wary").width()/640);$(".img1").css("height",e+"px")}var i=nest.presentable(this);i.env="production"==__app.settings.env.NODE_ENV?"public":"web",i.load=0;var n=this.collection=nest.collectable({},{url:__app.settings.api.url+"/pa/initiated",filter:this.opts.filter}),o=this.collection2=nest.collectable({},{url:__app.settings.api.url+"/pa/applied",filter:this.opts.filter}),a=this.collection3=nest.collectable({},{url:__app.settings.api.url+"/pa/stard",filter:this.opts.filter});this.filter=this.opts.filter,n.on("fetch",function(e){console.info("activities is fetched"),i.items=e,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1}),o.on("fetch",function(e){console.info("activities is fetched 2"),i.items2=e,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1,l()}),a.on("fetch",function(e){console.info("activities is fetched 3"),i.items3=e,i.load>=2?(i.update(),i.trigger("show",!0),i.trigger("ready",!0),i.trigger("view-route-to"),c()):i.load=i.load+1});var r=function(e){this.trigger("ready",!1),this.filter=e||this.filter,i.load=0,n.fetch({filter:this.filter}),o.fetch({filter:this.filter}),a.fetch({filter:this.filter}),$("#wary").css({height:"auto",overflow:"visible"}),$("body").css({height:"auto",overflow:"visible"})}.bind(i),s=function(){this.trigger("ready",!1),i.load=0,n.fetch({filter:this.filter}),o.fetch({filter:this.filter}),a.fetch({filter:this.filter})}.bind(i);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),r(e)}),this.on("leave",function(){i.mask=!0,i.update()}),this.on("reenter",function(){i.mask=!1,i.update()}),this.on("show",function(e){e&&__page.holder().setTitle("我的"),$(window).scrollTop("0px")}),this.on("refresh",function(){console.info("tag activities is refreshing"),s()}),this.refresh=function(){s()}.bind(this);var c=function(){e()};this.showattention=function(){t.route("activity/new")}.bind(this);var l=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};$(window).resize(function(){e()}),seajs.use(["util"],function(){this.showFootterNav=function(e){$(e.target).toggleClass("footer_navs_but_hover");var t=$(e.target).attr("class");t.indexOf("footer_navs_but_hover")<0?$(".footer_navs_wary").slideUp(200):$(".footer_navs_wary").slideDown(200),e.stopPropagation()}.bind(this)}),seajs.use("util",function(){this.minenav=function(e){var t=$(e.target).attr("alt");$(".mine_nav div").removeClass("click_h"),$(e.target).addClass("click_h"),$(".nav_info").hide(),$("."+t).show(),$(window).scrollTop("0px")}.bind(this)})}),t.tag("navigator",'<div if="{show}">  <div class="home_gy" style="bottom:28px;"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home.png" class="border_radius img_home"> <a href="#activity/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav1.png" class="home_nav"></a> <a href="#travel/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav2.png" class="home_nav"></a> <a href="#mine/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav3.png" class="home_nav"></a> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_close.png" class="home_close"> </div> </div>',function(){self=this,this.show=!0,self.env=__app.settings.env.NODE_ENV,console.log("env="+self.env)}),t.tag("randomnotes-item",'<div class="com_wary"> <div class="com_img fl" ><img src= {initiator.headImgUrl} width="24" style="border-radius: 50em"></div> <div class="com_tit fl"> <div><span>{initiator.displayName}：</span> <p class="share_but" onclick="{ shareinfo }"><img riot-src="/{env}/images/share_but.png" class=""> <span class="vertical"> 分享</span></p></div> <p>{desc}</p> <div class="trave_img_wary"> <p each="{ pics }" ><img riot-src="{ parent.parseImg(meta, url) }" onclick="{parent.previewImg}" standard="{meta}"></p> </div> <p class="p2">{time} <a onclick="{deleteRandomNote}" alt="{_id}" class="delete" if="{initiator._id == window.__page.user.id}">删除</a></p> </div> <div class="clear"></div> </div>',function(){var e=this;e.env="production"==__app.settings.env.NODE_ENV?"public":"web",console.log("test "+e.env);var t=this.opts.tag.parent;e.currentRandomNote=e.opts.tag;var i=this.opts.tag.parent._id,n=this.opts.tag.crtOn,o=util.formatDate(n);e.time=o,e.parseImg=function(e,t){var i={meta:e,url:t};return util.parseImgUrl(i)
},this.previewImg=function(){e.currentRandomNote&&e.currentRandomNote.pics&&e.currentRandomNote.desc?util.wedgt.imgPreviewer($("#wary"),e.currentRandomNote.pics,{msg:e.currentRandomNote.desc}):e.currentRandomNote&&e.currentRandomNote.pics&&util.wedgt.imgPreviewer($("#wary"),e.currentRandomNote.pics,{msg:""})}.bind(this),this.deleteRandomNote=function(e){var n=$(e.target).attr("alt");console.log(n),$.ajax({type:"delete",url:__app.settings.api.url+"/pa/_"+i+"/deleteNote",data:{deleteId:n},dataType:"json",success:function(e){t.randomNotes=e.result,t.update()},error:function(){}}),e.stopPropagation()}.bind(this),this.shareinfo=function(){var e,t,i,n,o=this,a=this.parent.parent;if(a.shareinfo_detail(),o&&o.pics[0]&&o.pics[0]){var r={};r.images=[],r.images[0]={meta:o.pics[0].meta,url:o.pics[0].url},e="http://"+util.sharepic(r)}else e="/public/images/pabanner.png";t={title:'我在参加"'+a.item.name+'"活动,给小伙伴直播一下~~~~',desc:o.desc||a.item.name,link:__page.holder().getBaseUrl()+"/index#activity/_"+a._id+"?guest="+o._id,imgUrl:e},i=Object.create(t),i.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",a.item.name+"随记"||"",util.convertToValue(a.item.tags.type).join(",")||"",0])},n=Object.create(t),n.success=function(){_czc.push(["_trackEvent",util.getDc().PA.NAME+"("+util.getDc().PA.ACTION.SHARE+")",a.item.name+"随记"||"",util.convertToValue(a.item.tags.type).join(",")||"",0])},wx.onMenuShareAppMessage(i),wx.onMenuShareTimeline(n)}.bind(this)}),t.tag("travel-detail",'<div if="{!hidden}"> <div class="clear">&nbsp</div> <div class="xcgyimg border_radius" style="bottom:166px;" id="focus_on"><a href="http://mp.weixin.qq.com/s?__biz=MzA3MjIwNTk4Mg==&mid=204371161&idx=1&sn=51f61cc7634389147a7050a5a2e97a6f#rd"> <img src="/public/images/3_10.png" class="border_radius"></a></div> <div id="wary"> <div class="screen"> <img riot-src="{picshow}" class="img1"> <div class="scr tt_setheight_line"> <div class="scr_left">{item.name}</div> <div class="scr_right"><img src="/public/images/3_03.png"> <span class="likesum">{item.meta.likes}</span></div> </div> <div class="shadow tt_setheight"></div> </div> <div class="pun t-c set_width2"> {item.promotionWords} </div> <div class="pub_tit t-c m_top10"> 亮点 </div> <ul class="ld_ul1"> <li each="{ i in highlightsArray }">• {i}</li> </ul> <div class="pub_tit t-c m_top10"> 概览 </div> <div class="pun m_top10 set_width1"> {item.summary} </div> <div class="pub_tit t-c m_top10"> 介绍 </div> <div class="introduce nav_info"> <div class="detail_pub m_top10" each="{element,i in item.elements }"> <p class="FB"><img src="/public/images/3_01.png" class="img_width vertical"> <span class="vertical" >{i+1}.{element.name}</span></p> <travel-spot each="{element.spots}"></travel-spot> </div> <div class="xcgyimg border_radius xcgy_gz" id="showCatalog" onclick="{showcatalogue}"> <img src="/public/images/3_09.png" class="border_radius"> </div> </div> <div class="comment display_none nav_info" id="commentId"></div> <div class="detail_pub m_top10 position_rel border_radius_3px"> <a href="http://mp.weixin.qq.com/s?__biz=MzA3MjIwNTk4Mg==&mid=204371161&idx=1&sn=51f61cc7634389147a7050a5a2e97a6f#rd" class="butA"><img src="../public/images/guanzhu.jpg" alt="提示" class="border_radius_3px"> </a> </div>  <div class="footer_zw"></div> <div class="footer"> <p class="p1" style="width:33%;" onclick="{live}"><img src="/public/images/3_06.png" class="vertical nolike"> <img src="/public/images/3_06_h.png" class="vertical yeslike"> <span class="vertical">喜欢</span></p> <p class="p3" style="width:65%;" onclick="{shareinfo}"> <img src="/public/images/3_07.png" class="vertical" style="width:11px;"> <span class="vertical">分享</span> </p> </div> <div class="footer_shadow"></div> <div class="body_shadow display_none" onclick="{hideShadow}"></div> <div class="xcgy_wary display_none"> <div class="xcgy_wary_div1">介绍目录</div> <div class="xcgy_wary_div2"> <ul> <li each="{element,i in item.elements}"><p></p>{i+1}.{element.name} </li> </ul> </div> </div> <div class="comments_wary display_none border_radius"> <img src="/public/images/close.png" class="but_close_img"> <div class="comm_cz_sbss">随便说说</div> <textarea class="textarea border_radius"></textarea> <button class="comm_but border_radius">提交</button> </div> <div class="together display_none" id="clickXHidden" onclick="{hideShadow}"> <img src="/public/images/4_02.png" class="together_img"> </div> </div>  <div class="home_gy"> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home.png" class="border_radius img_home"> <a href="/index#activity/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav1.png" class="home_nav"></a> <a href="/index#travel/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav2.png" class="home_nav"></a> <a href="/index#mine/index"><img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_nav3.png" class="home_nav"></a> <img riot-src="/{env==\'production\'?\'public\':\'web\'}/images/home_close.png" class="home_close"> </div> </div>',function(){var e=nest.presentable(this);e.env=__app.settings.env.NODE_ENV;var t=nest.modelable({},{url:__app.settings.api.url+"/tt/"});e.footershow=!0,t._id=this._id=this.opts._id,t.on("fetch",function(t){console.info("activity is fetched"),e.item=t,e.id=t._id,e.name=t.name,e.promotionWords=t.promotionWords,e.highlightsArray=t.highlights.split("\r\n"),console.log(t.highlights),e.userId=window.__page.user.id,e.user=JSON.stringify(window.__page.user),e.picshow=util.calcImageUrl(e.item),e.likes=t.meta.likes,e.update({item:t}),e.trigger("ready",!0),e.trigger("view-route-to"),o(),r(),a()});var i=function(e){this.trigger("ready",!1),this._id=e||this._id,t.set("_id",this._id),t.fetch({action:"open"})}.bind(e),n=function(){this.trigger("ready",!1),t.fetch(this._id,{action:"refresh"})}.bind(e);this.on("mount",function(){console.info("tag activity is mounted")}),this.on("open",function(e){console.info("tag activity is opening"),i(e)}),this.on("refresh",function(){console.info("tag activity is refreshing"),n()}),this.on("show",function(t){t&&__page.holder().setTitle(e.item.name),$(window).scrollTop("0px")});var o=function(){var t=__page.user.meta.likes[e.id];t?$(".footer .p1").addClass("isLive"):$(".footer .p1").removeClass("isLive")},a=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};seajs.use("util",function(){this.live=function(){$.ajax({type:"GET",url:__app.settings.api.url+"/tt/_"+e.id+"/like",success:function(i){i.status&&(i.result>e.likes?__page.user.meta.likes[e.id]="11111":delete __page.user.meta.likes[e.id],t.fetch())}})}.bind(this),this.shareinfo=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".together").show().css("top",e+"px"),$(".body_shadow").show().css("height",n+"px")}.bind(this),this.showcatalogue=function(){var e=$(window).scrollTop(),t=$(window).height(),i=$("body").height(),n=t>i?t:i;$(".body_shadow").show().css("height",n+"px"),$(".xcgy_wary").show().css("top",e+20+"px")}.bind(this),this.hideShadow=function(){$(".body_shadow").hide(),$(".xcgy_wary").hide(),$(".comments_wary").hide(),$(".together").hide()}.bind(this)});var r=function(){wx.ready(function(){wx.onMenuShareAppMessage({title:e.name,desc:e.promotionWords,link:__page.holder().getBaseUrl()+"/index#travel/_"+e.id,imgUrl:e.picshow,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:e.name,link:__page.holder().getBaseUrl()+"/index#travel/_"+e.id,imgUrl:e.picshow,success:function(){},cancel:function(){}})})}}),t.tag("travel-index",'<div if="{!hidden}"> <div class="clear">&nbsp</div> <div class="recomm_wary"> <travel-item each="{items}" curritem="{this}"></travel-item> </div> <wechat-menu></wechat-menu> <navigator></navigator> </div>',function(){function e(){var e=Math.round(260*Math.round(.95*$("#wary").width())/600)-3;$(".img1").css("height",e+5)}var t=nest.presentable(this),i={sort:{updOn:-1},conditions:{}},n=this.collection=nest.collectable({},{url:__app.settings.api.url+"/tt/filter",filter:i});n.on("fetch",function(e){console.info("activities is fetched"),t.items=e,t.update(),t.trigger("ready",!0),t.trigger("view-route-to"),r(),s()});var o=function(e){this.trigger("ready",!1),this.filter=e||this.filter,n.fetch({filter:this.filter})}.bind(t),a=function(){this.trigger("ready",!1),n.fetch({filter:this.filter})}.bind(t);this.on("mount",function(){console.info("tag activities is mounted")}),this.on("open",function(e){console.info("tag activities is opening"),o(e)}),this.on("refresh",function(){console.info("tag activities is refreshing"),a()}),this.on("show",function(e){e&&__page.holder().setTitle("目的地"),$(window).scrollTop("0px")}),this.refresh=function(){a()}.bind(this);var r=function(){e()};$(window).resize(function(){e()});var s=function(){$(document).click(function(){$(".home_gy_set")&&($(".home_gy").removeClass("home_gy_set"),$(".home_gy").addClass("home_gy_set1"))}),$(".img_home").click(function(e){$(".home_gy").removeClass("home_gy_set1"),$(".home_gy").addClass("home_gy_set"),e.stopPropagation()})};wx.ready(function(){wx.onMenuShareAppMessage({title:"快乐种子",desc:"欢迎关注快乐种子，更多精彩活动等你参加！",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareTimeline({title:"快乐种子",link:__page.holder().getBaseUrl()+"/index#activity/index",imgUrl:__page.holder().getBaseUrl()+"/public/images/logo.png",success:function(){},cancel:function(){}})})}),t.tag("travel-item",'<div class="add_info"> <div class="screen recommended"> <a href="#travel/_{_id}"> <img riot-src="{picshow}" data-original="" class="activity-cover-img img1 border_radius"> </a> <div class="scr"> <div class="scr_left"> <p class="p1">{name}</p> <p class="p2">{promotionWords.length > 16 ? promotionWords.substring(0, 16)+\'...\':promotionWords}</p> </div> <div class="scr_right"> <p class="p1"><img src= "{path}"> <span>{likes}</span></p> </div> </div> <div class="shadow border_radius_shadow"></div> </div> </div>',function(){var e=this.opts.curritem,t=this,i=__page.user;t.env=__app.settings.env.NODE_ENV;var n="development"==t.env?"web":"public";t.picshow=util.calcImageUrl(e),t.likes="0",t.path="";var o=function(){if(i.id){var o=i.meta.likes[e._id];o?(t.path="/"+n+"/images/3_06_h.png",t.likes=e.meta.likes):(t.path="/"+n+"/images/3_03.png",t.likes=e.meta.likes)}else t.path="/"+n+"/images/3_03.png",t.likes=e.meta.likes;console.log(t.path)};this.on("mount",function(){console.info("tag activities is mounted"),o(),this.update()})}),t.tag("travel-spot",'<p each="{pic in pics}"> <img riot-src="{pic}" class="activity-cover-img img1 border_radius"> </p> <p>{desc}</p>',function(){}),t.tag("wechat-menu",'     <div class="xcgyimg_flash" id="focus_on"> <img riot-src="/{env}/images/logo_1.png"> </div> <a href="{wxhref}"><div class="xcgyimg_flash xcgyimg_1"></div></a>',function(){self=this;var e=function(){return"production"==__app.settings.env.NODE_ENV?"public":"web"};self.wxhref=util.getWxhref(),self.env=e(),console.log("env="+self.env)})}}),define("nest",["riot","jquery","util"],function(e,t,i){var n=e("riot"),o=e("jquery"),a=e("util"),r=document.getElementById("welcome_pag"),s={name:"thing",fetched:!1,idAttribute:"_id",url:"/thing/"},c=function(e,t){n.observable(e),e._m=a.extend({},s),e._m=a.extend(e._m,t);var i=e._m;e.fetched=function(e){return"undefined"==typeof e?i.fetched:i.fetched=e},e.has=function(e){return null!=this.get(e)},e.isNew=function(){return!this.has(i.idAttribute)},e.toObject=function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e},e.fetch=function(t,n){"undefined"==typeof n&&"object"==typeof t&&(n=t,t=null);var r=i;if(n&&(r=a.extend({},i))&&a.extend(r,n),t||(t=this[i.idAttribute]),!t)return console.error("fail to fetch: no id"),!1;var s=r.url+"_"+t,c=o.ajax({type:r.method||"GET",url:s});return c.done(function(t){t.status?e.trigger("fetch",t.result,n):e.trigger("fetch-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),c},e.append=function(t,n){"undefined"==typeof n&&"object"==typeof t&&(n=t,t=null);var r=i;if(n&&(r=a.extend({},i))&&a.extend(r,n),t||(t=this[i.idAttribute]),!t)return console.error("fail to append: no id"),!1;var s=r.url+"_"+t,c=o.ajax({type:r.method||"GET",url:s});return c.done(function(t){t.status?e.trigger("append",t.result,n):e.trigger("append-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),c};var r=function(e){var t=[];for(var i in e)t.push(i+"="+e[i]);return t.join("&")};return e.save=function(t,n){var s=i;n&&(s=a.extend({},i))&&a.extend(s,n);var c=this.isNew()?"POST":"PUT",l=this.isNew()?s.url:s.url+"_"+this[i.idAttribute],u=this.toObject(),d=r(u.query||{});""!=d&&(l+="?"+d);var p=o.ajax({type:c,url:l,data:u});return p.done(function(t){t.status?(e.fetched(!0),e.trigger("save",t.result,n)):e.trigger("save-error",t,n)}).fail(function(t,i,o){e.trigger("error",o,n)}).always(function(){}),p},e.get=function(e){return this[e]},e.set=function(e,t,i){if("myobj"==e&&"object"==typeof t)a.extend(this,t);else if("randomNotePic"==e&&"object"==typeof t)a.extend(this,t);else if("object"==t)this[e]=t;else{var n=this[e];this[e]=t,i&&i.silent||(this.trigger("change:"+e,this,t,n),this.trigger("change",this))}},e},l={name:"collection",url:"/thing/filter"},u=function(e,t){n.observable(e),e._m=a.extend({},l),e._m=a.extend(e._m,t);var i=e._m;return e.fetched=function(e){return"undefined"==typeof e?i.fetched:i.fetched=e},e.fetch=function(t){var n=i;t&&(n=a.extend({},i))&&a.extend(n,t);var r=i.filter||{},s=n.url,c=o.ajax({type:n.method||"POST",url:s,data:{filter:r}});return c.done(function(i){i.status?(e.items=i.result,e.fetched(!0),e.trigger("fetch",i.result,t)):e.trigger("fetch-error",i,t)}).fail(function(i,n,o){e.trigger("error",o,t)}).always(function(){}),c},e.append=function(t){var n=i;t&&(n=a.extend({},i))&&a.extend(n,t);var r=i.filter||{},s=n.url,c=o.ajax({type:n.method||"POST",url:s,data:{filter:r}});return c.done(function(i){i.status?(e.items=i.result,e.fetched(!0),e.trigger("append",i.result,t)):e.trigger("append-error",i,t)}).fail(function(i,n,o){e.trigger("error",o,t)}).always(function(){}),c},e},d=function(e){e.hidden=!0,e.ready=!1,e.mask=!1;var t=function(t){e.hidden=!t,e.mask=!t,e.update({hidden:e.hidden})};e.on("show",function(e){t(e)});var i=function(t){e.ready=t,e.update({ready:e.ready}),"undefined"!=typeof r&&null!==r.parentNode&&(r.parentNode.removeChild(r),document.body.style.background="white",document.body.style.overflow="auto")};return e.on("ready",function(e){i(e)}),e.on("refresh",function(){console.info("start refreshing")}),e},p={modelable:function(e,t){return c(e,t)},collectable:function(e,t){return u(e,t)},presentable:function(e,t){return d(e,t)},viewable:function(e){var t=a.extend({},e);return t.init=function(e){if(this.mount(e),!this.tag)throw new Error("tag is not set");this.tag.on("view-route-to",function(){t.parent.trigger("view-route-to",t)}),this.tag.on("view-route-back",function(){t.parent.trigger("view-route-back",t)}),this.tag.on("model-changed",function(e,i,n){t.parent.trigger("app-changed",e,i,n)})},t.setParent=function(e){this.parent=e},t.leave=function(e,t){e.tag.trigger("leave",t.tag)},t.enter=function(e,t){t.tag.trigger("enter",e&&e.tag,e&&e.context)},t.reenter=function(){this.tag.trigger("reenter",this.context)},t.open=function(){this.tag.trigger("open")},t.close=function(){this.tag.trigger("close")},t.show=function(e){this.tag.trigger("show",e)},t.equalRoute=function(e){{var t=this.context&&this.context.req.query.route;e&&e.context.req.query.route}return t=t},t},emptyFn:function(){}};i.exports=p}),define("page",function(e,t,i){var n=function(e){this.state=e};n.prototype.getUrl=function(){var e=window.location.hash||"";return this.state.url+e},n.prototype.getBaseUrl=function(){return this.state.baseUrl},n.prototype.setTitle=function(e){this.state.title=e,document&&(document.title=e)},n.prototype.saveTop=function(e){this.state.top=e,document&&(document.top=e)},n.prototype.getTop=function(){return this.state.top},n.prototype.getUser=function(){return this.state.user},n.prototype.getUser=function(){return this.state.user},__page.holder=function(){return __page._holder||(__page._holder=new n(__page)),__page._holder},i.exports=__page.holder()}),define("jquery",function(e,t,i){!function(e,t){"object"==typeof i&&"object"==typeof i.exports?i.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=G.type(e);return"function"===i||G.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(G.isFunction(t))return G.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return G.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(st.test(t))return G.filter(t,e,i);t=G.filter(t,e)}return G.grep(e,function(e){return V.call(t,e)>=0!==i})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=ht[e]={};return G.each(e.match(ft)||[],function(e,i){t[i]=!0}),t}function r(){Q.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1),G.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=G.expando+s.uid++}function c(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(bt,"-$1").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_t.test(i)?G.parseJSON(i):i}catch(o){}yt.set(e,t,i)}else i=void 0;return i}function l(){return!0}function u(){return!1}function d(){try{return Q.activeElement}catch(e){}}function p(e,t){return G.nodeName(e,"table")&&G.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function f(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var i=0,n=e.length;n>i;i++)mt.set(e[i],"globalEval",!t||mt.get(t[i],"globalEval"))}function v(e,t){var i,n,o,a,r,s,c,l;if(1===t.nodeType){if(mt.hasData(e)&&(a=mt.access(e),r=mt.set(t,a),l=a.events)){delete r.handle,r.events={};for(o in l)for(i=0,n=l[o].length;n>i;i++)G.event.add(t,o,l[o][i])}yt.hasData(e)&&(s=yt.access(e),c=G.extend({},s),yt.set(t,c))}}function m(e,t){var i=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&G.nodeName(e,t)?G.merge([e],i):i}function y(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Tt.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function _(t,i){var n,o=G(i.createElement(t)).appendTo(i.body),a=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(o[0]))?n.display:G.css(o[0],"display");return o.detach(),a}function b(e){var t=Q,i=Bt[e];return i||(i=_(e,t),"none"!==i&&i||(qt=(qt||G("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qt[0].contentDocument,t.write(),t.close(),i=_(e,t),qt.detach()),Bt[e]=i),i}function w(e,t,i){var n,o,a,r,s=e.style;return i=i||zt(e),i&&(r=i.getPropertyValue(t)||i[t]),i&&(""!==r||G.contains(e.ownerDocument,e)||(r=G.style(e,t)),Ut.test(r)&&Wt.test(t)&&(n=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=i.width,s.width=n,s.minWidth=o,s.maxWidth=a)),void 0!==r?r+"":r}function x(e,t){return{get:function(){return e()?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var i=t[0].toUpperCase()+t.slice(1),n=t,o=Yt.length;o--;)if(t=Yt[o]+i,t in e)return t;return n}function T(e,t,i){var n=Ht.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function C(e,t,i,n,o){for(var a=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>a;a+=2)"margin"===i&&(r+=G.css(e,i+xt[a],!0,o)),n?("content"===i&&(r-=G.css(e,"padding"+xt[a],!0,o)),"margin"!==i&&(r-=G.css(e,"border"+xt[a]+"Width",!0,o))):(r+=G.css(e,"padding"+xt[a],!0,o),"padding"!==i&&(r+=G.css(e,"border"+xt[a]+"Width",!0,o)));return r}function N(e,t,i){var n=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=zt(e),r="border-box"===G.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=w(e,t,a),(0>o||null==o)&&(o=e.style[t]),Ut.test(o))return o;n=r&&(Z.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+C(e,t,i||(r?"border":"content"),n,a)+"px"}function A(e,t){for(var i,n,o,a=[],r=0,s=e.length;s>r;r++)n=e[r],n.style&&(a[r]=mt.get(n,"olddisplay"),i=n.style.display,t?(a[r]||"none"!==i||(n.style.display=""),""===n.style.display&&kt(n)&&(a[r]=mt.access(n,"olddisplay",b(n.nodeName)))):(o=kt(n),"none"===i&&o||mt.set(n,"olddisplay",o?i:G.css(n,"display"))));for(r=0;s>r;r++)n=e[r],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[r]||"":"none"));return e}function $(e,t,i,n,o){return new $.prototype.init(e,t,i,n,o)}function I(){return setTimeout(function(){Zt=void 0}),Zt=G.now()}function S(e,t){var i,n=0,o={height:e};for(t=t?1:0;4>n;n+=2-t)i=xt[n],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function D(e,t,i){for(var n,o=(ii[t]||[]).concat(ii["*"]),a=0,r=o.length;r>a;a++)if(n=o[a].call(i,t,e))return n}function E(e,t,i){var n,o,a,r,s,c,l,u,d=this,p={},f=e.style,h=e.nodeType&&kt(e),g=mt.get(e,"fxshow");i.queue||(s=G._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,G.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],l=G.css(e,"display"),u="none"===l?mt.get(e,"olddisplay")||b(e.nodeName):l,"inline"===u&&"none"===G.css(e,"float")&&(f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}));for(n in t)if(o=t[n],Kt.exec(o)){if(delete t[n],a=a||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;h=!0}p[n]=g&&g[n]||G.style(e,n)}else l=void 0;if(G.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(f.display=l);else{g?"hidden"in g&&(h=g.hidden):g=mt.access(e,"fxshow",{}),a&&(g.hidden=!h),h?G(e).show():d.done(function(){G(e).hide()}),d.done(function(){var t;mt.remove(e,"fxshow");for(t in p)G.style(e,t,p[t])});for(n in p)r=D(h?g[n]:0,n,d),n in g||(g[n]=r.start,h&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function F(e,t){var i,n,o,a,r;for(i in e)if(n=G.camelCase(i),o=t[n],a=e[i],G.isArray(a)&&(o=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),r=G.cssHooks[n],r&&"expand"in r){a=r.expand(a),delete e[n];for(i in a)i in e||(e[i]=a[i],t[i]=o)}else t[n]=o}function j(e,t,i){var n,o,a=0,r=ti.length,s=G.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=Zt||I(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,a=1-n,r=0,c=l.tweens.length;c>r;r++)l.tweens[r].run(a);return s.notifyWith(e,[l,a,i]),1>a&&c?i:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:G.extend({},t),opts:G.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Zt||I(),duration:i.duration,tweens:[],createTween:function(t,i){var n=G.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){var i=0,n=t?l.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)l.tweens[i].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(F(u,l.opts.specialEasing);r>a;a++)if(n=ti[a].call(l,e,u,l.opts))return n;return G.map(u,D,l),G.isFunction(l.opts.start)&&l.opts.start.call(e,l),G.fx.timer(G.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function M(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,a=t.toLowerCase().match(ft)||[];if(G.isFunction(i))for(;n=a[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function O(e,t,i,n){function o(s){var c;return a[s]=!0,G.each(e[s]||[],function(e,s){var l=s(t,i,n);return"string"!=typeof l||r||a[l]?r?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),c}var a={},r=e===_i;return o(t.dataTypes[0])||!a["*"]&&o("*")}function L(e,t){var i,n,o=G.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&G.extend(!0,e,n),e}function P(e,t,i){for(var n,o,a,r,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){c.unshift(o);break}if(c[0]in i)a=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){a=o;break}r||(r=o)}a=a||r}return a?(a!==c[0]&&c.unshift(a),i[a]):void 0}function q(e,t,i,n){var o,a,r,s,c,l={},u=e.dataTypes.slice();if(u[1])for(r in e.converters)l[r.toLowerCase()]=e.converters[r];for(a=u.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=a,a=u.shift())if("*"===a)a=c;else if("*"!==c&&c!==a){if(r=l[c+" "+a]||l["* "+a],!r)for(o in l)if(s=o.split(" "),s[1]===a&&(r=l[c+" "+s[0]]||l["* "+s[0]])){r===!0?r=l[o]:l[o]!==!0&&(a=s[0],u.unshift(s[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+c+" to "+a}}}return{state:"success",data:t}}function B(e,t,i,n){var o;if(G.isArray(t))G.each(t,function(t,o){i||Ti.test(e)?n(e,o):B(e+"["+("object"==typeof o?t:"")+"]",o,i,n)});else if(i||"object"!==G.type(t))n(e,t);else for(o in t)B(e+"["+o+"]",t[o],i,n)}function W(e){return G.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],z=U.slice,R=U.concat,H=U.push,V=U.indexOf,J={},X=J.toString,Y=J.hasOwnProperty,Z={},Q=e.document,K="2.1.3",G=function(e,t){return new G.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,it=/-([\da-z])/gi,nt=function(e,t){return t.toUpperCase()};G.fn=G.prototype={jquery:K,constructor:G,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=G.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return G.each(this,e,t)},map:function(e){return this.pushStack(G.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:U.sort,splice:U.splice},G.extend=G.fn.extend=function(){var e,t,i,n,o,a,r=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[s]||{},s++),"object"==typeof r||G.isFunction(r)||(r={}),s===c&&(r=this,s--);c>s;s++)if(null!=(e=arguments[s]))for(t in e)i=r[t],n=e[t],r!==n&&(l&&n&&(G.isPlainObject(n)||(o=G.isArray(n)))?(o?(o=!1,a=i&&G.isArray(i)?i:[]):a=i&&G.isPlainObject(i)?i:{},r[t]=G.extend(l,a,n)):void 0!==n&&(r[t]=n));return r},G.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===G.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!G.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==G.type(e)||e.nodeType||G.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[X.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=G.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(it,nt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var o,a=0,r=e.length,s=i(e);if(n){if(s)for(;r>a&&(o=t.apply(e[a],n),o!==!1);a++);else for(a in e)if(o=t.apply(e[a],n),o===!1)break}else if(s)for(;r>a&&(o=t.call(e[a],a,e[a]),o!==!1);a++);else for(a in e)if(o=t.call(e[a],a,e[a]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?G.merge(n,"string"==typeof e?[e]:e):H.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:V.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;i>n;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n,o=[],a=0,r=e.length,s=!i;r>a;a++)n=!t(e[a],a),n!==s&&o.push(e[a]);return o},map:function(e,t,n){var o,a=0,r=e.length,s=i(e),c=[];if(s)for(;r>a;a++)o=t(e[a],a,n),null!=o&&c.push(o);else for(a in e)o=t(e[a],a,n),null!=o&&c.push(o);return R.apply([],c)},guid:1,proxy:function(e,t){var i,n,o;return"string"==typeof t&&(i=e[t],t=e,e=i),G.isFunction(e)?(n=z.call(arguments,2),o=function(){return e.apply(t||this,n.concat(z.call(arguments)))},o.guid=e.guid=e.guid||G.guid++,o):void 0},now:Date.now,support:Z}),G.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()});var ot=function(e){function t(e,t,i,n){var o,a,r,s,c,l,d,f,h,g;if((t?t.ownerDocument||t:B)!==E&&D(t),t=t||E,i=i||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return i;if(!n&&j){if(11!==s&&(o=yt.exec(e)))if(r=o[1]){if(9===s){if(a=t.getElementById(r),!a||!a.parentNode)return i;if(a.id===r)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(r))&&P(t,a)&&a.id===r)return i.push(a),i}else{if(o[2])return K.apply(i,t.getElementsByTagName(e)),i;if((r=o[3])&&w.getElementsByClassName)return K.apply(i,t.getElementsByClassName(r)),i}if(w.qsa&&(!M||!M.test(e))){if(f=d=q,h=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=C(e),(d=t.getAttribute("id"))?f=d.replace(bt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+p(l[c]);h=_t.test(e)&&u(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(i,h.querySelectorAll(g)),i}catch(v){}finally{d||t.removeAttribute("id")}}}return A(e.replace(ct,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>x.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[q]=!0,e}function o(e){var t=E.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var i=e.split("|"),n=e.length;n--;)x.attrHandle[i[n]]=t}function r(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function s(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function c(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(i,n){for(var o,a=e([],i.length,t),r=a.length;r--;)i[o=a[r]]&&(i[o]=!(n[o]=i[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function f(e,t,i){var n=t.dir,o=i&&"parentNode"===n,a=U++;return t.first?function(t,i,a){for(;t=t[n];)if(1===t.nodeType||o)return e(t,i,a)}:function(t,i,r){var s,c,l=[W,a];
if(r){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,i,r))return!0}else for(;t=t[n];)if(1===t.nodeType||o){if(c=t[q]||(t[q]={}),(s=c[n])&&s[0]===W&&s[1]===a)return l[2]=s[2];if(c[n]=l,l[2]=e(t,i,r))return!0}}}function h(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var o=0,a=i.length;a>o;o++)t(e,i[o],n);return n}function v(e,t,i,n,o){for(var a,r=[],s=0,c=e.length,l=null!=t;c>s;s++)(a=e[s])&&(!i||i(a,n,o))&&(r.push(a),l&&t.push(s));return r}function m(e,t,i,o,a,r){return o&&!o[q]&&(o=m(o)),a&&!a[q]&&(a=m(a,r)),n(function(n,r,s,c){var l,u,d,p=[],f=[],h=r.length,m=n||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?m:v(m,p,e,s,c),_=i?a||(n?e:h||o)?[]:r:y;if(i&&i(y,_,s,c),o)for(l=v(_,f),o(l,[],s,c),u=l.length;u--;)(d=l[u])&&(_[f[u]]=!(y[f[u]]=d));if(n){if(a||e){if(a){for(l=[],u=_.length;u--;)(d=_[u])&&l.push(y[u]=d);a(null,_=[],l,c)}for(u=_.length;u--;)(d=_[u])&&(l=a?et(n,d):p[u])>-1&&(n[l]=!(r[l]=d))}}else _=v(_===r?_.splice(h,_.length):_),a?a(null,r,_,c):K.apply(r,_)})}function y(e){for(var t,i,n,o=e.length,a=x.relative[e[0].type],r=a||x.relative[" "],s=a?1:0,c=f(function(e){return e===t},r,!0),l=f(function(e){return et(t,e)>-1},r,!0),u=[function(e,i,n){var o=!a&&(n||i!==$)||((t=i).nodeType?c(e,i,n):l(e,i,n));return t=null,o}];o>s;s++)if(i=x.relative[e[s].type])u=[f(h(u),i)];else{if(i=x.filter[e[s].type].apply(null,e[s].matches),i[q]){for(n=++s;o>n&&!x.relative[e[n].type];n++);return m(s>1&&h(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),i,n>s&&y(e.slice(s,n)),o>n&&y(e=e.slice(n)),o>n&&p(e))}u.push(i)}return h(u)}function _(e,i){var o=i.length>0,a=e.length>0,r=function(n,r,s,c,l){var u,d,p,f=0,h="0",g=n&&[],m=[],y=$,_=n||a&&x.find.TAG("*",l),b=W+=null==y?1:Math.random()||.1,w=_.length;for(l&&($=r!==E&&r);h!==w&&null!=(u=_[h]);h++){if(a&&u){for(d=0;p=e[d++];)if(p(u,r,s)){c.push(u);break}l&&(W=b)}o&&((u=!p&&u)&&f--,n&&g.push(u))}if(f+=h,o&&h!==f){for(d=0;p=i[d++];)p(g,m,r,s);if(n){if(f>0)for(;h--;)g[h]||m[h]||(m[h]=Z.call(c));m=v(m)}K.apply(c,m),l&&!n&&m.length>0&&f+i.length>1&&t.uniqueSort(c)}return l&&(W=b,$=y),g};return o?n(r):r}var b,w,x,k,T,C,N,A,$,I,S,D,E,F,j,M,O,L,P,q="sizzle"+1*new Date,B=e.document,W=0,U=0,z=i(),R=i(),H=i(),V=function(e,t){return e===t&&(S=!0),0},J=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,Q=Y.push,K=Y.push,G=Y.slice,et=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=nt.replace("w","w#"),at="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",rt=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+at+")*)|.*)\\)|)",st=new RegExp(it+"+","g"),ct=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),dt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),pt=new RegExp(rt),ft=new RegExp("^"+ot+"$"),ht={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},kt=function(){D()};try{K.apply(Y=G.call(B.childNodes),B.childNodes),Y[B.childNodes.length].nodeType}catch(Tt){K={apply:Y.length?function(e,t){Q.apply(e,G.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:B;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,F=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",kt,!1):i.attachEvent&&i.attachEvent("onunload",kt)),j=!T(n),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(n.getElementsByClassName),w.getById=o(function(e){return F.appendChild(e).id=q,!n.getElementsByName||!n.getElementsByName(q).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&j){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[o++];)1===i.nodeType&&n.push(i);return n}return a},x.find.CLASS=w.getElementsByClassName&&function(e,t){return j?t.getElementsByClassName(e):void 0},O=[],M=[],(w.qsa=mt.test(n.querySelectorAll))&&(o(function(e){F.appendChild(e).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+it+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+q+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+q+"+*").length||M.push(".#.+[+~]")}),o(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=mt.test(L=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&o(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",rt)}),M=M.length&&new RegExp(M.join("|")),O=O.length&&new RegExp(O.join("|")),t=mt.test(F.compareDocumentPosition),P=t||mt.test(F.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return S=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===B&&P(B,e)?-1:t===n||t.ownerDocument===B&&P(B,t)?1:I?et(I,e)-et(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return S=!0,0;var i,o=0,a=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:I?et(I,e)-et(I,t):0;if(a===s)return r(e,t);for(i=e;i=i.parentNode;)c.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;c[o]===l[o];)o++;return o?r(c[o],l[o]):c[o]===B?-1:l[o]===B?1:0},n):E},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==E&&D(e),i=i.replace(dt,"='$1']"),!(!w.matchesSelector||!j||O&&O.test(i)||M&&M.test(i)))try{var n=L.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(o){}return t(i,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&D(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&D(e);var i=x.attrHandle[t.toLowerCase()],n=i&&X.call(x.attrHandle,t.toLowerCase())?i(e,t,!j):void 0;return void 0!==n?n:w.attributes||!j?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,o=0;if(S=!w.detectDuplicates,I=!w.sortStable&&e.slice(0),e.sort(V),S){for(;t=e[o++];)t===e[o]&&(n=i.push(o));for(;n--;)e.splice(i[n],1)}return I=null,e},k=t.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},x=t.selectors={cacheLength:50,createPseudo:n,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&pt.test(i)&&(t=C(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(o){var a=t.attr(o,e);return null==a?"!="===i:i?(a+="","="===i?a===n:"!="===i?a!==n:"^="===i?n&&0===a.indexOf(n):"*="===i?n&&a.indexOf(n)>-1:"$="===i?n&&a.slice(-n.length)===n:"~="===i?(" "+a.replace(st," ")+" ").indexOf(n)>-1:"|="===i?a===n||a.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,c){var l,u,d,p,f,h,g=a!==r?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(v){if(a){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?v.firstChild:v.lastChild],r&&y){for(u=v[q]||(v[q]={}),l=u[e]||[],f=l[0]===W&&l[1],p=l[0]===W&&l[2],d=f&&v.childNodes[f];d=++f&&d&&d[g]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[W,f,p];break}}else if(y&&(l=(t[q]||(t[q]={}))[e])&&l[0]===W)p=l[1];else for(;(d=++f&&d&&d[g]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++p||(y&&((d[q]||(d[q]={}))[e]=[W,p]),d!==t)););return p-=o,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(e,i){var o,a=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[q]?a(i):a.length>1?(o=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=a(e,i),r=o.length;r--;)n=et(e,o[r]),e[n]=!(t[n]=o[r])}):function(e){return a(e,0,o)}):a}},pseudos:{not:n(function(e){var t=[],i=[],o=N(e.replace(ct,"$1"));return o[q]?n(function(e,t,i,n){for(var a,r=o(e,null,n,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))}):function(e,n,a){return t[0]=e,o(t,null,a,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(wt,xt),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,xt).toLowerCase(),function(t){var i;do if(i=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return vt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[0>i?i+t:i]}),even:l(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:l(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=c(b);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,C=t.tokenize=function(e,i){var n,o,a,r,s,c,l,u=R[e+" "];if(u)return i?0:u.slice(0);for(s=e,c=[],l=x.preFilter;s;){(!n||(o=lt.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),c.push(a=[])),n=!1,(o=ut.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(ct," ")}),s=s.slice(n.length));for(r in x.filter)!(o=ht[r].exec(s))||l[r]&&!(o=l[r](o))||(n=o.shift(),a.push({value:n,type:r,matches:o}),s=s.slice(n.length));if(!n)break}return i?s.length:s?t.error(e):R(e,c).slice(0)},N=t.compile=function(e,t){var i,n=[],o=[],a=H[e+" "];if(!a){for(t||(t=C(e)),i=t.length;i--;)a=y(t[i]),a[q]?n.push(a):o.push(a);a=H(e,_(o,n)),a.selector=e}return a},A=t.select=function(e,t,i,n){var o,a,r,s,c,l="function"==typeof e&&e,d=!n&&C(e=l.selector||e);if(i=i||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&w.getById&&9===t.nodeType&&j&&x.relative[a[1].type]){if(t=(x.find.ID(r.matches[0].replace(wt,xt),t)||[])[0],!t)return i;l&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=ht.needsContext.test(e)?0:a.length;o--&&(r=a[o],!x.relative[s=r.type]);)if((c=x.find[s])&&(n=c(r.matches[0].replace(wt,xt),_t.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(o,1),e=n.length&&p(a),!e)return K.apply(i,n),i;break}}return(l||N(e,d))(n,t,!j,i,_t.test(e)&&u(t.parentNode)||t),i},w.sortStable=q.split("").sort(V).join("")===q,w.detectDuplicates=!!S,D(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(tt,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);G.find=ot,G.expr=ot.selectors,G.expr[":"]=G.expr.pseudos,G.unique=ot.uniqueSort,G.text=ot.getText,G.isXMLDoc=ot.isXML,G.contains=ot.contains;var at=G.expr.match.needsContext,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;G.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?G.find.matchesSelector(n,e)?[n]:[]:G.find.matches(e,G.grep(t,function(e){return 1===e.nodeType}))},G.fn.extend({find:function(e){var t,i=this.length,n=[],o=this;if("string"!=typeof e)return this.pushStack(G(e).filter(function(){for(t=0;i>t;t++)if(G.contains(o[t],this))return!0}));for(t=0;i>t;t++)G.find(e,o[t],n);return n=this.pushStack(i>1?G.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&at.test(e)?G(e):e||[],!1).length}});var ct,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=G.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:lt.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||ct).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof G?t[0]:t,G.merge(this,G.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),rt.test(i[1])&&G.isPlainObject(t))for(i in t)G.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return n=Q.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):G.isFunction(e)?"undefined"!=typeof ct.ready?ct.ready(e):e(G):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),G.makeArray(e,this))};ut.prototype=G.fn,ct=G(Q);var dt=/^(?:parents|prev(?:Until|All))/,pt={children:!0,contents:!0,next:!0,prev:!0};G.extend({dir:function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&G(e).is(i))break;n.push(e)}return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),G.fn.extend({has:function(e){var t=G(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(G.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,o=this.length,a=[],r=at.test(e)||"string"!=typeof e?G(e,t||this.context):0;o>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&G.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?G.unique(a):a)},index:function(e){return e?"string"==typeof e?V.call(G(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(G.unique(G.merge(this.get(),G(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),G.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return G.dir(e,"parentNode")},parentsUntil:function(e,t,i){return G.dir(e,"parentNode",i)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return G.dir(e,"nextSibling")},prevAll:function(e){return G.dir(e,"previousSibling")},nextUntil:function(e,t,i){return G.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return G.dir(e,"previousSibling",i)},siblings:function(e){return G.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return G.sibling(e.firstChild)},contents:function(e){return e.contentDocument||G.merge([],e.childNodes)}},function(e,t){G.fn[e]=function(i,n){var o=G.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=G.filter(n,o)),this.length>1&&(pt[e]||G.unique(o),dt.test(e)&&o.reverse()),this.pushStack(o)}});var ft=/\S+/g,ht={};G.Callbacks=function(e){e="string"==typeof e?ht[e]||a(e):G.extend({},e);var t,i,n,o,r,s,c=[],l=!e.once&&[],u=function(a){for(t=e.memory&&a,i=!0,s=o||0,o=0,r=c.length,n=!0;c&&r>s;s++)if(c[s].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}n=!1,c&&(l?l.length&&u(l.shift()):t?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function a(t){G.each(t,function(t,i){var n=G.type(i);"function"===n?e.unique&&d.has(i)||c.push(i):i&&i.length&&"string"!==n&&a(i)})}(arguments),n?r=c.length:t&&(o=i,u(t))}return this},remove:function(){return c&&G.each(arguments,function(e,t){for(var i;(i=G.inArray(t,c,i))>-1;)c.splice(i,1),n&&(r>=i&&r--,s>=i&&s--)}),this},has:function(e){return e?G.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=l=t=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,t||d.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||i&&!l||(t=t||[],t=[e,t.slice?t.slice():t],n?l.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},G.extend({Deferred:function(e){var t=[["resolve","done",G.Callbacks("once memory"),"resolved"],["reject","fail",G.Callbacks("once memory"),"rejected"],["notify","progress",G.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return G.Deferred(function(i){G.each(t,function(t,a){var r=G.isFunction(e[t])&&e[t];o[a[1]](function(){var e=r&&r.apply(this,arguments);e&&G.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[a[0]+"With"](this===n?i.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?G.extend(e,n):n}},o={};return n.pipe=n.then,G.each(t,function(e,a){var r=a[2],s=a[3];n[a[1]]=r.add,s&&r.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?n:this,arguments),this},o[a[0]+"With"]=r.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,a=z.call(arguments),r=a.length,s=1!==r||e&&G.isFunction(e.promise)?r:0,c=1===s?e:G.Deferred(),l=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?z.call(arguments):o,n===t?c.notifyWith(i,n):--s||c.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)a[o]&&G.isFunction(a[o].promise)?a[o].promise().done(l(o,n,a)).fail(c.reject).progress(l(o,i,t)):--s;return s||c.resolveWith(n,a),c.promise()}});var gt;G.fn.ready=function(e){return G.ready.promise().done(e),this},G.extend({isReady:!1,readyWait:1,holdReady:function(e){e?G.readyWait++:G.ready(!0)},ready:function(e){(e===!0?--G.readyWait:G.isReady)||(G.isReady=!0,e!==!0&&--G.readyWait>0||(gt.resolveWith(Q,[G]),G.fn.triggerHandler&&(G(Q).triggerHandler("ready"),G(Q).off("ready"))))}}),G.ready.promise=function(t){return gt||(gt=G.Deferred(),"complete"===Q.readyState?setTimeout(G.ready):(Q.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1))),gt.promise(t)},G.ready.promise();var vt=G.access=function(e,t,i,n,o,a,r){var s=0,c=e.length,l=null==i;if("object"===G.type(i)){o=!0;for(s in i)G.access(e,t,s,i[s],!0,a,r)}else if(void 0!==n&&(o=!0,G.isFunction(n)||(r=!0),l&&(r?(t.call(e,n),t=null):(l=t,t=function(e,t,i){return l.call(G(e),i)})),t))for(;c>s;s++)t(e[s],i,r?n:n.call(e[s],s,t(e[s],i)));return o?e:l?t.call(e):c?t(e[0],i):a};G.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=G.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},i=e[this.expando];if(!i){i=s.uid++;try{t[this.expando]={value:i},Object.defineProperties(e,t)}catch(n){t[this.expando]=i,G.extend(e,t)}}return this.cache[i]||(this.cache[i]={}),i},set:function(e,t,i){var n,o=this.key(e),a=this.cache[o];if("string"==typeof t)a[t]=i;else if(G.isEmptyObject(a))G.extend(this.cache[o],t);else for(n in t)a[n]=t[n];return a},get:function(e,t){var i=this.cache[this.key(e)];return void 0===t?i:i[t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,G.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,o,a=this.key(e),r=this.cache[a];if(void 0===t)this.cache[a]={};else{G.isArray(t)?n=t.concat(t.map(G.camelCase)):(o=G.camelCase(t),t in r?n=[t,o]:(n=o,n=n in r?[n]:n.match(ft)||[])),i=n.length;for(;i--;)delete r[n[i]]}},hasData:function(e){return!G.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var mt=new s,yt=new s,_t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;G.extend({hasData:function(e){return yt.hasData(e)||mt.hasData(e)},data:function(e,t,i){return yt.access(e,t,i)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,i){return mt.access(e,t,i)},_removeData:function(e,t){mt.remove(e,t)}}),G.fn.extend({data:function(e,t){var i,n,o,a=this[0],r=a&&a.attributes;if(void 0===e){if(this.length&&(o=yt.get(a),1===a.nodeType&&!mt.get(a,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=G.camelCase(n.slice(5)),c(a,n,o[n])));mt.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){yt.set(this,e)}):vt(this,function(t){var i,n=G.camelCase(e);if(a&&void 0===t){if(i=yt.get(a,e),void 0!==i)return i;if(i=yt.get(a,n),void 0!==i)return i;if(i=c(a,n,void 0),void 0!==i)return i}else this.each(function(){var i=yt.get(this,n);yt.set(this,n,t),-1!==e.indexOf("-")&&void 0!==i&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),G.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=mt.get(e,t),i&&(!n||G.isArray(i)?n=mt.access(e,t,G.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=G.queue(e,t),n=i.length,o=i.shift(),a=G._queueHooks(e,t),r=function(){G.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete a.stop,o.call(e,r,a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return mt.get(e,i)||mt.access(e,i,{empty:G.Callbacks("once memory").add(function(){mt.remove(e,[t+"queue",i])})})}}),G.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?G.queue(this[0],e):void 0===t?this:this.each(function(){var i=G.queue(this,e,t);G._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&G.dequeue(this,e)})},dequeue:function(e){return this.each(function(){G.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=G.Deferred(),a=this,r=this.length,s=function(){--n||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)i=mt.get(a[r],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===G.css(e,"display")||!G.contains(e.ownerDocument,e)},Tt=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),Z.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ct="undefined";Z.focusinBubbles="onfocusin"in e;var Nt=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,$t=/^(?:focusinfocus|focusoutblur)$/,It=/^([^.]*)(?:\.(.+)|)$/;G.event={global:{},add:function(e,t,i,n,o){var a,r,s,c,l,u,d,p,f,h,g,v=mt.get(e);if(v)for(i.handler&&(a=i,i=a.handler,o=a.selector),i.guid||(i.guid=G.guid++),(c=v.events)||(c=v.events={}),(r=v.handle)||(r=v.handle=function(t){return typeof G!==Ct&&G.event.triggered!==t.type?G.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ft)||[""],l=t.length;l--;)s=It.exec(t[l])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(d=G.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=G.event.special[f]||{},u=G.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&G.expr.match.needsContext.test(o),namespace:h.join(".")},a),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,n,h,r)!==!1||e.addEventListener&&e.addEventListener(f,r,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,u):p.push(u),G.event.global[f]=!0)},remove:function(e,t,i,n,o){var a,r,s,c,l,u,d,p,f,h,g,v=mt.hasData(e)&&mt.get(e);if(v&&(c=v.events)){for(t=(t||"").match(ft)||[""],l=t.length;l--;)if(s=It.exec(t[l])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(d=G.event.special[f]||{},f=(n?d.delegateType:d.bindType)||f,p=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=p.length;a--;)u=p[a],!o&&g!==u.origType||i&&i.guid!==u.guid||s&&!s.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(a,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));r&&!p.length&&(d.teardown&&d.teardown.call(e,h,v.handle)!==!1||G.removeEvent(e,f,v.handle),delete c[f])}else for(f in c)G.event.remove(e,f+t[l],i,n,!0);G.isEmptyObject(c)&&(delete v.handle,mt.remove(e,"events"))}},trigger:function(t,i,n,o){var a,r,s,c,l,u,d,p=[n||Q],f=Y.call(t,"type")?t.type:t,h=Y.call(t,"namespace")?t.namespace.split("."):[];if(r=s=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!$t.test(f+G.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),l=f.indexOf(":")<0&&"on"+f,t=t[G.expando]?t:new G.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:G.makeArray(i,[t]),d=G.event.special[f]||{},o||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!o&&!d.noBubble&&!G.isWindow(n)){for(c=d.delegateType||f,$t.test(c+f)||(r=r.parentNode);r;r=r.parentNode)p.push(r),s=r;s===(n.ownerDocument||Q)&&p.push(s.defaultView||s.parentWindow||e)}for(a=0;(r=p[a++])&&!t.isPropagationStopped();)t.type=a>1?c:d.bindType||f,u=(mt.get(r,"events")||{})[t.type]&&mt.get(r,"handle"),u&&u.apply(r,i),u=l&&r[l],u&&u.apply&&G.acceptData(r)&&(t.result=u.apply(r,i),t.result===!1&&t.preventDefault());return t.type=f,o||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),i)!==!1||!G.acceptData(n)||l&&G.isFunction(n[f])&&!G.isWindow(n)&&(s=n[l],s&&(n[l]=null),G.event.triggered=f,n[f](),G.event.triggered=void 0,s&&(n[l]=s)),t.result}},dispatch:function(e){e=G.event.fix(e);var t,i,n,o,a,r=[],s=z.call(arguments),c=(mt.get(this,"events")||{})[e.type]||[],l=G.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(r=G.event.handlers.call(this,e,c),t=0;(o=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((G.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,o,a,r=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(n=[],i=0;s>i;i++)a=t[i],o=a.selector+" ",void 0===n[o]&&(n[o]=a.needsContext?G(o,this).index(c)>=0:G.find(o,this,null,[c]).length),n[o]&&n.push(a);n.length&&r.push({elem:c,handlers:n})}return s<t.length&&r.push({elem:this,handlers:t.slice(s)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e
}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,o=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[G.expando])return e;var t,i,n,o=e.type,a=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=At.test(o)?this.mouseHooks:Nt.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,e=new G.Event(a),t=n.length;t--;)i=n[t],e[i]=a[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&G.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return G.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var o=G.extend(new G.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?G.event.trigger(o,null,t):G.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},G.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)},G.Event=function(e,t){return this instanceof G.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:u):this.type=e,t&&G.extend(this,t),this.timeStamp=e&&e.timeStamp||G.now(),this[G.expando]=!0,void 0):new G.Event(e,t)},G.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},G.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){G.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==n&&!G.contains(n,o))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),Z.focusinBubbles||G.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){G.event.simulate(t,e.target,G.event.fix(e),!0)};G.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=mt.access(n,t);o||n.addEventListener(e,i,!0),mt.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=mt.access(n,t)-1;o?mt.access(n,t,o):(n.removeEventListener(e,i,!0),mt.remove(n,t))}}}),G.fn.extend({on:function(e,t,i,n,o){var a,r;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(r in e)this.on(r,t,i,e[r],o);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=u;else if(!n)return this;return 1===o&&(a=n,n=function(e){return G().off(e),a.apply(this,arguments)},n.guid=a.guid||(a.guid=G.guid++)),this.each(function(){G.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,G(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=u),this.each(function(){G.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){G.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?G.event.trigger(e,t,i,!0):void 0}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Dt=/<([\w:]+)/,Et=/<|&#?\w+;/,Ft=/<(?:script|style|link)/i,jt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^$|\/(?:java|ecma)script/i,Ot=/^true\/(.*)/,Lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pt.optgroup=Pt.option,Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td,G.extend({clone:function(e,t,i){var n,o,a,r,s=e.cloneNode(!0),c=G.contains(e.ownerDocument,e);if(!(Z.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||G.isXMLDoc(e)))for(r=m(s),a=m(e),n=0,o=a.length;o>n;n++)y(a[n],r[n]);if(t)if(i)for(a=a||m(e),r=r||m(s),n=0,o=a.length;o>n;n++)v(a[n],r[n]);else v(e,s);return r=m(s,"script"),r.length>0&&g(r,!c&&m(e,"script")),s},buildFragment:function(e,t,i,n){for(var o,a,r,s,c,l,u=t.createDocumentFragment(),d=[],p=0,f=e.length;f>p;p++)if(o=e[p],o||0===o)if("object"===G.type(o))G.merge(d,o.nodeType?[o]:o);else if(Et.test(o)){for(a=a||u.appendChild(t.createElement("div")),r=(Dt.exec(o)||["",""])[1].toLowerCase(),s=Pt[r]||Pt._default,a.innerHTML=s[1]+o.replace(St,"<$1></$2>")+s[2],l=s[0];l--;)a=a.lastChild;G.merge(d,a.childNodes),a=u.firstChild,a.textContent=""}else d.push(t.createTextNode(o));for(u.textContent="",p=0;o=d[p++];)if((!n||-1===G.inArray(o,n))&&(c=G.contains(o.ownerDocument,o),a=m(u.appendChild(o),"script"),c&&g(a),i))for(l=0;o=a[l++];)Mt.test(o.type||"")&&i.push(o);return u},cleanData:function(e){for(var t,i,n,o,a=G.event.special,r=0;void 0!==(i=e[r]);r++){if(G.acceptData(i)&&(o=i[mt.expando],o&&(t=mt.cache[o]))){if(t.events)for(n in t.events)a[n]?G.event.remove(i,n):G.removeEvent(i,n,t.handle);mt.cache[o]&&delete mt.cache[o]}delete yt.cache[i[yt.expando]]}}}),G.fn.extend({text:function(e){return vt(this,function(e){return void 0===e?G.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?G.filter(e,this):this,o=0;null!=(i=n[o]);o++)t||1!==i.nodeType||G.cleanData(m(i)),i.parentNode&&(t&&G.contains(i.ownerDocument,i)&&g(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(G.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return G.clone(this,e,t)})},html:function(e){return vt(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ft.test(e)&&!Pt[(Dt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(St,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(G.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,G.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=R.apply([],e);var i,n,o,a,r,s,c=0,l=this.length,u=this,d=l-1,p=e[0],g=G.isFunction(p);if(g||l>1&&"string"==typeof p&&!Z.checkClone&&jt.test(p))return this.each(function(i){var n=u.eq(i);g&&(e[0]=p.call(this,i,n.html())),n.domManip(e,t)});if(l&&(i=G.buildFragment(e,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(o=G.map(m(i,"script"),f),a=o.length;l>c;c++)r=i,c!==d&&(r=G.clone(r,!0,!0),a&&G.merge(o,m(r,"script"))),t.call(this[c],r,c);if(a)for(s=o[o.length-1].ownerDocument,G.map(o,h),c=0;a>c;c++)r=o[c],Mt.test(r.type||"")&&!mt.access(r,"globalEval")&&G.contains(s,r)&&(r.src?G._evalUrl&&G._evalUrl(r.src):G.globalEval(r.textContent.replace(Lt,"")))}return this}}),G.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){G.fn[e]=function(e){for(var i,n=[],o=G(e),a=o.length-1,r=0;a>=r;r++)i=r===a?this:this.clone(!0),G(o[r])[t](i),H.apply(n,i.get());return this.pushStack(n)}});var qt,Bt={},Wt=/^margin/,Ut=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),zt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",o.appendChild(a);var t=e.getComputedStyle(r,null);i="1%"!==t.top,n="4px"===t.width,o.removeChild(a)}var i,n,o=Q.documentElement,a=Q.createElement("div"),r=Q.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===r.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(r),e.getComputedStyle&&G.extend(Z,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,i=r.appendChild(Q.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",o.appendChild(a),t=!parseFloat(e.getComputedStyle(i,null).marginRight),o.removeChild(a),r.removeChild(i),t}}))}(),G.swap=function(e,t,i,n){var o,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];o=i.apply(e,n||[]);for(a in t)e.style[a]=r[a];return o};var Rt=/^(none|table(?!-c[ea]).+)/,Ht=new RegExp("^("+wt+")(.*)$","i"),Vt=new RegExp("^([+-])=("+wt+")","i"),Jt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","O","Moz","ms"];G.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=w(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,s=G.camelCase(t),c=e.style;return t=G.cssProps[s]||(G.cssProps[s]=k(c,s)),r=G.cssHooks[t]||G.cssHooks[s],void 0===i?r&&"get"in r&&void 0!==(o=r.get(e,!1,n))?o:c[t]:(a=typeof i,"string"===a&&(o=Vt.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(G.css(e,t)),a="number"),null!=i&&i===i&&("number"!==a||G.cssNumber[s]||(i+="px"),Z.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(c[t]=i)),void 0)}},css:function(e,t,i,n){var o,a,r,s=G.camelCase(t);return t=G.cssProps[s]||(G.cssProps[s]=k(e.style,s)),r=G.cssHooks[t]||G.cssHooks[s],r&&"get"in r&&(o=r.get(e,!0,i)),void 0===o&&(o=w(e,t,n)),"normal"===o&&t in Xt&&(o=Xt[t]),""===i||i?(a=parseFloat(o),i===!0||G.isNumeric(a)?a||0:o):o}}),G.each(["height","width"],function(e,t){G.cssHooks[t]={get:function(e,i,n){return i?Rt.test(G.css(e,"display"))&&0===e.offsetWidth?G.swap(e,Jt,function(){return N(e,t,n)}):N(e,t,n):void 0},set:function(e,i,n){var o=n&&zt(e);return T(e,i,n?C(e,t,n,"border-box"===G.css(e,"boxSizing",!1,o),o):0)}}}),G.cssHooks.marginRight=x(Z.reliableMarginRight,function(e,t){return t?G.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),G.each({margin:"",padding:"",border:"Width"},function(e,t){G.cssHooks[e+t]={expand:function(i){for(var n=0,o={},a="string"==typeof i?i.split(" "):[i];4>n;n++)o[e+xt[n]+t]=a[n]||a[n-2]||a[0];return o}},Wt.test(e)||(G.cssHooks[e+t].set=T)}),G.fn.extend({css:function(e,t){return vt(this,function(e,t,i){var n,o,a={},r=0;if(G.isArray(t)){for(n=zt(e),o=t.length;o>r;r++)a[t[r]]=G.css(e,t[r],!1,n);return a}return void 0!==i?G.style(e,t,i):G.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?G(this).show():G(this).hide()})}}),G.Tween=$,$.prototype={constructor:$,init:function(e,t,i,n,o,a){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(G.cssNumber[i]?"":"px")},cur:function(){var e=$.propHooks[this.prop];return e&&e.get?e.get(this):$.propHooks._default.get(this)},run:function(e){var t,i=$.propHooks[this.prop];return this.pos=t=this.options.duration?G.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=G.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){G.fx.step[e.prop]?G.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[G.cssProps[e.prop]]||G.cssHooks[e.prop])?G.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},G.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},G.fx=$.prototype.init,G.fx.step={};var Zt,Qt,Kt=/^(?:toggle|show|hide)$/,Gt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[E],ii={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),o=Gt.exec(t),a=o&&o[3]||(G.cssNumber[e]?"":"px"),r=(G.cssNumber[e]||"px"!==a&&+n)&&Gt.exec(G.css(i.elem,e)),s=1,c=20;if(r&&r[3]!==a){a=a||r[3],o=o||[],r=+n||1;do s=s||".5",r/=s,G.style(i.elem,e,r+a);while(s!==(s=i.cur()/n)&&1!==s&&--c)}return o&&(r=i.start=+r||+n||0,i.unit=a,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};G.Animation=G.extend(j,{tweener:function(e,t){G.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;o>n;n++)i=e[n],ii[i]=ii[i]||[],ii[i].unshift(t)},prefilter:function(e,t){t?ti.unshift(e):ti.push(e)}}),G.speed=function(e,t,i){var n=e&&"object"==typeof e?G.extend({},e):{complete:i||!i&&t||G.isFunction(e)&&e,duration:e,easing:i&&t||t&&!G.isFunction(t)&&t};return n.duration=G.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in G.fx.speeds?G.fx.speeds[n.duration]:G.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){G.isFunction(n.old)&&n.old.call(this),n.queue&&G.dequeue(this,n.queue)},n},G.fn.extend({fadeTo:function(e,t,i,n){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=G.isEmptyObject(e),a=G.speed(t,i,n),r=function(){var t=j(this,G.extend({},e),a);(o||mt.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||a.queue===!1?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=G.timers,r=mt.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ei.test(o)&&n(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(i),t=!1,a.splice(o,1));(t||!i)&&G.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=mt.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],a=G.timers,r=n?n.length:0;for(i.finish=!0,G.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;r>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),G.each(["toggle","show","hide"],function(e,t){var i=G.fn[t];G.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(S(t,!0),e,n,o)}}),G.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){G.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),G.timers=[],G.fx.tick=function(){var e,t=0,i=G.timers;for(Zt=G.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||G.fx.stop(),Zt=void 0},G.fx.timer=function(e){G.timers.push(e),e()?G.fx.start():G.timers.pop()},G.fx.interval=13,G.fx.start=function(){Qt||(Qt=setInterval(G.fx.tick,G.fx.interval))},G.fx.stop=function(){clearInterval(Qt),Qt=null},G.fx.speeds={slow:600,fast:200,_default:400},G.fn.delay=function(e,t){return e=G.fx?G.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",Z.checkOn=""!==e.value,Z.optSelected=i.selected,t.disabled=!0,Z.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",Z.radioValue="t"===e.value}();var ni,oi,ai=G.expr.attrHandle;G.fn.extend({attr:function(e,t){return vt(this,G.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){G.removeAttr(this,e)})}}),G.extend({attr:function(e,t,i){var n,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Ct?G.prop(e,t,i):(1===a&&G.isXMLDoc(e)||(t=t.toLowerCase(),n=G.attrHooks[t]||(G.expr.match.bool.test(t)?oi:ni)),void 0===i?n&&"get"in n&&null!==(o=n.get(e,t))?o:(o=G.find.attr(e,t),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(e,i,t))?o:(e.setAttribute(t,i+""),i):(G.removeAttr(e,t),void 0))},removeAttr:function(e,t){var i,n,o=0,a=t&&t.match(ft);if(a&&1===e.nodeType)for(;i=a[o++];)n=G.propFix[i]||i,G.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)},attrHooks:{type:{set:function(e,t){if(!Z.radioValue&&"radio"===t&&G.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),oi={set:function(e,t,i){return t===!1?G.removeAttr(e,i):e.setAttribute(i,i),i}},G.each(G.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ai[t]||G.find.attr;ai[t]=function(e,t,n){var o,a;return n||(a=ai[t],ai[t]=o,o=null!=i(e,t,n)?t.toLowerCase():null,ai[t]=a),o}});var ri=/^(?:input|select|textarea|button)$/i;G.fn.extend({prop:function(e,t){return vt(this,G.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[G.propFix[e]||e]})}}),G.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,o,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return a=1!==r||!G.isXMLDoc(e),a&&(t=G.propFix[t]||t,o=G.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ri.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Z.optSelected||(G.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),G.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){G.propFix[this.toLowerCase()]=this});var si=/[\t\r\n\f]/g;G.fn.extend({addClass:function(e){var t,i,n,o,a,r,s="string"==typeof e&&e,c=0,l=this.length;if(G.isFunction(e))return this.each(function(t){G(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ft)||[];l>c;c++)if(i=this[c],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(si," "):" ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=G.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(e){var t,i,n,o,a,r,s=0===arguments.length||"string"==typeof e&&e,c=0,l=this.length;if(G.isFunction(e))return this.each(function(t){G(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(ft)||[];l>c;c++)if(i=this[c],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(si," "):"")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=e?G.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):G.isFunction(e)?this.each(function(i){G(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,o=G(this),a=e.match(ft)||[];t=a[n++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(i===Ct||"boolean"===i)&&(this.className&&mt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":mt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(si," ").indexOf(t)>=0)return!0;return!1}});var ci=/\r/g;G.fn.extend({val:function(e){var t,i,n,o=this[0];{if(arguments.length)return n=G.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=n?e.call(this,i,G(this).val()):e,null==o?o="":"number"==typeof o?o+="":G.isArray(o)&&(o=G.map(o,function(e){return null==e?"":e+""})),t=G.valHooks[this.type]||G.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=G.valHooks[o.type]||G.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(ci,""):null==i?"":i)}}}),G.extend({valHooks:{option:{get:function(e){var t=G.find.attr(e,"value");return null!=t?t:G.trim(G.text(e))}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,r=a?null:[],s=a?o+1:n.length,c=0>o?s:a?o:0;s>c;c++)if(i=n[c],!(!i.selected&&c!==o||(Z.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&G.nodeName(i.parentNode,"optgroup"))){if(t=G(i).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var i,n,o=e.options,a=G.makeArray(t),r=o.length;r--;)n=o[r],(n.selected=G.inArray(n.value,a)>=0)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),G.each(["radio","checkbox"],function(){G.valHooks[this]={set:function(e,t){return G.isArray(t)?e.checked=G.inArray(G(e).val(),t)>=0:void 0}},Z.checkOn||(G.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),G.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){G.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),G.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var li=G.now(),ui=/\?/;G.parseJSON=function(e){return JSON.parse(e+"")},G.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,t=i.parseFromString(e,"text/xml")}catch(n){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&G.error("Invalid XML: "+e),t};var di=/#.*$/,pi=/([?&])_=[^&]*/,fi=/^(.*?):[ \t]*([^\r\n]*)$/gm,hi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gi=/^(?:GET|HEAD)$/,vi=/^\/\//,mi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yi={},_i={},bi="*/".concat("*"),wi=e.location.href,xi=mi.exec(wi.toLowerCase())||[];G.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wi,type:"GET",isLocal:hi.test(xi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":G.parseJSON,"text xml":G.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,G.ajaxSettings),t):L(G.ajaxSettings,e)},ajaxPrefilter:M(yi),ajaxTransport:M(_i),ajax:function(e,t){function i(e,t,i,r){var c,u,m,y,b,x=t;2!==_&&(_=2,s&&clearTimeout(s),n=void 0,a=r||"",w.readyState=e>0?4:0,c=e>=200&&300>e||304===e,i&&(y=P(d,w,i)),y=q(d,y,w,c),c?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(G.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(G.etag[o]=b)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=y.state,u=y.data,m=y.error,c=!m)):(m=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",c?h.resolveWith(p,[u,x,w]):h.rejectWith(p,[w,x,m]),w.statusCode(v),v=void 0,l&&f.trigger(c?"ajaxSuccess":"ajaxError",[w,d,c?u:m]),g.fireWith(p,[w,x]),l&&(f.trigger("ajaxComplete",[w,d]),--G.active||G.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,a,r,s,c,l,u,d=G.ajaxSetup({},t),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?G(p):G.event,h=G.Deferred(),g=G.Callbacks("once memory"),v=d.statusCode||{},m={},y={},_=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!r)for(r={};t=fi.exec(a);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=y[i]=y[i]||e,m[e]=t),this},overrideMimeType:function(e){return _||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),i(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||wi)+"").replace(di,"").replace(vi,xi[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=G.trim(d.dataType||"*").toLowerCase().match(ft)||[""],null==d.crossDomain&&(c=mi.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===xi[1]&&c[2]===xi[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(xi[3]||("http:"===xi[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=G.param(d.data,d.traditional)),O(yi,d,t,w),2===_)return w;l=G.event&&d.global,l&&0===G.active++&&G.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!gi.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(ui.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=pi.test(o)?o.replace(pi,"$1_="+li++):o+(ui.test(o)?"&":"?")+"_="+li++)),d.ifModified&&(G.lastModified[o]&&w.setRequestHeader("If-Modified-Since",G.lastModified[o]),G.etag[o]&&w.setRequestHeader("If-None-Match",G.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+bi+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===_))return w.abort();b="abort";for(u in{success:1,error:1,complete:1})w[u](d[u]);if(n=O(_i,d,t,w)){w.readyState=1,l&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{_=1,n.send(m,i)}catch(x){if(!(2>_))throw x;i(-1,x)}}else i(-1,"No Transport");return w},getJSON:function(e,t,i){return G.get(e,t,i,"json")},getScript:function(e,t){return G.get(e,void 0,t,"script")}}),G.each(["get","post"],function(e,t){G[t]=function(e,i,n,o){return G.isFunction(i)&&(o=o||n,n=i,i=void 0),G.ajax({url:e,type:t,dataType:o,data:i,success:n})}}),G._evalUrl=function(e){return G.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},G.fn.extend({wrapAll:function(e){var t;return G.isFunction(e)?this.each(function(t){G(this).wrapAll(e.call(this,t))}):(this[0]&&(t=G(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return G.isFunction(e)?this.each(function(t){G(this).wrapInner(e.call(this,t))}):this.each(function(){var t=G(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=G.isFunction(e);return this.each(function(i){G(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){G.nodeName(this,"body")||G(this).replaceWith(this.childNodes)}).end()}}),G.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},G.expr.filters.visible=function(e){return!G.expr.filters.hidden(e)};var ki=/%20/g,Ti=/\[\]$/,Ci=/\r?\n/g,Ni=/^(?:submit|button|image|reset|file)$/i,Ai=/^(?:input|select|textarea|keygen)/i;G.param=function(e,t){var i,n=[],o=function(e,t){t=G.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=G.ajaxSettings&&G.ajaxSettings.traditional),G.isArray(e)||e.jquery&&!G.isPlainObject(e))G.each(e,function(){o(this.name,this.value)});else for(i in e)B(i,e[i],t,o);return n.join("&").replace(ki,"+")},G.fn.extend({serialize:function(){return G.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=G.prop(this,"elements");return e?G.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!G(this).is(":disabled")&&Ai.test(this.nodeName)&&!Ni.test(e)&&(this.checked||!Tt.test(e))}).map(function(e,t){var i=G(this).val();return null==i?null:G.isArray(i)?G.map(i,function(e){return{name:t.name,value:e.replace(Ci,"\r\n")}}):{name:t.name,value:i.replace(Ci,"\r\n")}}).get()}}),G.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var $i=0,Ii={},Si={0:200,1223:204},Di=G.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Ii)Ii[e]()}),Z.cors=!!Di&&"withCredentials"in Di,Z.ajax=Di=!!Di,G.ajaxTransport(function(e){var t;return Z.cors||Di&&!e.crossDomain?{send:function(i,n){var o,a=e.xhr(),r=++$i;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(delete Ii[r],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?n(a.status,a.statusText):n(Si[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=Ii[r]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),G.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return G.globalEval(e),e}}}),G.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")
}),G.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,o){t=G("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Ei=[],Fi=/(=)\?(?=&|$)|\?\?/;G.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ei.pop()||G.expando+"_"+li++;return this[e]=!0,e}}),G.ajaxPrefilter("json jsonp",function(t,i,n){var o,a,r,s=t.jsonp!==!1&&(Fi.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fi.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=G.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Fi,"$1"+o):t.jsonp!==!1&&(t.url+=(ui.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||G.error(o+" was not called"),r[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){r=arguments},n.always(function(){e[o]=a,t[o]&&(t.jsonpCallback=i.jsonpCallback,Ei.push(o)),r&&G.isFunction(a)&&a(r[0]),r=a=void 0}),"script"):void 0}),G.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=rt.exec(e),o=!i&&[];return n?[t.createElement(n[1])]:(n=G.buildFragment([e],t,o),o&&o.length&&G(o).remove(),G.merge([],n.childNodes))};var ji=G.fn.load;G.fn.load=function(e,t,i){if("string"!=typeof e&&ji)return ji.apply(this,arguments);var n,o,a,r=this,s=e.indexOf(" ");return s>=0&&(n=G.trim(e.slice(s)),e=e.slice(0,s)),G.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&G.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){a=arguments,r.html(n?G("<div>").append(G.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){r.each(i,a||[e.responseText,t,e])}),this},G.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){G.fn[t]=function(e){return this.on(t,e)}}),G.expr.filters.animated=function(e){return G.grep(G.timers,function(t){return e===t.elem}).length};var Mi=e.document.documentElement;G.offset={setOffset:function(e,t,i){var n,o,a,r,s,c,l,u=G.css(e,"position"),d=G(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),a=G.css(e,"top"),c=G.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(a+c).indexOf("auto")>-1,l?(n=d.position(),r=n.top,o=n.left):(r=parseFloat(a)||0,o=parseFloat(c)||0),G.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(p.top=t.top-s.top+r),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):d.css(p)}},G.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){G.offset.setOffset(this,e,t)});var t,i,n=this[0],o={top:0,left:0},a=n&&n.ownerDocument;if(a)return t=a.documentElement,G.contains(t,n)?(typeof n.getBoundingClientRect!==Ct&&(o=n.getBoundingClientRect()),i=W(a),{top:o.top+i.pageYOffset-t.clientTop,left:o.left+i.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===G.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),G.nodeName(e[0],"html")||(n=e.offset()),n.top+=G.css(e[0],"borderTopWidth",!0),n.left+=G.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-G.css(i,"marginTop",!0),left:t.left-n.left-G.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Mi;e&&!G.nodeName(e,"html")&&"static"===G.css(e,"position");)e=e.offsetParent;return e||Mi})}}),G.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n="pageYOffset"===i;G.fn[t]=function(o){return vt(this,function(t,o,a){var r=W(t);return void 0===a?r?r[i]:t[o]:(r?r.scrollTo(n?e.pageXOffset:a,n?a:e.pageYOffset):t[o]=a,void 0)},t,o,arguments.length,null)}}),G.each(["top","left"],function(e,t){G.cssHooks[t]=x(Z.pixelPosition,function(e,i){return i?(i=w(e,t),Ut.test(i)?G(e).position()[t]+"px":i):void 0})}),G.each({Height:"height",Width:"width"},function(e,t){G.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){G.fn[n]=function(n,o){var a=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||o===!0?"margin":"border");return vt(this,function(t,i,n){var o;return G.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===n?G.css(t,i,r):G.style(t,i,n,r)},t,a?n:void 0,a,null)}})}),G.fn.size=function(){return this.length},G.fn.andSelf=G.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return G});var Oi=e.jQuery,Li=e.$;return G.noConflict=function(t){return e.$===G&&(e.$=Li),t&&e.jQuery===G&&(e.jQuery=Oi),G},typeof t===Ct&&(e.jQuery=e.$=G),G})}),define("spa",["riot","util"],function(e,t,i){var n=e("riot"),o=e("util"),a=function(e){console.info("route to be parsed: "+e);var t=[],i="",n=e.split("#"),o=1==n.length?n[0]:n[1],a=o.split("?"),r=a[0]||i,s=a[1]||"",c={};c.route=r,c.expression=-1!=r.indexOf("_"),c.expression?(c.routeKey=r.replace(/_(\w+)/g,"_"),c.paramList=r.match(/_(\w+)/g)):(c.routeKey=r,c.paramList=[]);for(var l=c.paramList.length,u=0;l>u;u++)c.paramList[u]=c.paramList[u].slice(c.paramList[u].indexOf("_")+1);var d={};s&&s.split("&").forEach(function(e){var t=e.split("=");d[t[0]]=t[1]||""}),c.query=d;var p=r.split("/");return c.module=p[0]||"",c.topic=p[1]||"",c.subModule=p[2]||"",c.subTopic=p[3]||"",t.push(c),t},r=function(e){n.observable(this),this.history=[],this.routeMap={},this.routeViewCache={},this.defaultHash=e&&e.defaultHash||""},s={init:function(){var e=this;n.route.parser(a),n.route(e._doRoute.bind(e)),this.on("init",function(){}),this.on("before-view-route-to",e._doBeforeViewRouteTo.bind(e)),this.on("view-route-to",e._doViewRouteTo.bind(e)),this.on("view-route-back",e._doViewRouteBack.bind(e)),window.prdOrNot?window.onload=function(){e.trigger("init")}:n.compile(function(){e.trigger("init")})},route:function(e,t){var i={};if(i.route=e,i.handler=t,i.expression=-1!=e.indexOf(":"),i.expression){var n=e.match(/_(:\w+)/g);i.routeKey=e.replace(/_(:\w+)/g,"_");for(var o=n.length,a=0;o>a;a++)n[a]=n[a].slice(n[a].indexOf("_:")+2);i.paramNames=n}else i.paramNames=[],i.routeKey=e;this.routeMap[i.routeKey]=i,console.info("a route rule is added:"),console.info(i)},routeView:function(e,t){var i=this;this.route(e,function(e){var n=i.routeViewCache[t.name];n||(n=i.routeViewCache[t.name]=t,n.setParent(i),n.init(e)),n.context=e,i.trigger("before-view-route-to",n),n.route(e)})},currentTrigger:function(){var e=this.currentView&&this.currentView.tag;e&&e.trigger.apply(e,arguments)},_doBeforeViewRouteTo:function(e){console.error(e),this.currentView==e&&this.currentView.equalRoute(e)?this.currentView&&this.currentView.reenter():(this.currentView&&this.currentView.leave(this.currentView,e),e.enter(this.currentView,e))},_doViewRouteTo:function(e){this.currentView&&this.currentView.show(!1),this.lastView=this.currentView,this.currentView=e,this.currentView&&this.currentView.show(!0)},_doViewRouteBack:function(){this.lastView&&this.lastView.context&&n.route(this.lastView.context.req.route)},_doRoute:function(e){var t=this,i={app:t,req:e},n=t.routeMap[e.routeKey];if(n){var o={};if(n.expression)for(var a=n.paramNames.length,r="",s=0;a>s;s++)r=n.paramNames[s],o[r]=e.paramList[s]||null;e.params=o;var c=n.handler;if(c)try{c(i)}catch(l){console.error(l),console.error("500 on "+e.route+" :"+l.message),t.trigger("500",e,l)}else console.info("404 on "+e.route),t.trigger("404",e)}else console.info("404 on "+e.route),t.trigger("404",e)},emptyFn:function(){}};o.extend(r.prototype,s),i.exports=r}),define("util",["jquery","riot","isjs"],function(e,t,i){function n(e){for(var t="",i=0;e>i;i++){var n=Math.ceil(35*Math.random());t+=y[n]}return t}function o(e){var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return 10>i&&(i="0"+i),10>n&&(n="0"+n),t+"-"+i+"-"+n}function a(e){var t=new Date(p,e,1),i=new Date(p,e+1,1),n=(i-t)/864e5;return n}var r=e("jquery"),s=e("riot"),c=new Date,l=c.getDay(),u=c.getDate(),d=c.getMonth(),p=c.getYear();p+=2e3>p?1900:0;var f=" 00:00:00",h=" 23:59:59",g=new Date;g.setDate(1),g.setMonth(g.getMonth()+1);var v=(g.getYear(),g.getMonth()),m="http://7u2kxz.com2.z0.glb.qiniucdn.com/",y=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_={PA:{NAME:"活动",ACTION:{PUBLISH:"发起",VIEW:"浏览",COLLECT:"收藏",APPLICATE:"报名",SHARE:"分享",LIKES:"点赞"}}},b=function(e){return["fa","of","pt","tr","tb","tn","ex"].indexOf(e)>-1?"/public/images/def_img_"+e+".jpg":"/public/images/pabanner.png"},w={getDc:function(){return _},trim:function(){return string.replace(/( +)$/g,"").replace(/^( +)/g,"")},extend:function(e,t){for(var i in t)e[i]=t[i];return e},setImageHeight:function(e){var t=Math.round(360*e("#wary").width()/640);e(".img1").css("height",t)},dateFormatstr:function(e){var t=e.split("-");return t[1]+"/"+t[2]},dateFormat:function(e,t){function i(e){return e.length<2&&(e="0"+e),e}for(var n="",o=0,a=/MM/,r=/dd/,s=/yyyy/,c=[a,r,s],l=[],u=i(e.getFullYear().toString()),d=i((parseInt(e.getMonth())+1).toString()),p=i(parseInt(e.getDate()).toString()),f=0;f<c.length;f++)try{if(0===t.match(c[f]).index){o=t.match(c[f]).toString().length,n=t.charAt(o),l=t.split(n);break}}catch(h){console.warn("dateformat failed---"+h)}for(fieldkey in l)for(regkey in c)if(l[fieldkey].match(c[regkey]))switch(l[fieldkey].match(c[regkey]).toString()){case"yyyy":t=t.replace("yyyy",u);case"MM":t=t.replace("MM",d);case"dd":t=t.replace("dd",p)}return t},getDateWeek:function(e){var t=new Array("周日","周一","周二","周三","周四","周五","周六");return t[e.getDay()]},validator:function(){var t=e("isjs");return t},uploadtips:function(e,t){if("show"===e){var i=200,n=r("#wary").outerWidth(),o=(parseInt(n)-i)/2,a='<div id="uploadtips" style="position: absolute;z-index: 99999999999999;top:100px;left:'+o+'px;width:200px;height:60px;background-color:rgba(0,0,0,0.6);border-radius: 5px;line-height: 60px;text-align: center;color:white"><span>'+t+"</span></div>";r("#wary").append(a)}else r("#uploadtips").remove()},plugin:function(e){return function(){e.fn.plg1=function(){}}(e),e},tipssuccess:function(e,t,i){function n(){var e=r(window).scrollTop();u.show().css("top",e+120+"px")}function o(){u.animate({opacity:0},1e3,function(){r(".succeed").remove()})}var a=r("#wary").outerWidth(),s=.31*parseInt(a)-20+"px",c=["/public/images/5.0.2.png","/public/images/5.0.1.png"],l='<div class="succeed display_none" style="height:'+s+';z-index: 999;border-radius: 8px;background:rgba(0,0,0,0.6);text-align: center;"><img id="tipsimg" style="width:50%;display:inline-block;" src='+c[e]+' /><p id="tipsmsg" style="color:white;margin-top:10px;font-size:12px;">'+t+"</p></div>";i&&(s=.32*parseInt(a)-20+"px",l='<div class="succeed display_none" style="margin-left:-27.5%;width:55%;z-index: 999;height:'+s+';border-radius: 8px;background:rgba(0,0,0,0.6);text-align: center;"><img id="tipsimg" style="width:30%;display:inline-block;" src='+c[e]+' /><p id="tipsmsg" style="color:white;margin-top:10px">'+t+"</p></div>"),r("#wary").append(l);var u=r(".succeed");if(i){var d=r(window).width();r(window).on("resize",function(){d=r(window).width();var e=u.outerWidth(),t=parseInt(e)-70;d>430&&(t=parseInt(e)-90),d>768&&(t=parseInt(e)-150),u.height(t)})}else r(window).on("resize",function(){var e=u.outerWidth(),t=parseInt(e)-20;u.height(t)});setTimeout(n,100),setTimeout(o,1e3)},getBrowser:function(){var e={versions:function(){{var e=navigator.userAgent;navigator.appVersion}return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}},language:(navigator.browserLanguage||navigator.language).toLowerCase()};return e.versions()},getWxhref:function(){var e=w.getBrowser().android?"weixin://profile/gh_ad1cd17862c0":"http://mp.weixin.qq.com/s?__biz=MzA3MjIwNTk4Mg==&mid=204371161&idx=1&sn=51f61cc7634389147a7050a5a2e97a6f#rd";return e},compareDate:function(e,t){var i=new Date(e),n=new Date(t);return Date.parse(i)>Date.parse(n)},formatDate:function(e){var t=6e4,i=60*t,n=24*i,o=30*n,a=(new Date).getTime(),r=a-new Date(e),s=r/o,c=r/(7*n),l=r/n,u=r/i,d=r/t;return result=s>=1?parseInt(s)+"个月前":c>=1?parseInt(c)+"周前":l>=1?parseInt(l)+"天前":u>=1?parseInt(u)+"小时前":d>=1?parseInt(d)+"分钟前":"刚刚"},parseImgUrl:function(e){var t="";return t=e.meta&&""!=e.meta&&"undefined"!=e.meta.split("|")[0]&&this.imageAdaptCfg4qn_copy.getCfg(e.meta.split("|")[0],e.meta.split("|")[1],e.url)||e.url,"http://"+t},calcImageUrl:function(e){var t="";if(e.images&&e.images[0]){var i=e.images[0];t=i.url&&""!=i.url?i.meta&&""!=i.meta&&"undefined"!=i.meta.split("|")[0]&&this.imageAdaptCfg4qn.getCfg(i.meta.split("|")[0],i.meta.split("|")[1],i.url)||i.url:i.mediaId&&""!=i.mediaId?w.getBrowser().ios===!0&&i.name?m+i.name+"?imageMogr2/auto-orient":"http://file.api.weixin.qq.com/cgi-bin/media/get?access_token="+__page.at+"&media_id="+i.mediaId:e&&e.tags.type&&e.tags.type[0]&&b(e.tags.type[0])||e.pics&&e.pics[0]||"/public/images/pabanner.png"}else if(e.coverPics&&e.coverPics[0]){var i=e.coverPics[0];t=""!=i?i:e.pics&&e.pics[0]||"/public/images/pabanner.png"}else t=e&&e.tags.type&&e.tags.type[0]&&b(e.tags.type[0])||e.pics&&e.pics[0]||"/public/images/pabanner.png";return t},sharepic:function(e){var t="";if(e.images&&e.images[0]){var i=e.images[0];return i.url&&""!=i.url?t=i.meta&&""!=i.meta&&"undefined"!=i.meta.split("|")[0]&&this.imageAdaptCfg4qn.getCfg(i.meta.split("|")[0],i.meta.split("|")[1],i.url).split("?")[0]+"?imageMogr2/auto-orient"||i.url:w.calcImageUrl.call(this,e)}return w.calcImageUrl.call(this,e)},getYesterday:function(e){var t=e-864e5,i=new Date;i.setTime(t);var n=i.getFullYear(),o=i.getDate(),a=i.getMonth()+1;10>a&&(a="0"+a);var r=n+"-"+a+"-"+o;return r},imageAdaptCfg4qn:{viewportw:window.outerWidth>=640&&640||document.documentElement.clientWidth||window.innerWidth,usragent:function(){return w.getBrowser()},getviewporth:function(e){return e*this.rate.toFixed(0)},rate:.5625,mogroptions:{autoorient:"auto-orient"},getmogroptions:function(){var e="imageMogr2/";for(var t in this.mogroptions)e+=this.mogroptions[t];return e},getCfg:function(e,t,i){var n=e&&t&&(t/e).toFixed(2),o=0,a=0,r=this.viewportw,s=0,c="";return this.usragent().ios===!0&&(r=2*this.viewportw),n>this.rate?(o=e>r&&r||e,a=(o*this.rate+1).toFixed(0)):(s=this.getviewporth(r),a=t>s&&s||t,o=(a/this.rate+1).toFixed(0)),c="?imageView2/1/w/"+o+"/h/"+a+"|"+this.getmogroptions(),i+=c}},imageAdaptCfg4qn_copy:{viewportw:window.outerWidth>=640&&640||document.documentElement.clientWidth||window.innerWidth,usragent:function(){return w.getBrowser()},getviewporth:function(e){return e*this.rate.toFixed(0)},rate:1,mogroptions:{autoorient:"auto-orient"},getmogroptions:function(){var e="imageMogr2/";for(var t in this.mogroptions)e+=this.mogroptions[t];return e},getCfg:function(e,t,i){var n=e&&t&&(t/e).toFixed(2),o=0,a=0,r=this.viewportw,s=0,c="";return this.usragent().ios===!0&&(r=2*this.viewportw),n>this.rate?(o=e>r&&r||e,a=(o*this.rate+1).toFixed(0)):(s=this.getviewporth(r),a=t>s&&s||t,o=(a/this.rate+1).toFixed(0)),c="?imageView2/1/w/"+o+"/h/"+a+"|"+this.getmogroptions(),i+=c}},convertToValue:function(e){for(var e=e||[],t=[],i=0,n=e.length;n>i;i+=1)t[i]=__app.enums.TypeTags.values[e[i]];return t},getFileName:function(){return n(3)+(new Date).getTime().toString()},replaceImgTemplate:function(e){return e.replace(/\%\%(.*?)\%\%/g,'<img filename="$1" src="http://7u2kxz.com2.z0.glb.qiniucdn.com/$1">')},getLastDayStartDate:function(){var e=new Date(p,d,u);return o(e)+f},getLastDayEndDate:function(){var e=new Date(p,d,u+3);return o(e)+h},getWeekStartDate:function(){var e=new Date(p,d,u-l+1);return o(e)+f},getWeekEndDate:function(){var e=new Date(p,d,u+(7-l));return o(e)+h},getNextWeekStartDate:function(){var e=new Date(p,d,u+(7-l)+1);return o(e)+f},getNextWeekEndDate:function(){var e=new Date(p,d,u+(14-l));return o(e)+h},getMonthStartDate:function(){var e=new Date(p,d,1);return o(e)+f},getMonthEndDate:function(){var e=new Date(p,d,a(d));return o(e)+h},getNextMonthStartDate:function(){var e=new Date(p,v,1);return o(e)+f},getNextMonthEndDate:function(){var e=new Date(p,v,a(v));return o(e)+h},forbidOperation:function(){var e=r("<div/>"),t=r(window).height(),i=r("body").height();e.addClass("forbidShadow");var n=t>i?t:i;e.css({position:"absolute",top:"0px",left:"0px;",height:n+"px",background:"#000",width:"100%",opacity:"0"}).css("z-index","999"),r("body").append(e)},removeforbidOperation:function(){r(".forbidShadow")&&r(".forbidShadow").remove()},forbidOperation_cp:function(){var e=r("<div/>"),t=r(window).height(),i=r("body").height();e.addClass("forbidShadow1");var n=t>i?t:i;e.css({position:"absolute",top:"0px",left:"0px;",height:n+"px",background:"#000",width:"100%",opacity:"0"}).css("z-index","999"),r("body").append(e)},removeforbidOperation_cp:function(){r(".forbidShadow1")&&r(".forbidShadow1").remove()},setCookie:function(e,t,i){var n=new Date,o=i;n.setTime(n.getTime()+24*o*3600*1e3),document.cookie=e+"="+t+";expires="+n.toGMTString()},getCookie:function(e){for(var t,i=document.cookie.replace(/[ ]/g,""),n=i.split(";"),o=0;o<n.length;o++){var a=n[o].split("=");if(e==a[0]){t=a[1];break}}return t}};w.wedgt={imgPreviewer:function(e,t,i){function n(){r(".imgPreviewerUl").parent().remove(),e.css({height:"auto",overflow:"auto"}),r("body").css({height:"auto",overflow:"auto",minHeight:"auto"})}function o(e){e.preventDefault(),e||(e=window.event),w=parseInt(u.css("marginLeft"),10),f=(new Date).getTime(),h=e.touches[0].pageX,g=e.touches[0].pageY,v=e.touches[0].pageX,m=e.touches[0].pageY}function a(e){e.preventDefault();var t=e||window.event;y=t.touches[0].pageX,_=t.touches[0].pageY,y>v&&0===b||v>y&&b===x-1||(v>y?u.css({marginLeft:w-Math.abs(y-h)+"px"}):u.css({marginLeft:w+Math.abs(y-h)+"px"}),v=y)}function s(){var e=(new Date).getTime()-f,t=y-h,i=_-g,o=0>y-h;if((100>e&&0===y&&0===_||100>e&&Math.abs(t)<5&&Math.abs(5>i))&&n(),Math.abs(t)>=C&&o){if(b===x-1)return u.css({marginLeft:"-"+b*parseInt(k,10)+"px"}),void 0;b++,u.css({marginLeft:"-"+b*parseInt(k,10)+"px"})}else if(Math.abs(t)>=C&&!o){if(0===b)return u.css({marginLeft:"0px"}),void 0;b--,u.css({marginLeft:"-"+b*parseInt(k,10)+"px"})}else u.css({marginLeft:"-"+b*parseInt(k,10)+"px"});c(b),y=0,_=0}function c(e){r(".picPrevIndexSpan").each(function(){r(this).removeClass("picIndexSpanSelected")}),r("#picIndexSpan"+e).addClass("picIndexSpanSelected")}var l,u,d,p,f,h=0,g=0,v=0,m=0,y=0,_=0,b=i.currentIndex||0,w=0,x=t.length,k=e.outerWidth()+"px",T=r(window).height()+"px",C=.3*parseInt(k,10),N='<div class="imgPreviewer" style="position:absolute;z-index:44444444;top:0px;left:0px;width:'+k+";height:"+T+';overflow: hidden;background-color:black"><ul class="imgPreviewerUl" style="overflow:hidden;width:'+100*x+'%;margin:0px;padding: 0px;transition:all 0.2s ease-out;">';for(l=0;x>l;l++)d=t[l].meta.split("|")[0]/t[l].meta.split("|")[1],p=parseInt(k,10)/d,N+='<li style="width:'+100/x+"%;height:"+T+";float:left;line-height:"+T+'"><img src="http://'+t[l].url+'" style="width:100%;height:'+p+'px"/></li>';for(N+='</ul><div style="background-color: rgba(0,0,0,0.4);width:100%;height:80px;line-height: 40px;color:white;position: absolute;bottom:0px;left: 0px;text-align: center"><div style="height:40px;width:100%;line-height: 40px">',l=0;x>l;l++)N+='<span class="picPrevIndexSpan" id="picIndexSpan'+l+'"></span>';N+="</div>"+i.msg+"</div></div>",e.append(N),c(b),e.css({height:T,overflow:"hidden"}),r("body").css({height:T,overflow:"hidden",minHeight:T}),u=r(".imgPreviewerUl"),document.querySelector(".imgPreviewerUl").addEventListener("touchstart",o,!1),document.querySelector(".imgPreviewerUl").addEventListener("touchmove",a,!1),document.querySelector(".imgPreviewerUl").addEventListener("touchend",s,!1),document.querySelector(".imgPreviewer").addEventListener("click",n,!1)}},w.wedgt.imgPreviewer.refresh=function(e){r(".imgPreviewerUl").parent().remove(),e.css({height:"auto",overflow:"auto"}),r("body").css({height:"auto",overflow:"auto",minHeight:"auto"})};var x={Bold:"boldClass",Italic:"italicClass",TextAlign:"textAlignClass",JustifyLeft:"justifyLeftClass",JustifyCenter:"justifyCenterClass",JustifyRight:"justifyRightClass",Img:"imgClass",Color:"fontColorClass",redColor:"colorRedClass",greenColor:"colorGreenClass",blueColor:"colorBlueClass",grayColor:"colorGrayClass",orangeColor:"colorOrangeClass",purpleColor:"colorPurpleClass",Size:"sizeClass",littleSize:"sizeLittleClass",bigSize:"sizeBigClass"},k={red:"red",blue:"blue",green:"green",purple:"purple",orange:"orange",gray:"gray"},T={"#ff0000":"red","#ffa500":"orange","#0000ff":"blue","#008000":"green","#800080":"purple","#808080":"gray"};w.wedgt.WcEditor=function(e){this.modules={};for(var t in e.modules)this.modules[t]=t;return this.container=e.container,this.initialed=!1,s.observable(this),this},w.wedgt.WcEditor.Module=function(e){this.name=e.name,this.type=e.type,this.option=e.option,this.cmd=e.cmd,this.before=e.before,this.after=e.after,this.on=!1},w.wedgt.WcEditor.Module.prototype={getName:function(){return this.name},getType:function(){return this.type},getOption:function(){return this.option},getCmd:function(){return this.cmd},getBefore:function(){return this.before},getAfter:function(){return this.after},getOn:function(){return this.on},setOn:function(e){this.on=e}},w.wedgt.WcEditor.prototype.init=function(){var e=this;if(!e.initialed){var t='<ul class="funcheader"></ul>';r("#"+this.container).css("overflow","hidden"),r("#"+this.container).append(t),$container=r("#"+this.container),this.modules.Bold&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.Bold,type:"cmd",option:null,cmd:{name:"Bold",bool:null,param:null}})),this.modules.Img&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.Img,type:"cmd",cmd:{name:"insertImage",bool:!1,param:null},before:function(t){var i=w.getFileName();e.off("chooseImgComplete").on("chooseImgComplete",function(e){t&&t(e,i)}),e.trigger("chooseImgBegin",{fileName:i})},after:function(e,t,i){return r("#contentdiv img:not([fileName])").attr("fileName",t).attr("localId",e),i?i():void 0}})),this.modules.Italic&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.Italic,type:"cmd",option:null,cmd:{name:"Italic",bool:null,param:null}})),this.modules.TextAlign&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.TextAlign,type:"nav",option:[{name:"JustifyLeft",bool:null,param:null},{name:"JustifyCenter",bool:null,param:null},{name:"JustifyRight",bool:null,param:null}],cmd:null})),this.modules.Color&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.Color,type:"nav",option:[{name:"redColor",bool:null,param:k.red},{name:"blueColor",bool:null,param:k.blue},{name:"greenColor",bool:null,param:k.green},{name:"orangeColor",bool:null,param:k.orange},{name:"purpleColor",bool:null,param:k.purple},{name:"grayColor",bool:null,param:k.gray}],cmd:{name:"ForeColor"}})),this.modules.Size&&this.addModule(new w.wedgt.WcEditor.Module({name:this.modules.Size,type:"nav",option:[{name:"littleSize",bool:null,param:3},{name:"bigSize",bool:null,param:5}],cmd:{name:"FontSize"}})),e.initialed=!0}},w.wedgt.WcEditor.prototype.reset=function(){var e=this;console.log($container),$container.find(".contentcontainer").remove();var t='<div class="contentcontainer"><div id="contentdiv" contenteditable="true" class="editorcontent"></div></div>';$container.append(t),r(".editorSubMenu").addClass("display_none"),r("#contentdiv").css("cursor","pointer").off("touchend").on("touchend",function(){e.getFocusPos(function(t){e._getStyleBubble(r(t.endContainer).parent(),function(t){e._setMenu(t)})})})},w.wedgt.WcEditor.prototype._getStyleBubble=function(e,t){function i(e){return o=e,"contentdiv"===o.attr("id")?t(a):("FONT"===e.get(0).tagName&&(a.Size||o.attr("size")&&(a.Size=o.attr("size")),a.Color||o.attr("color")&&(a.Color=o.attr("color"))),"DIV"===e.get(0).tagName&&(a.TextAlign||o.attr("style")&&(a.TextAlign=o.css("textAlign"))),"B"===e.get(0).tagName&&(a.Bold||(a.Bold="Bold")),Object.keys(a).length===Object.keys(n.modules).length?t(a):(i(o.parent()),void 0))}var n=this,o=r(e),a={};i(o)},w.wedgt.WcEditor.prototype._setMenu=function(e){var t=this,i=t.modules;r(".funcheader").find("input").each(function(){var t=r(this),n=t.attr("id");t.removeClass(x[n]+"-h").removeClass(x[n]+"Parent-h"),e[n]&&("nav"===i[n].getType()?(t.addClass(x[n]+"Parent-h"),t.prev().find("input").each(function(){var t=r(this),i=t.attr("id"),o=e[n],a={};"Color"===n&&(o=T[o]),a=new RegExp(o,"ig"),a.test(i)&&t.addClass(x[i]+"-h")})):t.addClass(x[n]+"Parent-h"))})},w.wedgt.WcEditor.prototype.addModule=function(e){function t(e,t,i){var n="<input id="+t+" type='button' class='"+x[t]+"'/>";e.append(n),i(r("#"+t))}var i=this;i.modules[e.name]=e;var n=e.name,o=e.cmd,a=e.option,s=e.before,c=e.after,l='<li class="'+x[n]+'Parent"></li>';r(".funcheader").append(l);var u="<div class='"+x[n]+"FuncContainer editorSubMenu display_none'></div>";if(r("."+x[n]+"Parent").append(u),"nav"===e.type){t(r("."+x[n]+"Parent"),n,function(e){e.css("cursor","pointer").off("click").on("click",function(){e.addClass(x[n]+"Parent-h");var t=parseInt(e.prev().outerWidth())/2-parseInt(e.outerWidth())/2;return e.prev().css({marginLeft:"-"+t+"px"}),r("#contentdiv").focus(),r(".editorSubMenu").not("."+x[n]+"FuncContainer").addClass("display_none"),r("."+x[n]+"FuncContainer").toggleClass("display_none"),!1})});for(var d=0,p=a.length;p>d;d++)!function(e){t(r("."+x[n]+"FuncContainer"),a[e].name,function(t){t.css("cursor","pointer").off("click").on("click",function(){var n=t.parent();t.toggleClass(x[a[e].name]+"-h"),r("#contentdiv").focus(),t.siblings().each(function(){r(this).removeClass(x[r(this).attr("id")]+"-h")});var s=null!=o?o.name:a[e].name;document.execCommand(s,a[e].bool,a[e].param),n.addClass("display_none"),i._renderNavInput(n)||n.next().removeClass(x[n.next().attr("id")]+"Parent-h")})})}(d)}else t(r("."+x[n]+"Parent"),n,function(e){e.css("cursor","pointer").off("click").on("click",function(){e.toggleClass(x[n]+"Parent-h"),r("#contentdiv").focus(),s?s(function(e,t){return document.execCommand(o.name,o.bool,e),c?(c(e,t,function(){}),void 0):void 0}):(r("#contentdiv").focus(),document.execCommand(o.name,o.bool,o.param),c&&c())})});r(".editorSubMenu").css("cursor","pointer").off("click").on("click",function(){return!1}),r(document).css("cursor","pointer"),r(document).off("click").on("click",function(){r(".editorSubMenu").addClass("display_none")})},w.wedgt.WcEditor.prototype._renderNavInput=function(e){var t=!1;return e.find("input").each(function(){r(this).hasClass(x[r(this).attr("id")]+"-h")&&(t=!0)}),t},w.wedgt.WcEditor.prototype.getFocusPos=function(e){setTimeout(function(){return e(document&&document.getSelection&&document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0)||null)},100)},w.wedgt.WcEditor.prototype.getContentHtml=function(){return r("#contentdiv").html()},w.wedgt.WcEditor.prototype.getEncodeContentHtml=function(){return encodeURI(r("#contentdiv").html())},w.wedgt.WcEditor.prototype.setContentHtml=function(e){var t=decodeURI(e);t=t.replace(/<(.*?)script(.*?)>(.*?)<(.*?)\/script(.*?)>/gi,"&lt$1script$2&gt$3&lt$4/script$5&gt"),r("#contentdiv").html(t)};w.map={_uniqueMap:{},_innerEventDispatcher:{swipeLeft:function(e,t,i){w.map._innerEventDispatcher._swipe(e,t,i)},swipeRight:function(e,t,i){w.map._innerEventDispatcher._swipe(e,t,i)},tap:function(e,t,i){console.log(e);var n,o,a,r,s,c,l=0,u=0,d=null,p=function(e){e||(e=window.event),l=e.touches[0].pageX,u=e.touches[0].pageY,a=0,r=0,n=(new Date).getTime()},f=function(e){var t=e;clearTimeout(d),d=setTimeout(function(){a=t.touches[0].pageX,r=t.touches[0].pageY},100)},h=function(){o=(new Date).getTime(),s=a-l,c=r-u,(100>o-n&&0===a&&0===r||100>o-n&&5>s&&5>c)&&t.trigger("tap")};return"off"===i?(e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",f,!1),e.removeEventListener("touchend",h,!1),void 0):(e.addEventListener("touchstart",p,!1),e.addEventListener("touchmove",f,!1),e.addEventListener("touchend",h,!1),void 0)},_swipe:function(e,t,i){var n,o=0,a=null,r=function(e){e.preventDefault(),e||(e=window.event),o=e.touches[0].pageX},s=function(e){var t=e;clearTimeout(a),a=setTimeout(function(){n=t.touches[0].pageX},100)},c=function(e){var i=(e.touches[0],n-o);i>20?t.trigger("swipeRight"):20>i&&(alert(11),t.trigger("swipeLeft"))};return"off"===i?(e.removeEventListener("touchstart",r,!1),e.removeEventListener("touchmove",s,!1),e.removeEventListener("touchend",c,!1),void 0):(e.addEventListener("touchstart",r,!1),e.addEventListener("touchmove",s,!1),e.addEventListener("touchend",c,!1),void 0)}}},w.events={observable:function(e,t){console.log(e);var i;if(t&&t.unique&&(i=t.unique),e&&e._createdFlag)return e;i===!0&&w&&!w.map._uniqueMap[e]&&(w.map._uniqueMap[e]=e);var n=i===!0&&e||Object.create(e);return obser_proto={_createdFlag:!0,on:function(t,i){if(this._isExst(t))return this;var o={};return o[t]=i,this.events.push(o),w&&w.map._innerEventDispatcher[t]&&w.map._innerEventDispatcher[t](e,n,"on"),this},off:function(t){var o=this._index(t);return o>=0&&(this.events.splice(o,1),0===this.events.length&&i===!0&&delete w.map._uniqueMap[e],w&&w.map._innerEventDispatcher[t]&&w.map._innerEventDispatcher[t](e,n,"off")),this},events:[],trigger:function(e){var t,i=this.events.length;for(t=0;i>t;t+=1)if(this.events[t][e])return this.events[t][e].call(n)},_isExst:function(e){return this._index(e)>=0?!0:!1},_index:function(e){var t,i,n,o=this.events;for(t=0,i=o.length;i>t;t+=1)if(o[t][e])return n=t;return-1}},w.extend(n,obser_proto),n},_valueToKey:function(e){var t={};for(var i in e)t[e[i]]=i;return t},htmlToTemplate:function(e){var t=r(this._wrapdiv(e));return t.find("img").each(function(){r(this).replaceWith("%%"+r(this).attr("filename")+"%%")}),t.html()},_wrapdiv:function(e){return e="<div>"+e+"</div>"},_unwrapdiv:function(e){return r(e).html()}},i.exports=w}),define("agent",["jquery","jquery.cookie","util","page","riot","nest","jssdk"],function(e,t,i){var n=e("jquery");n=e("jquery.cookie"),util=e("util");e("page");riot=e("riot"),nest=e("nest"),$=n,wx=e("jssdk");var o=__page.jc;o?(wx.config(o),wx.error(function(e){console.log(e)})):console.error("no js config found");var a=a||[];a.push(["_setAccount","1254786218"]);var r={init:function(){return this}};!function(e){function t(){util.forbidOperation()}function i(){util.removeforbidOperation()}e(document).ajaxStart(t).ajaxComplete(i),util.setImageHeight(e),e(window).resize(function(){util.setImageHeight(e)}),e(".img_home").click(function(){e(".home_gy").removeClass("home_gy_set1"),e(".home_gy").addClass("home_gy_set")}),e(".home_close").click(function(){e(".home_gy").removeClass("home_gy_set"),e(".home_gy").addClass("home_gy_set1")}),window.newActivity={},window.revokedActivity={},riot.observable(window.newActivity),riot.observable(window.revokedActivity)}(n),i.exports=r}),define("riot",function(e,t,i){!function(){function e(e){var t={val:e},i=e.split(/\s+in\s+/);return i[1]&&(t.val=x(0)+i[1],i=i[0].slice(x(0).length).trim().split(/,\s*/),t.key=i[0],t.pos=i[1]),t}function n(e,t,i){var n={};return n[e.key]=t,e.pos&&(n[e.pos]=i),n}function o(t,i,o){function a(e,t,i){f.splice(e,0,t),h.splice(e,0,i)}p(t,"each");var r,c=t.outerHTML,l=t.previousSibling,u=t.parentNode,f=[],h=[];o=e(o),i.one("update",function(){u.removeChild(t)}).one("premount",function(){u.stub&&(u=i.root)}).on("update",function(){var e=k(o.val,i);if(e){if(!Array.isArray(e)){var t=JSON.stringify(e);if(t==r)return;r=t,d(h,function(e){e.unmount()}),f=[],h=[],e=Object.keys(e).map(function(t){return n(o,t,e[t])
})}d(v(f,e),function(e){var t=f.indexOf(e),i=h[t];i&&(i.unmount(),f.splice(t,1),h.splice(t,1))});var p=u.childNodes,g=[].indexOf.call(p,l);d(e,function(t,l){var d=e.indexOf(t,l),v=f.indexOf(t,l);if(0>d&&(d=e.lastIndexOf(t,l)),0>v&&(v=f.lastIndexOf(t,l)),0>v){!r&&o.key&&(t=n(o,t,d));var m=new s({tmpl:c},{before:p[g+1+d],parent:i,root:u,item:t});return m.mount(),a(d,t,m)}return o.pos&&h[v][o.pos]!=d&&(h[v].one("update",function(e){e[o.pos]=d}),h[v].update()),d!=v?(u.insertBefore(p[g+v+1],p[g+d+1]),a(d,f.splice(v,1)[0],h.splice(v,1)[0])):void 0}),f=e.slice()}})}function a(e,t,i){g(e,function(e){if(1==e.nodeType){var n=y(e);if(n&&!e.getAttribute("each")){var o=new s(n,{root:e,parent:t});t.tags[e.getAttribute("name")||n.name]=o,i.push(o)}d(e.attributes,function(i){/^(name|id)$/.test(i.name)&&(t[i.value]=e)})}})}function r(e,t,i){function n(e,t,n){if(t.indexOf(x(0))>=0){var o={dom:e,expr:t};i.push(f(o,n))}}g(e,function(e){var i=e.nodeType;if(3==i&&"STYLE"!=e.parentNode.tagName&&n(e,e.nodeValue),1==i){var a=e.getAttribute("each");return a?(o(e,t,a),!1):(d(e.attributes,function(t){var i=t.name,o=i.split("__")[1];return n(e,t.value,{attr:o||i,bool:o}),o?(p(e,i),!1):void 0}),y(e)?!1:void 0)}})}function s(e,t){function i(){d(Object.keys(x),function(e){c[e]=k(x[e],p||s)})}function n(e){if(d(v,function(t){t[e?"mount":"unmount"]()}),p){var t=e?"on":"off";p[t]("update",s.update)[t]("unmount",s.unmount)}}var o,s=w.observable(this),c=m(t.opts)||{},l=h(e.tmpl),p=t.parent,g=[],v=[],y=t.root,_=t.item,b=e.fn,x={};b&&y.riot||(y.riot=!0,f(this,{parent:p,root:y,opts:c,tags:{}},_),d(y.attributes,function(e){x[e.name]=e.value}),this.update=function(e){f(s,e,_),i(),s.trigger("update",_),u(g,s,_),s.trigger("updated")},this.mount=function(){if(i(),b&&b.call(s,c),n(!0),r(l,s,g),s.update(),s.trigger("premount"),b)for(;l.firstChild;)y.appendChild(l.firstChild);else o=l.firstChild,y.insertBefore(o,t.before||null);y.stub&&(s.root=y=p.root),s.trigger("mount")},this.unmount=function(){var e=b?y:o,t=e.parentNode;if(t){if(p)t.removeChild(e);else for(;y.firstChild;)y.removeChild(y.firstChild);n(),s.trigger("unmount"),s.off("*"),delete y.riot}},a(l,this,v))}function c(e,t,i,n,o){i[e]=function(e){e=e||window.event,e.which=e.which||e.charCode||e.keyCode,e.target=e.target||e.srcElement,e.currentTarget=i,e.item=o,t.call(n,e)!==!0&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1);var a=o?n.parent:n;a.update()}}function l(e,t,i){e&&(e.insertBefore(i,t),e.removeChild(t))}function u(e,t,i){d(e,function(e){var n=e.dom,o=e.attr,a=k(e.expr,t),r=e.dom.parentNode;if(null==a&&(a=""),r&&"TEXTAREA"==r.tagName&&(a=a.replace(/riot-/g,"")),e.value!==a){if(e.value=a,!o)return n.nodeValue=a;if(p(n,o),"function"==typeof a)c(o,a,n,t,i);else if("if"==o){var s=e.stub;a?s&&l(s.parentNode,s,n):(s=e.stub=s||document.createTextNode(""),l(n.parentNode,n,s))}else if(/^(show|hide)$/.test(o))"hide"==o&&(a=!a),n.style.display=a?"":"none";else if("value"==o)n.value=a;else if("riot-"==o.slice(0,5))o=o.slice(5),a?n.setAttribute(o,a):p(n,o);else{if(e.bool){if(n[o]=a,!a)return;a=o}"object"!=typeof a&&n.setAttribute(o,a)}}})}function d(e,t){for(var i,n=0,o=(e||[]).length;o>n;n++)i=e[n],null!=i&&t(i,n)===!1&&n--;return e}function p(e,t){e.removeAttribute(t)}function f(e,t,i){return t&&d(Object.keys(t),function(i){e[i]=t[i]}),i?f(e,i):e}function h(e){var t=e.trim().slice(1,3).toLowerCase(),i=/td|th/.test(t)?"tr":"tr"==t?"tbody":"div",n=document.createElement(i);return n.stub=!0,n.innerHTML=e,n}function g(e,t){if(e)if(t(e)===!1)g(e.nextSibling,t);else for(e=e.firstChild;e;)g(e,t),e=e.nextSibling}function v(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function m(e){function t(){}return t.prototype=e,new t}function y(e){return C[e.tagName.toLowerCase()]}function _(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function b(e,t,i){var n=C[t];return n&&e&&(n=new s(n,{root:e,opts:i})),n&&n.mount?(n.mount(),T.push(n),n.on("unmount",function(){T.splice(T.indexOf(n),1)})):void 0}var w={version:"WIP",settings:{}};w.observable=function(e){e=e||{};var t={},i=0;return e.on=function(n,o){return"function"==typeof o&&(o._id="undefined"==typeof o._id?i++:o._id,n.replace(/\S+/g,function(e,i){(t[e]=t[e]||[]).push(o),o.typed=i>0})),e},e.off=function(i,n){return"*"==i?t={}:i.replace(/\S+/g,function(e){if(n)for(var i,o=t[e],a=0;i=o&&o[a];++a)i._id==n._id&&(o.splice(a,1),a--);else t[e]=[]}),e},e.one=function(t,i){return i&&(i.one=1),e.on(t,i)},e.trigger=function(i){for(var n,o=[].slice.call(arguments,1),a=t[i]||[],r=0;n=a[r];++r)n.busy||(n.busy=1,n.apply(e,n.typed?[i].concat(o):o),n.one?(a.splice(r,1),r--):a[r]!==n&&r--,n.busy=0);return e},e},function(e,t){function i(){return r.hash.slice(1)}function n(e){return e.split("/")}function o(e){e.type&&(e=i()),e!=a&&(s.trigger.apply(null,["H"].concat(n(e))),a=e)}if(this.top){var a,r=location,s=e.observable(),c=window,l=e.route=function(e){e[0]?(r.hash=e,o(e)):s.on("H",e)};l.exec=function(e){e.apply(null,n(i()))},l.parser=function(e){n=e},c.addEventListener?c.addEventListener(t,o,!1):c.attachEvent("on"+t,o)}}(w,"hashchange");var x=function(e,t,i){return function(n){return t=w.settings.brackets||e,i!=t&&(i=t.split(" ")),n&&n.test?t==e?n:RegExp(n.source.replace(/\{/g,i[0].replace(/(?=.)/g,"\\")).replace(/\}/g,i[1].replace(/(?=.)/g,"\\")),n.global?"g":""):i[n]}}("{ }"),k=function(){function e(e,i){return e=(e||x(0)+x(1)).replace(x(/\\{/g),"￰").replace(x(/\\}/g),"￱"),i=n(e,x(/{[\s\S]*?}/g)),new Function("d","return "+(i[0]||i[2]||i[3]?"["+i.map(function(e,i){return i%2?t(e,!0):'"'+e.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':t(i[1])).replace(/\uFFF0/g,x(0)).replace(/\uFFF1/g,x(1))+";")}function t(e,t){return e=e.replace(/\n/g," ").replace(x(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+e.replace(/\W*([\w- ]+)\W*:([^,]+)/g,function(e,t,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+t.trim()+'":"",'})+'].join(" ").trim()':i(e,t)}function i(e,t){return e=e.trim(),e?"(function(v){try{v="+(e.replace(a,function(e,t,i){return i?"(d."+i+"===undefined?window."+i+":d."+i+")":e})||"x")+"}finally{return "+(t===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function n(e,t){var i=[],n=0;return e.replace(t,function(t,o){i.push(e.slice(n,o),t),n=o+t.length}),i.concat(e.slice(n))}var o={},a=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,i){return t&&(o[t]=o[t]||e(t))(i)}}(),T=[],C={};w.tag=function(e,t,i,n){"function"==typeof i?n=i:i&&_(i),C[e]={name:e,tmpl:t,fn:n}},w.mount=function(e,t,i){function n(e){var n=t||e.tagName.toLowerCase(),a=b(e,n,i);a&&o.push(a)}"*"==e&&(e=Object.keys(C).join(", ")),"object"==typeof t&&(i=t,t=0);var o=[];return e.tagName?(n(e),o[0]):(d(document.querySelectorAll(e),n),o)},w.update=function(){return d(T,function(e){e.update()})},w.mountTo=w.mount,w.util={brackets:x,tmpl:k},"object"==typeof t?i.exports=w:"function"==typeof define&&define.amd?define(function(){return w}):"function"==typeof define&&define.cmd?define(function(e,t,i){i.exports=w}):this.riot=w}()}),define("{mainpath}",["riot","tags","agent","util","spa"],function(e,t,i){var n=e("riot");e("tags")();var o=(e("agent").init(),e("util")),a=e("spa"),r=new a({defaultHash:"activity/index"});r.routeView("debug/index",nest.viewable({name:"debug/index",mount:function(){var e=n.mount("debug-index",{});this.tag=e[0]},route:function(e){this.context=e,this.tag.trigger("open")}})),r.routeView("activity/index",nest.viewable({name:"activity/index",mount:function(e){var t=n.mount("activity-index",{filter:e.req.query,app:this.parent});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),r.history.push("activity/index"),this.tag.trigger("open",e.req.query)}})),r.routeView("mine/index",nest.viewable({name:"mine/index",mount:function(e){var t=n.mount("mine-index",{filter:e.req.query});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),r.history.push("mine/index"),this.tag.trigger("open",e.req.query)}})),r.routeView("travel/index",nest.viewable({name:"travel/index",mount:function(e){var t=n.mount("travel-index",{filter:e.req.query});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.query)}})),r.routeView("activity/_:id",nest.viewable({name:"activity/_:id",mount:function(e){var t=n.mount("activity-detail",{_id:e.req.params.id,app:this.parent});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",{id:e.req.params.id,share:e.req.query.share,guest:e.req.query.guest})}})),r.routeView("travel/_:id",nest.viewable({name:"travel/_:id",mount:function(e){var t=n.mount("travel-detail",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/new",nest.viewable({name:"activity/new",mount:function(){var e=n.mount("activity-new",{});this.tag=e[0]},route:function(e){this.context=e,this.tag.trigger("open")}})),r.routeView("activity/search",nest.viewable({name:"activity/search",mount:function(){var e=n.mount("activity-search",{app:this.parent});this.tag=e[0]},route:function(e){this.context=e,r.history.push("activity/search"),this.tag.trigger("open")}})),r.routeView("activity/edit/_:id",nest.viewable({name:"activity/edit/_:id",mount:function(e){var t=n.mount("activity-edit",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/createsuccess/_:id",nest.viewable({name:"activity/createsuccess/_:id",mount:function(e){var t=n.mount("activity-createsuccess",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.routeView("activity/add-randomnotes",nest.viewable({name:"activity/add-randomnotes",mount:function(e){var t=n.mount("add-randomnotes",{_id:e.req.params.id});this.tag=t[0]},route:function(e){this.context=e,this.parent.currentTrigger("mask"),this.tag.trigger("open",e.req.params.id)}})),r.on("init",function(){var e=o.getCookie("attentionUrl"),t=e||window.location.hash;t||(t=r.defaultHash),n.route(t),e&&o.setCookie("attentionUrl","",-1)}),r.init(),i.exports=r});var proOrdev=!0;seajs.use("{mainpath}",function(){console.info("resource loaded")});